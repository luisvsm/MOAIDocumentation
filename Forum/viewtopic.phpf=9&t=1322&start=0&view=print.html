<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - Guide: Using Moai with Chrome</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Guide: Using Moai with Chrome</h2>
		<p><a href="guide-using-moai-with-chrome-t1322/index.html">/forums/guide-using-moai-with-chrome-t1322/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 1:53 am</strong></div>
				<div class="author">by <strong>Serapth</strong></div>
				<div class="content"><a href="http://www.gamefromscratch.com/post/2012/10/22/Using-Moai-with-Chrome-(-NaCL-(-Native-Client-(-Inception-moment-there-)-)-).aspx" class="postlink">Using Chrome with Google Chrome Native Client</a><br /><br />This guide shows how to build a Native Client game and the Moai host for running your application in Chrome.<br /><br />There is currently one small problem, I have an <a href="trouble-building-chrome-nacl-host-scons-t1321/index.html" class="postlink">outstanding question</a> out looking for an answer.  For some reason, at least on Windows, the scons script doesn't seem to work with the Repository() paths provided.  I know almost nothing about scons, but I never managed to fix it.  The easy brute force solution is to just copy the three directories of source to your scons directory, but once I have another work around, I will update to the more elegant solution.<br /><br />Or, you could just download the compiled host I provide and go from there.  The guide then talks about the various files you need to create, how to setup Chrome, etc.<br /><br />Hope it proves useful to some of you.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 3:07 pm</strong></div>
				<div class="author">by <strong>me_app</strong></div>
				<div class="content">Have you tested it with rapanui? Great tutorial i got this working with Moai samples a while ago...</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 4:06 pm</strong></div>
				<div class="author">by <strong>Serapth</strong></div>
				<div class="content">No, but isn't Rapanui written entirely in Lua?  IF so, I see no reason it shouldn't just work. <br /><br /><br />(Famous last words).<br /><br />Looking at Rapanui is on my todo list...</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 4:26 pm</strong></div>
				<div class="author">by <strong>me_app</strong></div>
				<div class="content">sure but i cant get it working with rapanui not sure why..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 4:52 pm</strong></div>
				<div class="author">by <strong>Serapth</strong></div>
				<div class="content">Did you use the binaries I provided?  It should just be a matter of copying your working lua project code into the same directory as the nacl host, then registering and running it in chrome.<br /><br />Your source works in the normal windows host right?  If so, if you'd like, zip it all up and put it somewhere I can dl it and I'll check it out.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 7:32 pm</strong></div>
				<div class="author">by <strong>me_app</strong></div>
				<div class="content">My windows host is working. i pm you with an download link for the zip file. Thank you for checking it out...</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 8:44 pm</strong></div>
				<div class="author">by <strong>Serapth</strong></div>
				<div class="content">It's Sockets.<br /><br />Rapanui uses the sockets library, which isn't allowed under NaCL.<br /><br />To brute force it ( and god only knows what code you break ), do a find in the Rapanui libraries for:<br /><br />require&quot;socket&quot;<br /><br />And comment it out.  There are about 3 occurrences.  Once you do that, you game runs just fine in NaCL.  Or at least, the first screen loads.  Oddly enough, all of the code making use of sockets had nothing to do with networking, and was used exclusively for the gettime() method.  Something I imagine that you could easily substitute out a non-socket library version of.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 8:48 pm</strong></div>
				<div class="author">by <strong>me_app</strong></div>
				<div class="content">Thanks man for checking it out...</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 8:54 pm</strong></div>
				<div class="author">by <strong>Serapth</strong></div>
				<div class="content">No worries.  In looking, it seems NaCL on Moai had some socket related issues: <!-- l --><a class="postlink-local" href="google-chrome-native-client-t147/index.html">google-chrome-native-client-t147/</a><!-- l --><br /><br />It appears Rapanui is just using the sockets library for a millisecond fidelity timer, and it is only used in less than a handful of locations.  So your best bet would be to replace those calls with something else.<br /><br />Most calls look like:<br />socket.gettime() * 1000<br /><br />You can probably get away with swapping for os.clock() calls instead.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Guide: Using Moai with Chrome</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Oct 23, 2012 9:27 pm</strong></div>
				<div class="author">by <strong>me_app</strong></div>
				<div class="content">i hope the rapanui guys can fix that maybe too;) Thank you for your help this community is great..</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>