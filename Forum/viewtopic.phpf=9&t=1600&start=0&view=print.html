<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - Props, shaders, and more-props?</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Props, shaders, and more-props?</h2>
		<p><a href="props-shaders-and-more-props-t1600/index.html">/forums/props-shaders-and-more-props-t1600/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jan 31, 2013 12:01 pm</strong></div>
				<div class="author">by <strong>seebs</strong></div>
				<div class="content">I'm still sort of getting my head around Moai's model. I have done a bunch of fooling around in Corona, which is wildly different as it turns out.<br /><br />Corona has a thing called &quot;groups&quot;. Whereas most objects are fairly similar to props, a &quot;group&quot; is a thing that's sort of like a prop which is not itself displayed in any particular way, but which can contain other things which are. They have locations relative to the group, and modifications to the group (moving it, rotating it, and so on) affect all of those objects. And one of the things you can modify for a group is its alpha, so you can have a bunch of objects which may themselves have whatever settings (such as alpha, rotation, and so on), and then the group's settings are applied to them in turn. And this &quot;just works&quot; -- a group with alpha 0.5 containing an object with alpha 0.5 produces the same visual effect as an object with alpha 0.25.<br /><br />Is there a comparable concept/tool/something in Moai that can contain-and-modify other things? I've been browsing the SDK docs and examples, but most of the examples are very tightly focused on a single thing, so interactions between things are not always clear.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jan 31, 2013 12:10 pm</strong></div>
				<div class="author">by <strong>Muzz</strong></div>
				<div class="content">Moai doesn't have a do all parenting function.<br /><br />You are expected to write your own systems for things like this. It's harder but it is more flexible.<br /><br />It shouldn't be too hard to write the class using attribute linking though.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jan 31, 2013 12:39 pm</strong></div>
				<div class="author">by <strong>seebs</strong></div>
				<div class="content"><blockquote><div><cite>Muzz wrote:</cite>Moai doesn't have a do all parenting function.<br /><br />You are expected to write your own systems for things like this. It's harder but it is more flexible.<br /><br />It shouldn't be too hard to write the class using attribute linking though.</div></blockquote><br /><br />I guess my question is: Is there anything short of &quot;manually recompute all the alpha values and locations recursively down the tree&quot; for things similar to this? I mean, assuming I wanted to write my own system for it, do the primitives exist from which to assemble something wherein the layering of shader effects is handled by the rendering hardware?<br /><br />I mean, obviously, I can do a lua object which has a table of props, and has its own alpha setting, and every time it's time to render, it goes through them all adjusting their alpha settings to the product of their logical settings and its logical setting, but I'm wondering whether that's actually necessary, or there's some way to hand that off to the graphics hardware.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jan 31, 2013 10:15 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Since most all of MOAI's primitives are Tables, you can parse your tree's as you would any other Lua structure .. I personally use &quot;lua-enumerable.lua&quot; a lot in my projects, it makes for very simple expressions .. <br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=9&amp;t=1600&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #0000aa;">table</span><span style="color: #66cc66;">.</span>all<span style="color: #66cc66;">&#40;</span>anims<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span> <span style="color: #66cc66;">&#40;</span>anim<span style="color: #66cc66;">,</span> index<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anim<span style="color: #66cc66;">.</span>name <span style="color: #66cc66;">=</span> index</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anim<span style="color: #66cc66;">.</span>quad<span style="color: #66cc66;">:</span>setTexture <span style="color: #66cc66;">&#40;</span> anim<span style="color: #66cc66;">.</span>pngfile<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anim<span style="color: #66cc66;">.</span>quad<span style="color: #66cc66;">:</span>setRect <span style="color: #66cc66;">&#40;</span> anim<span style="color: #66cc66;">.</span>x1<span style="color: #66cc66;">,</span> anim<span style="color: #66cc66;">.</span>y1<span style="color: #66cc66;">,</span> anim<span style="color: #66cc66;">.</span>x2<span style="color: #66cc66;">,</span> anim<span style="color: #66cc66;">.</span>y2<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">-- &amp;etc.</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />.. as for access to Shaders, there are some samples floating around the bleeding edges of moai-dev's test/ dir, methinks ..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Feb 01, 2013 12:52 am</strong></div>
				<div class="author">by <strong>seebs</strong></div>
				<div class="content">So the underlying GPU stuff can't do &quot;render all these things with these settings, then render the resulting hunk with these other settings&quot;? &lt;-- has no OpenGL background.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Feb 01, 2013 3:42 am</strong></div>
				<div class="author">by <strong>seebs</strong></div>
				<div class="content">Looking more at the docs:<br /><br />It seems to me that &quot;layer&quot; is very close to the kind of thing I am thinking of, in that it is a thing which can contain multiple props such that they are sort of logically tied together. A bit of Internet research turns up at least one claim that layers can be inserted in other layers, and at least one claim that this will result in crashes. And it doesn't appear that the layer will actually do anything with a shader assigned to it, even though it has :setShader() because it inherits from prop.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Feb 04, 2013 3:15 pm</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">I do the groups the manual way, by decorating MOAITransform with lua functions to add/ remove children, and then iterate through all the children when setting attributes such as alpha and visibility. So far it performs well, mostly because I dont handle too many children and because I dont need to change alpha and such on every frame.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Props, shaders, and more-props?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Feb 04, 2013 3:18 pm</strong></div>
				<div class="author">by <strong>seebs</strong></div>
				<div class="content">Well, for at least some things, I can get a tolerable first pass by having large numbers of lines in a single MOAIMesh and then I can :setColor() the prop holding them.<br /><br />Poking around, with large numbers of children, manual propagation of changes would get expensive fast.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>