<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - OpenGL Textures are not loaded onPause / on Resume</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>OpenGL Textures are not loaded onPause / on Resume</h2>
		<p><a href="opengl-textures-are-not-loaded-onpause-on-resume-t2735/index.html">/forums/opengl-textures-are-not-loaded-onpause-on-resume-t2735/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jun 30, 2014 9:23 pm</strong></div>
				<div class="author">by <strong>Nodepond</strong></div>
				<div class="content">I have a successfully built project, but an issue occurs when I built the project for Android. <br /><br />When I start the game, everything works like expected. But when I pause the game (onPause-event) on the Android device and return (onResume-event), all cached openGL textures simply disappear!! Only the freshly loaded are visible, the others are just black.<br /><br />When I close and restart the game (onDestroy-event is coming up in the debugger), then textures are there again. The problem looks closely to this:<br /><!-- m --><a class="postlink" href="http://stackoverflow.com/questions/5965899/losing-opengl-textures-in-android-after-a-resume">http://stackoverflow.com/questions/5965 ... r-a-resume</a><!-- m --><br /><!-- m --><a class="postlink" href="http://stackoverflow.com/questions/2112768/prevent-onpause-from-trashing-opengl-context">http://stackoverflow.com/questions/2112 ... gl-context</a><!-- m --><br /><br />Any ideas what I can do about it?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jun 30, 2014 10:26 pm</strong></div>
				<div class="author">by <strong>halfnelson</strong></div>
				<div class="content">Sounds like something wrong with texture invalidation when the opengl context is lost. Which version/branch of moai are you using, and do you have a small reproducible test case for us to get to the bottom of this. I have certainly not seen it before</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jul 01, 2014 8:37 am</strong></div>
				<div class="author">by <strong>Nodepond</strong></div>
				<div class="content">We started the project on an older version, upgraded and merged some files. Maybe this is the cause of this behavior. I'll try to reproduce with a small project, just like you suggested and post results. Thanks for helping!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jul 01, 2014 7:15 pm</strong></div>
				<div class="author">by <strong>ezraanderson</strong></div>
				<div class="content">~<br />I have seen this before, if you have a git version, I can quickly look over your &quot;moaiactivity.java&quot;to see if I see anything obvious.<br /><br />I had a custom host that called &quot;mGLView.onPause();&quot; which destroyed all my textures.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jul 08, 2014 4:51 pm</strong></div>
				<div class="author">by <strong>Nodepond</strong></div>
				<div class="content">Hi there.<br /><br />I now made several tests and digged a little deeper. Indeed it seems, that this problem is based around Androids call to onPause() on the GLSurfaceView. I tried to configure things in the MoaiView.java in my host - even disabling everything in the &quot;	public void pause ( boolean paused )&quot; function. But nothing helps to solve this issue.<br /><br />I found also something on the web, that talk about the same problem:<br /><!-- m --><a class="postlink" href="http://gamedev.stackexchange.com/questions/12629/workaround-to-losing-the-opengl-context-when-android-pauses">http://gamedev.stackexchange.com/questi ... oid-pauses</a><!-- m --><br /><!-- m --><a class="postlink" href="http://gamedev.stackexchange.com/questions/20664/recreating-assets-after-onresume">http://gamedev.stackexchange.com/questi ... r-onresume</a><!-- m --><br /><br />Currently I try to completely circumvent Android going to pause (maybe directly determinating the app). Not an ideal solution, but better than this black-texture-thing...<br /><br />Oh, we also use a custom shader in our project, but also disabling the shader does not help - still black textures...<br /><br />PS: Our &quot;MoaiView.java&quot; is just the default-one that comes with the project (that's why I am wondering, that nobody else is experiencing this kind of problems...). Here is a pastebin: <!-- m --><a class="postlink" href="http://pastebin.com/ZH33WgM1">http://pastebin.com/ZH33WgM1</a><!-- m --></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jul 08, 2014 5:11 pm</strong></div>
				<div class="author">by <strong>Nodepond</strong></div>
				<div class="content">And here the MoaiActivity.java: <!-- m --><a class="postlink" href="http://pastebin.com/AjaRcsz1">http://pastebin.com/AjaRcsz1</a><!-- m --></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: OpenGL Textures are not loaded onPause / on Resume</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jul 08, 2014 5:36 pm</strong></div>
				<div class="author">by <strong>Nodepond</strong></div>
				<div class="content">Hm... uncommenting the line<br />mMoaiView.pause ( true );<br />in MainActivity.java just seems to solve this problem. <br /><br />It looks like, that I played with the wrong MainActivity.java-file earlier that day. Thanks ezraanderson for the hint!</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>