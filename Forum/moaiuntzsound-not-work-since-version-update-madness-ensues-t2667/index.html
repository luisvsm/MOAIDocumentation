<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - MOAIUntzSound not work since version update : Madness Ensues</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Apple" href="../feed.php%3Ff=18.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - MOAIUntzSound not work since version update : Madness Ensues" href="http://192.168.20.226:3000/forums/feed.php?f=18&amp;t=2667" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/moaiuntzsound-not-work-since-version-update-madness-ensues-t2667/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../platform-specifics-f12.html">Platform Specifics</a> <strong>&#8249;</strong> <a href="../apple-f18.html">Apple</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://192.168.20.226:3000/forums/memberlist.php?mode=email&amp;t=2667" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=18&amp;t=2667&amp;start=0&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">MOAIUntzSound not work since version update : Madness Ensues</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">iPhone / iPad / OSX / xcode<br /></div>
	<p>
		
			<strong>Moderators:</strong> <span style="color: #AA0000;" class="username-coloured">ezraanderson</span>, nosheet
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			8 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p14403" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p14403">MOAIUntzSound not work since version update : Madness Ensues</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Coguelin</strong> &raquo; Thu May 08, 2014 5:58 pm </p>

			

			<div class="content">Hey folks,<br /><br />I'm pretty new to MOAI, and it's been a bit of a rollercoaster.  I inherited a not-quite-complete project from my predecessor a few months ago, and had to pick up MOAI/Flower, Lua/Moonscript and the project's assorted trappings and satellites along the way.  I've gone from my initial position of kneejerk loathing to a sort of cautious affection for the engine... the sort you might have for a beautiful but unpredictably aggressive cat.<br /><br />One of my most recent adventures has been updating our MOAI version by merging the current repo into our branch.  It went suspiciously well in some cases, about as well as you'd expect (the branch is over a year old with some alterations on our side in the intervening time) in other cases and, in one particular case, catastrophically wrong.<br /><br />Shockingly, it's about the last one that I'd like to bend your ear.<br /><br />We have a flower class called Sound which basically acts as a wrapper for MOAIUntzSound, which it references like so:<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__index <span style="color: #66cc66;">=</span> MOAIUntzSound<span style="color: #66cc66;">.</span>getInterfaceTable<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__moai_class <span style="color: #66cc66;">=</span> MOAIUntzSound</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />Both __index and __moai_class log as tables, which is what gather is normal in the wild and wonderful world of lua, and I assume that they would log as nil if they had failed to access MOAIUntzSound... right?<br /><br />But when I try to access the length of the sound file (for scheduling and animation and whatnot), XCode helpfully informs me that there was a Param type mismatch at position 2: expected a 'number' but got a 'nil' pointing to this function:<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>getSoundLength <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">.</span>__index<span style="color: #66cc66;">.</span>getLength<span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />Which is frustrating, since the getLength function is right there in the MOAIUntzSound classes and I can's figure out why it would return nil.<br /><br />As an added kick in the teeth, the OSX version of our project (which I haven't worked on yet since out product is mobile-only anyway) works absolutely fine as far as I can tell... and it uses the same Game code and MOAI repo as our iOS version, literally the only difference is the XCode projects.<br /><br />I figured that meant there was some issue with the libraries and dependencies (not least because that is by far the most occult and unknowable part of our project to me at the moment) but it doesn't look like the libmoai-ios-untz is missing anything that the libmoai-osx-untz has, if that makes any sense.<br /><br />The 3rdparty/untz files appear to have been liberally scattered between the -untz and -3rdparty libraries in both libmoai-ios and libmoai-osx cases, but since both -untz and -3rdparty libraries are included, I assume it doesn't matter?<br /><br />I'm not 100% sure that I've given you everything you need to have a clue what's going on, but I would appreciate any kind of insight, I'm at my wit's end.<br /><br />Help me Obi-wan Kenobi, you're my only hope.</div>

			

		</div>

		
			<dl class="postprofile" id="profile14403">
			<dt>
				<strong>Coguelin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Thu May 08, 2014 12:01 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14406" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14406">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong> &raquo; Thu May 08, 2014 7:31 pm </p>

			

			<div class="content">~<br />Can you please test a small sample with out flower. I am also unclear with your post is Untz working just not the *getlength*</div>

			<div id="sig14406" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><a href="http://www.ezraanderson.com" class="postlink">My Website</a> | <a href="https://www.facebook.com/ezraanderson1979" class="postlink">My Facebook</a> | <a href="https://twitter.com/ezraanderson79" class="postlink">My Twitter</a> | <a href="https://itunes.apple.com/us/artist/ezra-anderson/id477619040" class="postlink">My Games on Itunes</a> | <a href="https://play.google.com/store/apps/developer?id=Ezra+Anderson" class="postlink">My Games on Android</a></div>

		</div>

		
			<dl class="postprofile" id="profile14406">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1051</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14407" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14407">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Thu May 08, 2014 10:04 pm </p>

			

			<div class="content">There was a change in 1.5 that changes how interface tables work for userobjects. From memory, it used to be that the interface table was the table that that contained the interface functions, but now it is the metatable. It could be there where your problem lies.  What does a debug dump of  self.__index give at that point? Does the table contain your function?<br /><br />It might pay to look at the latest flower library on github to see how it wraps native moai items and ensure you follow the same pattern.<br /><br />One thing that might help is not bothering with __index in that call chain and if you haven't updated your flower library for a while you need the new implementation of function class:__object_factory()</div>

			

		</div>

		
			<dl class="postprofile" id="profile14407">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 658</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14408" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14408">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Coguelin</strong> &raquo; Fri May 09, 2014 11:32 am </p>

			

			<div class="content">Okay, the __moai_class table dumps are identical but there is a discrepancy between the OSX and iOS dumps of the __index table and I'm not sure why that might be : They're both referring to the same flower.lua file, I checked several times.<br /><br />iOS __index table dump :<br />{<br />  isLooping = &quot;function: 0x7a04b0&quot;,<br />  moveAttr = &quot;function: 0x7a05d0&quot;,<br />  scheduleUpdate = &quot;function: 0x7a0390&quot;,<br />  getLength = &quot;function: 0x7a0430&quot;,<br />  getListener = &quot;function: 0x7a01c0&quot;,<br />  setLooping = &quot;function: 0x7a0710&quot;,<br />  seekAttr = &quot;function: 0x7a03b0&quot;,<br />  setAttr = &quot;function: 0x7a03d0&quot;,<br />  forceUpdate = &quot;function: 0x7a0570&quot;,<br />  getClassName = &quot;function: 0x7a0140&quot;,<br />  getPosition = &quot;function: 0x7a0450&quot;,<br />  getClass = &quot;function: 0x7a0160&quot;,<br />  load = &quot;function: 0x7a0610&quot;,<br />  isPaused = &quot;function: 0x7a04f0&quot;,<br />  getVolume = &quot;function: 0x7a0470&quot;,<br />  setFinalizer = &quot;function: 0x7a0180&quot;,<br />  stop = &quot;function: 0x7a0810&quot;,<br />  setVolume = &quot;function: 0x7a07d0&quot;,<br />  setPosition = &quot;function: 0x7a0790&quot;,<br />  setLoopPoints = &quot;function: 0x7a0750&quot;,<br />  __index = &lt;cycle&gt;,<br />  seekVolume = &quot;function: 0x7a06d0&quot;,<br />  unpin = &quot;function: 0x7a0370&quot;,<br />  play = &quot;function: 0x7a0690&quot;,<br />  clearAttrLink = &quot;function: 0x7a0200&quot;,<br />  moveVolume = &quot;function: 0x7a0630&quot;,<br />  setNodeLink = &quot;function: 0x7a0410&quot;,<br />  getRefTable = &quot;function: 0x7a0230&quot;,<br />  getAttr = &quot;function: 0x7a0590&quot;,<br />  getAttrLink = &quot;function: 0x7a05b0&quot;,<br />  setInterface = &quot;function: 0x7a01a0&quot;,<br />  setAttrLink = &quot;function: 0x7a03f0&quot;,<br />  setListener = &quot;function: 0x7a01e0&quot;,<br />  setMembers = &quot;function: 0x7a0350&quot;,<br />  isPlaying = &quot;function: 0x7a0530&quot;,<br />  pin = &quot;function: 0x7a0250&quot;,<br />  pause = &quot;function: 0x7a0670&quot;,<br />  clearNodeLink = &quot;function: 0x7a0550&quot;<br />}<br />true<br /><br />OSX __index table dump :<br />{<br />  __tostring = &quot;function: 0xe624550&quot;,<br />  __newindex = &lt;cycle&gt;,<br />  timer = &quot;0xe62471c &lt;MOAITimer&gt;&quot;,<br />  __gc = &quot;function: 0xe624120&quot;,<br />  __index = &lt;cycle&gt;,<br />  __class = {<br />    path = &quot;function: 0x660420&quot;,<br />    __super = {<br />      getInterfaceTable = &quot;function: 0x1254f80&quot;,<br />      getClassName = &quot;function: 0x1254f20&quot;,<br />      extend = &quot;function: 0x1254b10&quot;,<br />      EVENT_UPDATE = 0,<br />      ATTR_VOLUME = 524288,<br />      new = &quot;function: 0x1254f60&quot;<br />    },<br />    ATTR_VOLUME = 524288,<br />    getInterfaceTable = &quot;function: 0x1254f80&quot;,<br />    __new = &quot;function: 0x641980&quot;,<br />    __index = {<br />      isPaused = &quot;function: 0x1254c20&quot;,<br />      getVolume = &quot;function: 0x1254ba0&quot;,<br />      stop = &quot;function: 0x1254ee0&quot;,<br />      setNodeLink = &quot;function: 0x1254d40&quot;,<br />      setLoopPoints = &quot;function: 0x1254e20&quot;,<br />      setVolume = &quot;function: 0x1254ea0&quot;,<br />      setPosition = &quot;function: 0x1254e60&quot;,<br />      moveAttr = &quot;function: 0x123ea30&quot;,<br />      scheduleUpdate = &quot;function: 0x123ea50&quot;,<br />      setAttrLink = &quot;function: 0x12540a0&quot;,<br />      setLooping = &quot;function: 0x1254de0&quot;,<br />      seekVolume = &quot;function: 0x1254da0&quot;,<br />      play = &quot;function: 0x1254d20&quot;,<br />      pause = &quot;function: 0x1254d00&quot;,<br />      getListener = &quot;function: 0x12540d0&quot;,<br />      isLooping = &quot;function: 0x1254be0&quot;,<br />      getAttrLink = &quot;function: 0x123a930&quot;,<br />      isPlaying = &quot;function: 0x1254c60&quot;,<br />      clearNodeLink = &quot;function: 0x123b3c0&quot;,<br />      moveVolume = &quot;function: 0x1254cc0&quot;,<br />      seekAttr = &quot;function: 0x1254060&quot;,<br />      clearAttrLink = &quot;function: 0x123a620&quot;,<br />      getLength = &quot;function: 0x1254d60&quot;,<br />      setAttr = &quot;function: 0x1254080&quot;,<br />      setInterface = &quot;function: 0x123e9f0&quot;,<br />      getAttr = &quot;function: 0x123a910&quot;,<br />      forceUpdate = &quot;function: 0x1254110&quot;,<br />      getClassName = &quot;function: 0x123ea10&quot;,<br />      getPosition = &quot;function: 0x1254b80&quot;,<br />      getClass = &quot;function: 0x123e9d0&quot;,<br />      load = &quot;function: 0x1254ca0&quot;,<br />      setListener = &quot;function: 0x12540f0&quot;<br />    },<br />    __call = &quot;function: 0x660700&quot;,<br />    loadAndPlay = &quot;function: 0x6604a0&quot;,<br />    init = &quot;function: 0x660720&quot;,<br />    __object_factory = &quot;function: 0x641960&quot;,<br />    EVENT_UPDATE = 0,<br />    __moai_class = {<br />      getInterfaceTable = &quot;function: 0x1254f80&quot;,<br />      getClassName = &quot;function: 0x1254f20&quot;,<br />      extend = &quot;function: 0x1254b10&quot;,<br />      EVENT_UPDATE = 0,<br />      ATTR_VOLUME = 524288,<br />      new = &quot;function: 0x1254f60&quot;<br />    },<br />    getSoundLength = &quot;function: 0x660820&quot;,<br />    getClassName = &quot;function: 0x1254f20&quot;,<br />    extend = &quot;function: 0x1254b10&quot;,<br />    loadFile = &quot;function: 0x660460&quot;,<br />    play = &quot;function: 0x6604c0&quot;,<br />    new = &quot;function: 0x1254f60&quot;<br />  }<br />}<br />true<br /><br />It looks for all the world like the OSX dump of __index returns my Sound class, whereas the iOS dump returns the flower class of MOAIUntzSound (this based purely on the functions that I can see in the table).<br /><br />The Sound class appears to wrap MOAI items exactly like the current Flower library does (v2.1.2, in case I'm making an even dumber mistake than I thought). I've added it below in case you spot a glaring error.<br /><br />I'm not entirely sure what you mean regarding leaving __index out altogether and needing __object_factory.  As far as I can tell, __object_factory is called when I instantiate a Sound class.<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> flower <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">require</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;flower&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> config <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">require</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;config&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> pretty <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">require</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;pl.pretty&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> runOnce</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">do</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> _obj_0 <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">require</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;utils.async&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; runOnce <span style="color: #66cc66;">=</span> _obj_0<span style="color: #66cc66;">.</span>runOnce</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> Sound <span style="color: #66cc66;">=</span> flower<span style="color: #66cc66;">.</span>class<span style="color: #66cc66;">&#40;</span>MOAIUntzSound<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__index <span style="color: #66cc66;">=</span> MOAIUntzSound<span style="color: #66cc66;">.</span>getInterfaceTable<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__moai_class <span style="color: #66cc66;">=</span> MOAIUntzSound</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>init <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; self<span style="color: #66cc66;">.</span>timer <span style="color: #66cc66;">=</span> MOAITimer<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>path <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>filename<span style="color: #66cc66;">,</span> extension<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> extension <span style="color: #66cc66;">==</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; extension <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;ogg&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>config<span style="color: #66cc66;">.</span>ROOT_PATH<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;/snd-ogg/&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>filename<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;.&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #0000aa;">tostring</span><span style="color: #66cc66;">&#40;</span>extension<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>loadFile <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">,</span> filename<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; self<span style="color: #66cc66;">.</span>timer<span style="color: #66cc66;">:</span>stop<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">:</span>load<span style="color: #66cc66;">&#40;</span>Sound<span style="color: #66cc66;">.</span>path<span style="color: #66cc66;">&#40;</span>filename<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>loadAndPlay <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">,</span> filename<span style="color: #66cc66;">,</span> volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> volume <span style="color: #66cc66;">==</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; volume <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.7</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; self<span style="color: #66cc66;">:</span>loadFile<span style="color: #66cc66;">&#40;</span>filename<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; self<span style="color: #66cc66;">:</span>setVolume<span style="color: #66cc66;">&#40;</span>volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">:</span>play<span style="color: #66cc66;">&#40;</span>volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>play <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">,</span> volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> volume <span style="color: #66cc66;">==</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; volume <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.7</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">type</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;string&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> filename <span style="color: #66cc66;">=</span> self</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> _with_0 <span style="color: #66cc66;">=</span> Sound<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; _with_0<span style="color: #66cc66;">:</span>loadFile<span style="color: #66cc66;">&#40;</span>filename<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; self <span style="color: #66cc66;">=</span> _with_0</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">:</span>play<span style="color: #66cc66;">&#40;</span>volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">else</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; self<span style="color: #66cc66;">:</span>setVolume<span style="color: #66cc66;">&#40;</span>volume<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; Sound<span style="color: #66cc66;">.</span>__index<span style="color: #66cc66;">.</span>play<span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">do</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> _with_0 <span style="color: #66cc66;">=</span> self<span style="color: #66cc66;">.</span>timer</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; _with_0<span style="color: #66cc66;">:</span>stop<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; _with_0<span style="color: #66cc66;">:</span>setSpan<span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">:</span>getSoundLength<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; _with_0<span style="color: #66cc66;">:</span>start<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; runOnce<span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">.</span>timer<span style="color: #66cc66;">,</span> MOAITimer<span style="color: #66cc66;">.</span>EVENT_STOP<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">:</span>load<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">.</span>timer</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>getSoundLength <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span><span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> self<span style="color: #66cc66;">.</span>__index<span style="color: #66cc66;">.</span>getLength<span style="color: #66cc66;">&#40;</span>self<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">return</span> Sound</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>

			

		</div>

		
			<dl class="postprofile" id="profile14408">
			<dt>
				<strong>Coguelin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Thu May 08, 2014 12:01 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14409" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14409">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>makotok1123</strong> &raquo; Fri May 09, 2014 2:54 pm </p>

			

			<div class="content">MOAIClass shall not inherit directly.<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> Sound <span style="color: #66cc66;">=</span> flower<span style="color: #66cc66;">.</span>class<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__index <span style="color: #66cc66;">=</span> MOAIUntzSound<span style="color: #66cc66;">.</span>getInterfaceTable<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Sound<span style="color: #66cc66;">.</span>__moai_class <span style="color: #66cc66;">=</span> MOAIUntzSound</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--How to use</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> sound <span style="color: #66cc66;">=</span> Sound<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;length:&quot;</span> <span style="color: #66cc66;">..</span> sound<span style="color: #66cc66;">:</span>getLength<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>

			

		</div>

		
			<dl class="postprofile" id="profile14409">
			<dt>
				<strong>makotok1123</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 244</dd><dd><strong>Joined:</strong> Fri Jan 06, 2012 6:31 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14410" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14410">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Fri May 09, 2014 2:56 pm </p>

			

			<div class="content">hrm, the ios __index table looks correct. The OSX index table looks like the root Sound object not the __index table.<br /><br />Can we get the full stack trace for the error you are getting. If you are not getting the full trace, try adding &quot;MOAISim.setTraceback(function() end)&quot; to start of main.lua to enable stack traces.</div>

			

		</div>

		
			<dl class="postprofile" id="profile14410">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 658</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14411" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14411">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Fri May 09, 2014 3:07 pm </p>

			

			<div class="content">also, does using MOAIUntzSound directly work when calling getLength on your sound in ios? eg<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> s <span style="color: #66cc66;">=</span> MOAIUntzSound<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">s<span style="color: #66cc66;">:</span>load<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;wavefile.wav&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span>s<span style="color: #66cc66;">:</span>getLength<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>

			

		</div>

		
			<dl class="postprofile" id="profile14411">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 658</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14511" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14511">Re: MOAIUntzSound not work since version update : Madness En</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Coguelin</strong> &raquo; Tue May 20, 2014 2:36 pm </p>

			

			<div class="content">Alright,<br /><br />Apologies for the hiatus : I was on holiday and far away from all things electronic.<br /><br />We have however solved the problem (which is to say, a friend of our Lead Designer came by and patiently went through the code with me) : my predecessor used .ogg files, which in turns means he was using the vorbis library... and we were missing a MOAI_WITH_VORBIS definition in XCode's iOS preprocessor macros whereas the OSX build presumably didn't.<br /><br />Having added MOAI_WITH_VORBIS we now have sound running fine on both iOS and OSX, but the __index table dumps are actually still different.  I reshuffled a bit of code, I now refer to Sound.__index rather than self:__index since that got me table dumps that looked similar in both iOS and OSX, and the result is this :<br /><br />iOS :<br />__index = &lt;cycle&gt;,<br />clearAttrLink = &quot;function: 0x7adbd0&quot;,<br />clearNodeLink = &quot;function: 0x7adf20&quot;<br />forceUpdate = &quot;function: 0x7adf40&quot;,<br />getAttr = &quot;function: 0x7adf60&quot;,<br />getAttrLink = &quot;function: 0x7adf80&quot;,<br />getClass = &quot;function: 0x7adb30&quot;,<br />getClassName = &quot;function: 0x7adb10&quot;,<br />getLength = &quot;function: 0x7ade00&quot;,<br />getListener = &quot;function: 0x7adb90&quot;,<br />getPosition = &quot;function: 0x7ade20&quot;,<br />getRefTable = &quot;function: 0x7adc00&quot;,<br />getVolume = &quot;function: 0x7ade40&quot;,<br />isLooping = &quot;function: 0x7ade80&quot;,<br />isPaused = &quot;function: 0x7adec0&quot;,<br />isPlaying = &quot;function: 0x7adf00&quot;,<br />load = &quot;function: 0x7adfe0&quot;,<br />moveAttr = &quot;function: 0x7adfa0&quot;,<br />moveVolume = &quot;function: 0x7ae000&quot;,<br />pause = &quot;function: 0x7ae040&quot;,<br />pin = &quot;function: 0x7adc20&quot;,<br />play = &quot;function: 0x7ae060&quot;,<br />scheduleUpdate = &quot;function: 0x7add60&quot;,<br />seekAttr = &quot;function: 0x7add80&quot;,<br />seekVolume = &quot;function: 0x7ae0a0&quot;,<br />setAttr = &quot;function: 0x7adda0&quot;,<br />setAttrLink = &quot;function: 0x7addc0&quot;,<br />setFinalizer = &quot;function: 0x7adb50&quot;,<br />setInterface = &quot;function: 0x7adb70&quot;,<br />setListener = &quot;function: 0x7adbb0&quot;,<br />setLooping = &quot;function: 0x7ae0e0&quot;,<br />setLoopPoints = &quot;function: 0x7ae120&quot;,<br />setMembers = &quot;function: 0x7add20&quot;,<br />setNodeLink = &quot;function: 0x7adde0&quot;,<br />setPosition = &quot;function: 0x7ae160&quot;,<br />setVolume = &quot;function: 0x7ae1a0&quot;,<br />stop = &quot;function: 0x7ae1e0&quot;,<br />unpin = &quot;function: 0x7add40&quot;,<br /><br />OSX :<br />  clearAttrLink = &quot;function: 0x1448b20&quot;,<br />  clearNodeLink = &quot;function: 0x14498c0&quot;,<br />  forceUpdate = &quot;function: 0x1462610&quot;,<br />  getAttr = &quot;function: 0x1448e10&quot;,<br />  getAttrLink = &quot;function: 0x1448e30&quot;,<br />  getClass = &quot;function: 0x144ced0&quot;,<br />  getClassName = &quot;function: 0x144cf10&quot;,<br />  getLength = &quot;function: 0x1463260&quot;,<br />  getListener = &quot;function: 0x14625d0&quot;,<br />  getPosition = &quot;function: 0x1463080&quot;,<br />  getVolume = &quot;function: 0x14630a0&quot;,<br />  isLooping = &quot;function: 0x14630e0&quot;,<br />  isPaused = &quot;function: 0x1463120&quot;,<br />  isPlaying = &quot;function: 0x1463160&quot;,<br />  load = &quot;function: 0x14631a0&quot;,<br />  moveAttr = &quot;function: 0x144cf30&quot;,<br />  moveVolume = &quot;function: 0x14631c0&quot;,<br />  pause = &quot;function: 0x1463200&quot;,<br />  play = &quot;function: 0x1463220&quot;,<br />  scheduleUpdate = &quot;function: 0x144cf50&quot;,<br />  seekAttr = &quot;function: 0x1462560&quot;,<br />  seekVolume = &quot;function: 0x14632a0&quot;,<br />  setAttr = &quot;function: 0x1462580&quot;,<br />  setAttrLink = &quot;function: 0x14625a0&quot;,<br />  setInterface = &quot;function: 0x144cef0&quot;,<br />  setListener = &quot;function: 0x14625f0&quot;<br />  setLooping = &quot;function: 0x14632e0&quot;,<br />  setLoopPoints = &quot;function: 0x1463320&quot;,<br />  setNodeLink = &quot;function: 0x1463240&quot;,<br />  setPosition = &quot;function: 0x1463360&quot;,<br />  setVolume = &quot;function: 0x14633a0&quot;,<br />  stop = &quot;function: 0x14633e0&quot;,<br /><br />Using MOAIUntzSound directly did not appear to make any difference when calling getLength (to be clear, the difference is between calling Sound.getLength and MOAIUntzSound.getLength, I've cut __index out of the equation).<br /><br />I do have another issue, though (it isn't new, but I was hoping updating the MOAI version would magically fix it) :<br />If the devices receives a call or brings up Siri while playing the game, there is absolutely no sound when they return to the game... they then need to shut the application down and restart it to get sound back.<br /><br />It's not the end of the world, but little things will be the death of you if you let them.</div>

			

		</div>

		
			<dl class="postprofile" id="profile14511">
			<dt>
				<strong>Coguelin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Thu May 08, 2014 12:01 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			8 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../apple-f18.html" class="left-box left" accesskey="r">Return to Apple</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18" selected="selected">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.077s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>