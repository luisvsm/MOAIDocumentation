<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - Building for Raspberry Pi: curl config issue?</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Building for Raspberry Pi: curl config issue?</h2>
		<p><a href="building-for-raspberry-pi-curl-config-issue-t1228/index.html">/forums/building-for-raspberry-pi-curl-config-issue-t1228/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Building for Raspberry Pi: curl config issue?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 20, 2012 6:58 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Hi!<br /><br />I've tried this with both the 'linux' branch on mainline moai-dev, as well as on spacepluk's fork, and gotten the same result.  I am trying to build MOAI for debian-wheezy on Raspberry Pi, where I think MOAI would be an awesome tool to add to the resources for Raspberry Pi fun (and profit).<br /><br />Here's how far I got:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=1228&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Scanning dependencies of target curl</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&amp;#<span style="">91</span>; <span style="">61</span>%&amp;#<span style="">93</span>; Building C object libcurl/CMakeFiles/curl.dir/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/lib/amigaos.c.o</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&amp;#<span style="">91</span>; <span style="">61</span>%&amp;#<span style="">93</span>; Building C object libcurl/CMakeFiles/curl.dir/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/lib/base64.c.o</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">In file included from /home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/lib/setup.h:<span style="">82</span>:<span style="">0</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/lib/base64.c:<span style="">35</span>:</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/include/curl/curlrules.h:<span style="">80</span>:<span style="">4</span>: error: #error &quot;CURL_SIZEOF_LONG definition is missing!&quot;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/include/curl/curlrules.h:<span style="">81</span>:<span style="">4</span>: error: unknown type name ‘Error’</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/include/curl/curlrules.h:<span style="">95</span>:<span style="">4</span>: error: #error &quot;CURL_TYPEOF_CURL_OFF_T definition is missing!&quot;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">/home/pi/hak/moai-dev.spacepluk/3rdparty/curl-7.19.7/include/curl/curlrules.h:<span style="">96</span>:<span style="">4</span>: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘Error’</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />.. and so on.<br /><br />Does anyone have any clue how to get past this point?  It seems to me that there is something not quite configured right with libcurl - but I seem to recall some of you guys have already solved this issue with Linux builds, somehow.  Got a clue for me?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Building for Raspberry Pi: curl config issue?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Sep 21, 2012 3:57 am</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content">CURL_SIZEOF_LONG is not defined. Just find the find where all that constants are defined (it should be lib/setup.h) and define it to the size of long on Raspbery Pi</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Building for Raspberry Pi: curl config issue?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Sep 21, 2012 6:55 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Okay, documenting this for future RaspberryPi builders. I switched to spacepluks' branch, thus:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=1228&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">$ git clone git://github.com/spacepluk/moai-dev.git</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">$ git checkout b0714f48933558048bc655a16ecf5640a122d6d5</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />Also, on debian-wheezy for rPi, libcurl3 is installed, alongside libcurl4-openssl-dev.  For some reason, this -dev package doesn't define the CURL constants (as above) that are required for a MOAI host build natively (not cross-compiling) on Debian-Wheezy for rPi (note: using onboard compiler/dev tools, no cross-compiling required with rPi.  Slow, but totally functional.)<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=1228&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;sudo apt-get install libcurl3-gnutls-dev</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />This fixes the problem as reported above, and we get quite far, crashing and burning thus:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=1228&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&amp;#<span style="">91</span>; <span style="">99</span>%&amp;#<span style="">93</span>; Built target aku</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Linking CXX executable gluthost</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">../moaicore/libmoaicore.a<span class="br0">&#40;</span>moaicore.cpp.o<span class="br0">&#41;</span>: In function `moaicore::SystemFinalize<span class="br0">&#40;</span><span class="br0">&#41;</span>':</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x258<span class="br0">&#41;</span>: undefined reference to `ENGINE_cleanup'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x260<span class="br0">&#41;</span>: undefined reference to `CONF_modules_unload'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x264<span class="br0">&#41;</span>: undefined reference to `ERR_free_strings'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x268<span class="br0">&#41;</span>: undefined reference to `EVP_cleanup'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x26c<span class="br0">&#41;</span>: undefined reference to `CRYPTO_cleanup_all_ex_data'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">../moaicore/libmoaicore.a<span class="br0">&#40;</span>moaicore.cpp.o<span class="br0">&#41;</span>: In function `moaicore::SystemInit<span class="br0">&#40;</span><span class="br0">&#41;</span>':</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x29c<span class="br0">&#41;</span>: undefined reference to `SSL_load_error_strings'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">moaicore.cpp:<span class="br0">&#40;</span>.text+0x2a0<span class="br0">&#41;</span>: undefined reference to `SSL_library_init'</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">collect2: ld returned <span style="">1</span> exit status</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">make&amp;#<span style="">91</span>;<span style="">2</span>&amp;#<span style="">93</span>;: *** &amp;#<span style="">91</span>;src/hosts/gluthost&amp;#<span style="">93</span>; Error <span style="">1</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">make&amp;#<span style="">91</span>;<span style="">1</span>&amp;#<span style="">93</span>;: *** &amp;#<span style="">91</span>;src/hosts/CMakeFiles/gluthost.dir/all&amp;#<span style="">93</span>; Error <span style="">2</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">make: *** &amp;#<span style="">91</span>;all&amp;#<span style="">93</span>; Error <span style="">2</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />For this problem, I will need to dig a little deeper and try to understand why it (seemingly) cannot link with ssl - either the one built during the MOAI host process, or my local, on-board version.<br /><br />Anyway, just documenting progress: it would be very sweet indeed to have a MOAI host running on my raspberryPi, considering that the machine is hooked up to a TV and makes for very fun demo's when it works.  Plus, building MOAI onboard is just plain cool ..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Building for Raspberry Pi: curl config issue?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sat Sep 22, 2012 12:25 am</strong></div>
				<div class="author">by <strong>todd</strong></div>
				<div class="content">This is cool. I'll see if we can get a Raspberry Pi for the office.  <img src="images/smilies/icon_e_biggrin.gif" alt=":D" title="Very Happy" /></div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>