<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - Android 1.5 back button crash on 4.4</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Android" href="../feed.php%3Ff=17.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Android 1.5 back button crash on 4.4" href="../feed.php%3Ff=17&amp;t=2561.html" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/android-1-5-back-button-crash-on-4-4-t2561/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../platform-specifics-f12.html">Platform Specifics</a> <strong>&#8249;</strong> <a href="../android-f17.html">Android</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="../memberlist.php%3Fmode=email&amp;t=2561.html" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="../viewtopic.php%3Ff=17&amp;t=2561&amp;start=0&amp;view=print.html" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">Android 1.5 back button crash on 4.4</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Tablets / Phones / Consoles / Ouya<br /></div>
	<p>
		
			<strong>Moderator:</strong> ezraanderson
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			9 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p13514" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p13514">Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Wed Mar 05, 2014 5:09 pm </p>

			

			<div class="content">Has anyone else tested MOAI 1.5 on Android Kit Kat? I'm getting a crash when pressing the back button to close the app. I haven't set up a function to handle the back button, but in previous versions the app would close fine. I only have a Nexus 5 to test this on but I assume it happens on other phones as well if it isn't some build issue. It works fine on older Android versions for me.<br /><br />I built against android sdk version 10.</div>

			

		</div>

		
			<dl class="postprofile" id="profile13514">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13528" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13528">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Fri Mar 07, 2014 4:27 am </p>

			

			<div class="content">Doing some investigation, here's an error from adb logcat<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="java" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; Force finishing activity com.<span style="color: #006633;">getmoai</span>.<span style="color: #006633;">samples</span><span style="color: #339933;">/</span>.<span style="color: #006633;">MoaiActivity</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>InputDispatcher<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> channel <span style="color: #0000ff;">'661d8108 com.getmoai.samples/com.getmoai.samples.MoaiActivity (server)'</span> ~ Consumer closed input channel or an error occurred. &nbsp;<span style="color: #006633;">events</span><span style="color: #339933;">=</span>0xd</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">E<span style="color: #339933;">/</span>InputDispatcher<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> channel <span style="color: #0000ff;">'661d8108 com.getmoai.samples/com.getmoai.samples.MoaiActivity (server)'</span> ~ Channel is unrecoverably broken and will be disposed<span style="color: #339933;">!</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>InputDispatcher<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> Attempted to unregister already unregistered input channel <span style="color: #0000ff;">'661d8108 com.getmoai.samples/com.getmoai.samples.MoaiActivity (server)'</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I<span style="color: #339933;">/</span>WindowState<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> WIN DEATH<span style="color: #339933;">:</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Awindow+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">Window</span></a><span style="color: #009900;">&#123;</span>661d8108 u0 com.<span style="color: #006633;">getmoai</span>.<span style="color: #006633;">samples</span><span style="color: #339933;">/</span>com.<span style="color: #006633;">getmoai</span>.<span style="color: #006633;">samples</span>.<span style="color: #006633;">MoaiActivity</span><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I<span style="color: #339933;">/</span>WindowState<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> WIN DEATH<span style="color: #339933;">:</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Awindow+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">Window</span></a><span style="color: #009900;">&#123;</span>661f43c8 u0 SurfaceView<span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I<span style="color: #339933;">/</span>art &nbsp; &nbsp; <span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">181</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aprocess+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">Process</span></a> <span style="color: #cc66cc;">19464</span> terminated by signal <span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">6</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Aexception+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">Exception</span></a> thrown during pause</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> android.<span style="color: #006633;">os</span>.<span style="color: #006633;">DeadObjectException</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at android.<span style="color: #006633;">os</span>.<span style="color: #006633;">BinderProxy</span>.<span style="color: #006633;">transact</span><span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">Native</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Amethod+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">Method</span></a><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at android.<span style="color: #006633;">app</span>.<span style="color: #006633;">ApplicationThreadProxy</span>.<span style="color: #006633;">schedulePauseActivity</span><span style="color: #009900;">&#40;</span>ApplicationThreadNative.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">660</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityStack</span>.<span style="color: #006633;">startPausingLocked</span><span style="color: #009900;">&#40;</span>ActivityStack.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">761</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityStack</span>.<span style="color: #006633;">finishActivityLocked</span><span style="color: #009900;">&#40;</span>ActivityStack.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">2455</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityStack</span>.<span style="color: #006633;">finishTopRunningActivityLocked</span><span style="color: #009900;">&#40;</span>ActivityStack.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">2329</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityStackSupervisor</span>.<span style="color: #006633;">finishTopRunningActivityLocked</span><span style="color: #009900;">&#40;</span>ActivityStackSupervisor.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">2035</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityManagerService</span>.<span style="color: #006633;">handleAppCrashLocked</span><span style="color: #009900;">&#40;</span>ActivityManagerService.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">9543</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityManagerService</span>.<span style="color: #006633;">makeAppCrashingLocked</span><span style="color: #009900;">&#40;</span>ActivityManagerService.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">9436</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityManagerService</span>.<span style="color: #006633;">crashApplication</span><span style="color: #009900;">&#40;</span>ActivityManagerService.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">10081</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">ActivityManagerService</span>.<span style="color: #006633;">handleApplicationCrashInner</span><span style="color: #009900;">&#40;</span>ActivityManagerService.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">9632</span><span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W<span style="color: #339933;">/</span>ActivityManager<span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #cc66cc;">757</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; at com.<span style="color: #006633;">android</span>.<span style="color: #006633;">server</span>.<span style="color: #006633;">am</span>.<span style="color: #006633;">NativeCrashListener</span>$NativeCrashReporter.<span style="color: #006633;">run</span><span style="color: #009900;">&#40;</span>NativeCrashListener.<span style="color: #006633;">java</span><span style="color: #339933;">:</span><span style="color: #cc66cc;">86</span><span style="color: #009900;">&#41;</span></div></li><br /></ol></code></dd></dl><br /><br />Another thought, it could be related to me using the art runtime instead of dalvik.</div>

			

		</div>

		
			<dl class="postprofile" id="profile13528">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13532" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13532">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Fri Mar 07, 2014 3:58 pm </p>

			

			<div class="content">I found a &quot;fix&quot;<br /><br />MOAIAppAndroid.setListener(MOAIAppAndroid.BACK_BUTTON_PRESSED, function() os.exit() return true end)<br /><br />Only difference is that the screen goes black for a very short period because of the os.exi, but that's only on exit so it's not a big deal.<br /><br />*Edit: Apparently it's not fixed completely yet with this. For some reason when I attach a different function to the listener and call it in a different gamestate I get the same error.<br /><br />*Edit2: The only reason the os.exit() works is because it stops the entire program before it can finish the rest of the back button code I guess. That's why it doesn't work in my other game states, those don't use os.exit(). So the error is definitely related to the back button event, has to be something in the way moai handles it and/or 4.4 (with art). Should probably test to see if it happens with the dalvik runtime before continuing. MOAI 1.3 worked fine.</div>

			

		</div>

		
			<dl class="postprofile" id="profile13532">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13533" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13533">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ezraanderson</strong> &raquo; Fri Mar 07, 2014 7:10 pm </p>

			

			<div class="content">~<br />Edit the flowing to see if its working<br /><ul><li> <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/1.5-stable/ant/host-source/source/project/src/moai/LinearLayoutIMETrap.java">https://github.com/moai/moai-dev/blob/1 ... ETrap.java</a><!-- m --></li></ul>lines:61<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="java" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span> Moai.<span style="color: #006633;">backButtonPressed</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; Log.<span style="color: #006633;">v</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;EGL&quot;</span>, <span style="color: #0000ff;">&quot;back button pressed&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//IS THIS BEING PRINTED TO LOGCAT</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">true</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>

			<div id="sig13533" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><!-- m --><a class="postlink" href="http://www.dead-dark.com">http://www.dead-dark.com</a><!-- m --><br /><!-- w --><a class="postlink" href="http://www.ezraanderson.com">www.ezraanderson.com</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile13533">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong>ezraanderson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 995</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13534" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13534">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Fri Mar 07, 2014 7:32 pm </p>

			

			<div class="content">Well the back buttong prints were definitely being printend in logcat, I saw the events for down and up.<br /><br />In the mean time I found a temporary fix.. I'm really not sure why this works or what kind of effects it has, but it works on both my devices.<br /><br />I commented out the the following function in LinearLayoutIMETrap.java<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">public boolean dispatchKeyEventPreIme <span class="br0">&#40;</span> KeyEvent event <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><br /></ol></code></dd></dl><br /><br />In my main menu I setup a handler for back button:<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIAppAndroid.setListener<span class="br0">&#40;</span>MOAIAppAndroid.BACK_BUTTON_PRESSED, function<span class="br0">&#40;</span><span class="br0">&#41;</span> os.exit<span class="br0">&#40;</span><span class="br0">&#41;</span> return true end<span class="br0">&#41;</span></div></li><br /></ol></code></dd></dl><br /><br />And in my other game states I make it change gamestates. It doesn't crash anymore and closes now, but I'm sure killing the app like this is not good practice?<br /><br />The error definitely has to do with that function though.</div>

			

		</div>

		
			<dl class="postprofile" id="profile13534">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13615" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13615">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Sat Mar 15, 2014 3:07 am </p>

			

			<div class="content"><!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/pull/859">https://github.com/moai/moai-dev/pull/859</a><!-- m --><br /><br />I think this might be the problem. It happens on dalvik too, just not as loudly.<br />Could you give this a go and let us people on 4.1 or earlier know?</div>

			

		</div>

		
			<dl class="postprofile" id="profile13615">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 579</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13627" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13627">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Sun Mar 16, 2014 12:09 pm </p>

			

			<div class="content">Sorry I haven't been able to do much work the past 2 days but I will be testing this hopefully today. <br /><br />I have also encountered a serious battery draining bug with moai that happens on both kitkat and older versions when you minimize the app instead of closing it. Only kitkat seems to accurately show it in the battery usage stats, on older versions the batter usage % of the app doesn't go up but it is the one causing it. The app is consuming a lot of cpu time when minimized. <br /><br />Now this could be related to me commentating out the java function dispatchKeyEventPreIme. I am running a test with an old 1.3 moai build now. I hope it is because I don't remember seeing this before.<br /><br />*Edit; It doesn't seem to happen on 1.3, building a new 1.5 for Android now to see if back button is fixed.<br /><br />*Edit 2: Back button crash seems fixed, very nice! Hopefully the battery drain is gone too.<br /><br />*Edit 3: Back button behavior seems different, it's calling the back button pressed function on action_down, should be action_up I think?</div>

			

		</div>

		
			<dl class="postprofile" id="profile13627">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13630" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13630">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Sun Mar 16, 2014 2:27 pm </p>

			

			<div class="content">Fixed the weird back button behavior. For some reason the custom back button function was being called in moaiactivity.java and lienarlayoutimetrap.java<br /><br />My changes:<br /><br />Changed thisfunction in MoaiActivity.java<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="java" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//----------------------------------------------------------------//</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">boolean</span> onKeyDown <span style="color: #009900;">&#40;</span> <span style="color: #000066; font-weight: bold;">int</span> keyCode, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Akeyevent+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">KeyEvent</span></a> event <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MoaiLog.<span style="color: #006633;">i</span> <span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;MoaiActivity onKeyDown, keycode &quot;</span> <span style="color: #339933;">+</span> keyCode <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot; event: &quot;</span> <span style="color: #339933;">+</span> event <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">/*</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( keyCode == KeyEvent.KEYCODE_BACK ) {</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( Moai.backButtonPressed ()) {</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return true;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; */</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000000; font-weight: bold;">super</span>.<span style="color: #006633;">onKeyDown</span> <span style="color: #009900;">&#40;</span> keyCode, event <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span></div></li><br /></ol></code></dd></dl><br /><br />Changed this if conditional in LinearLayoutIMETrap.java (function dispatchKeyEventPreIme) so it only triggers on back button up.<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="java" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span> imm.<span style="color: #006633;">isActive</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> event.<span style="color: #006633;">getKeyCode</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Akeyevent+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">KeyEvent</span></a>.<span style="color: #006633;">KEYCODE_BACK</span> <span style="color: #339933;">&amp;&amp;</span> event.<span style="color: #006633;">getAction</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Akeyevent+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span style="color: #003399;">KeyEvent</span></a>.<span style="color: #006633;">ACTION_UP</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />Once my battery is fully charged I will be testing the battery drain.<br /><br />Should this be pushed to 1.5? I've not heard anyone else complain, maybe it's just me who has problems with it? But it seems weird to be calling this from 2 places...<br /><br />*Edit: I guess this might also have been one of the causes of the back button crash? It being called twice?</div>

			
				<div class="notice">Last edited by Motig on Sun Mar 16, 2014 3:40 pm, edited 1 time in total.
					
				</div>
			

		</div>

		
			<dl class="postprofile" id="profile13630">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p13632" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p13632">Re: Android 1.5 back button crash on 4.4</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Motig</strong> &raquo; Sun Mar 16, 2014 3:38 pm </p>

			

			<div class="content">T-t-t-triple post!<br /><br />But bad news, the battery drain is still present. <br /><br />*Edit: I've created a new thread: <a href="../moai-1-5-android-battery-drain-t2576/index.html" class="postlink">/forums/moai-1-5-android-battery-drain-t2576/</a><br /><br />*Edit 2: I've also posted my solution here: <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/pull/859">https://github.com/moai/moai-dev/pull/859</a><!-- m --> <br />But it seems it might not be a correct fix.</div>

			

		</div>

		
			<dl class="postprofile" id="profile13632">
			<dt>
				<strong>Motig</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 69</dd><dd><strong>Joined:</strong> Thu Sep 05, 2013 2:55 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			9 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../android-f17.html" class="left-box left" accesskey="r">Return to Android</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17" selected="selected">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.169s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>