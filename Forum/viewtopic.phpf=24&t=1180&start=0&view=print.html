<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - Anyone successfully integrated tapjoy banner ad?</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Anyone successfully integrated tapjoy banner ad?</h2>
		<p><a href="anyone-successfully-integrated-tapjoy-banner-ad-t1180/index.html">/forums/anyone-successfully-integrated-tapjoy-banner-ad-t1180/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 06, 2012 7:39 pm</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">I've recently been trying to implement tapjoy banner ad support in my app. <br /><br />So far, I'm following the app-tapjoy sample in <a href="https://github.com/moai/moai-dev/tree/master/samples/app/app-tapjoy" class="postlink">https://github.com/moai/moai-dev/tree/master/samples/app/app-tapjoy</a>. One issue I've encountered in the process is the missing &quot;tapjoy&quot; module, as described in my previous post <a href="how-to-add-src-lua-modules-moai-lua-to-host-t1177/index.html" class="postlink">/forums/how-to-add-src-lua-modules-moai-lua-to-host-t1177/</a>.<br /><br />I've worked around the problem temporarily by copying all the modules in the &quot;src/lua-modules/moai&quot;-folder into the &quot;app-tapjoy&quot;-folder. A few tweaks later, and I'm able to run without any errors.<br /><br />I've added my brand new appId and appSecretKey provided to by Tapjoy into the tapjoy.init-call. I've uncommented the &quot;ACTIVE_EXAMPLE = &quot;getBannerAdProp&quot;&quot; so that it looks like this:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=24&amp;t=1180&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--ACTIVE_EXAMPLE = &quot;showOffersWebView&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--ACTIVE_EXAMPLE = &quot;showFeaturedAppWebView&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">ACTIVE_EXAMPLE <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;getBannerAdProp&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--ACTIVE_EXAMPLE = &quot;google&quot;</span></div></li><br /></ol></code></dd></dl><br />Long story short: the tapjoy.createPropFromBannerCallback function is successfully executed but the json passed to it from the http task is empty. Am I missing something here? All help is greatly appreciated! <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Sep 07, 2012 4:49 am</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">I guess I'd better add some background here. The first segment of the tapjoy module looks like this:<dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=24&amp;t=1180&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">if</span> MOAIWebView <span style="color: #66cc66;">==</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">error</span> <span style="color: #66cc66;">&#40;</span> <span style="color: #ff6666;">&quot;currently, tapjoy is only supported on iOS. Support for Android and other platforms coming soon.&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span> <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /></ol></code></dd></dl>I'll be honest, I'm only running this sample in the iOS sim, so it might be what's causing me trouble. But why?<br /><br />As far as the code goes, it seems to be using regular https all the way (supported by a call to crypto.evp.digest on L154, a module which seems to be all stanard C code found in 3rdparty/luacrypto-0.2.0/src/lcrypto.c, a wrapper for SSL). It seems to me that everything in the tapjoy module is non-iOS specific. My guess is that the check for MOAIWebView was not so much a check for tapjoy support, rather it was checking to see if a web page could be displayed subsequent to tapping one of the ads deliverd by tapjoy. At the moment, all I want is to get fetching of ads working, so I'll worry about the web stuff later on. Assuming crypto doesn't do anything super iOS-specific, the code should be cross platform, right?<br /><br />On the other hand, I see that the documentation describes MOAITapjoyAndroid and MOAITapjoyIOS. References to these classes is found in the source (src/moaiext-android/MOAITapjoyAndroid.cpp and src/moaiext-iphone/MOAITapjoyIOS.mm). Then again, the iOS app-tapjoy sample <a href="https://github.com/moai/moai-dev/blob/master/samples/ios/app-tapjoy/main.lua" class="postlink">https://github.com/moai/moai-dev/blob/master/samples/ios/app-tapjoy/main.lua</a> does not use the expected MOAITapjoyIOS class. It uses what I assume to be a environment sensitive wrapper MOAITapjoy (which I sadly can't locate in the source).<br /><br />Finally, based on the code in the app-tapjoy sample, I can't understand the need for bundling the tapjoy SDK, yet there is a 3rdparty/tapjoyiOS-8.1.9/ folder to be found with a number of files inside. I haven't had time to review the MOAITapjoyIOS source for my self yet, but the glaring omission of any android counterpart backs up the message in the code in the beginning of this post, namely the fact that only iOS is supported at the moment.<br /><br />I guess my question breaks down to this: is tapjoy supported in MOAI, and if so is there a working sample out there? Is it supported for iOS only, or is Anroid support also included? Do I have to run the code on an actual device to get it working? And finally, why do the tapjoy module check if MOAIWebView is in place - is it because of what I describe above? (And if so, when will Android get MOAIWebView?)<br /><br />Oh, and as anyone interested in the matter probably saw from my ohter thread <a href="how-to-add-src-lua-modules-moai-lua-to-host-t1177.html" class="postlink">/forums/how-to-add-src-lua-modules-moai-lua-to-host-t1177</a>, the problem with not being able to find the desired modules came down to a path issue in config.lua (which basically all the samples include in their run.sh/.bat).<br /><br />Thanks guys - keep up the good work! <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Sep 10, 2012 9:44 am</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">I am happy to confirm that the MOAITapjoy class is available for the Android host. So it seems my suscpicion was right regarding tapjoy not being present in the OSX host, and in the assumption that MOAITapjoyAndroid (and MOAITapjoyIOS) are wrapped into MOAITapjoy.<br /><br />I'll keep posting in this thread if I stumble over anything else (non-obvious) in my quest to implement tapjoy support.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Sep 10, 2012 5:53 pm</strong></div>
				<div class="author">by <strong>todd</strong></div>
				<div class="content">Thanks Joarb. Our original integration of Tapjoy is the offerwall only, not the banner ads. The offerwall is supported on Android though, so that comment is out of date.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Sep 11, 2012 5:49 pm</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">Sure, no problem. <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /> Is it safe to assume that banner ads will be supported in the near future? I'm not against offerwall per se, just curious (and opting to go for the easiest solution in the first place).</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 13, 2012 5:59 am</strong></div>
				<div class="author">by <strong>todd</strong></div>
				<div class="content">Let me get back to you on that. Our experience has been the Tapjoy offerwall is a more effective revenue source than banners, and also less intrusive.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Anyone successfully integrated tapjoy banner ad?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Dec 03, 2012 1:11 pm</strong></div>
				<div class="author">by <strong>lancew</strong></div>
				<div class="content">Any updates on this?</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>