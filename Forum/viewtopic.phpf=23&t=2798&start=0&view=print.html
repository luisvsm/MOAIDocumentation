<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - Midi - Position and &quot;notes in region&quot; - Untz</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Midi - Position and &quot;notes in region&quot; - Untz</h2>
		<p><a href="midi-position-and-notes-in-region-untz-t2798/index.html">/forums/midi-position-and-notes-in-region-untz-t2798/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 11, 2014 4:09 am</strong></div>
				<div class="author">by <strong>joelt</strong></div>
				<div class="content">I want to play a midi file and be able to graph the notes currently being played. What Moai API would I use to determine:<br /><br />1) current position<br />2) find the relevant notes within the midi to graph (ie. current time + time delta)?<br /><br />Is this possible and is it cross-platform (if so, which ones)? I know that specifically for FMOD they do not support any information about specific midi notes (question 2).</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 11, 2014 5:25 am</strong></div>
				<div class="author">by <strong>ezraanderson</strong></div>
				<div class="content">~<br />I don't think there is anything in Moai by default to play midi files. You could implement something in C++ yourself if you are up for the task.<br /><br /><span style="font-weight: bold">edit:</span><br /><ul><li> <!-- l --><a class="postlink-local" href="untz-can-we-change-the-sound-pitch-t1421/index.html">untz-can-we-change-the-sound-pitch-t1421/</a><!-- l --></li></ul><blockquote class="uncited"><div>I'm not using UNTZ or anything like that - I have a small synth library which generates audio, similar to something like sfxr that runs under both Android and OSX audio subsystems, and I pass parameters to it like a MIDI device - with MIDI CC #'s and so on. This synth is something I developed outside the context of MOAI - I just wanted to point out that you can do sound in the MOAI hosts, but you have to set it up yourself.</div></blockquote></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 11, 2014 12:35 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I've done this already with a prototype application I wrote a couple years ago - rendered MIDI files with MOAI.  The approach I took was to use a custom Lua parser for MIDI files (very easy), and then I used a MOAIScriptDeck to render the MIDI note data.  Depending on the size of the MIDI file, it may work for you to just generate a Prop-per-data-item, and then arrange them in relation to each other - meaning you can easily scroll through the whole song - or instead you might need to have a 'window' of MIDI events you want to look into, and then create Props from that .. <br /><br />As far as playback is concerend, my app had a real MIDI interface hooked up to it and I just rendered everything with external synths.  I did have a look at adding something like Timidity to MOAI, but decided it wasn't necessary for the prototype.<br /><br />As far as the parser is concerned, you can either add a C-based MIDI parser to MOAI pretty easily (for example, miby - see <!-- m --><a class="postlink" href="https://code.google.com/p/miby/">https://code.google.com/p/miby/</a><!-- m -->)  or just build your own simple parser in plain ol' Lua.  I'm actually quite interested in adding miby to the MOAI stack, so if you want to go that route, lets discuss it ..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Sep 18, 2014 3:53 am</strong></div>
				<div class="author">by <strong>joelt</strong></div>
				<div class="content">miby makes sense in conjunction with fmod I suppose. I understand I can play midi and get the current position in fmod. I'd just need something to find the notes to render with miby. Hopefully making the position/parsing sync up wouldn't be too bad. However, playing say a single track sounds a little more awkward, possibly means writing a file to be picked up by fmod.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Sep 19, 2014 2:08 am</strong></div>
				<div class="author">by <strong>joelt</strong></div>
				<div class="content">Maybe this could be used? I'm not sure what advantage miby has...<br /><!-- m --><a class="postlink" href="http://www.pjb.com.au/comp/lua/MIDI.html">http://www.pjb.com.au/comp/lua/MIDI.html</a><!-- m --><br /><br />I'm trying to figure out if I can control fmod to only play one track, obviously I could use this library and write a new file with just one track, but I was trying to find something as &quot;direct&quot; as possible.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Midi - Position and &quot;notes in region&quot; - Untz</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Sep 19, 2014 11:09 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content"><blockquote class="uncited"><div>Maybe this could be used? I'm not sure what advantage miby has...<br /></div></blockquote><br /><br />miby has the advantage that its a very clean C library for parsing MIDI content with a callback mechanism.  This is very easy to use from Lua.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>