<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - Facebook Integration - access tokens</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Facebook Integration - access tokens</h2>
		<p><a href="facebook-integration-access-tokens-t619/index.html">/forums/facebook-integration-access-tokens-t619/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Mar 27, 2012 10:11 pm</strong></div>
				<div class="author">by <strong>bslayerw</strong></div>
				<div class="content">I just wanted to double check I'm not missing something before I go about implementation this. It seems as though while MOAIFacebook is exposed to lua there doesn't seem to be a way to get an access token once the user is logged in. I want to use MOAIFacebook to authenticate my app then and use the access token to access FB Open Graph (these methods aren't exposed so I'm just going to use lua json for this for now).<br /><br />The following code with crash (getToken throws an Objective-C exception):<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=619&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp;MOAIFacebook<span style="color: #66cc66;">.</span>init<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;myidhere&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>DIALOG_DID_NOT_COMPLETE<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>DIALOG_DID_COMPLETE<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_LOGIN<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_NOT_LOGIN<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>login<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;Facebook token = &quot;</span><span style="color: #66cc66;">..</span> MOAIFacebook<span style="color: #66cc66;">.</span>getToken<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- BOOM</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />It doesn't seem like my listen is getting called and even if it did I'd have no way to get the access token. Unless I'm missing something I'm going to have to set a delegate in native code and store the access token in the user defaults. <br /><br />FYI, this brings up another point, it's not pressing but it would be nice to handle uncaught objective-c exceptions and print a lua stack trace.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Mar 27, 2012 11:18 pm</strong></div>
				<div class="author">by <strong>sean</strong></div>
				<div class="content">You can definitely get the token (using MOAIFacebook.getToken()), but don't do so until your SESSION_DID_LOGIN callback is called, which is ONLY called upon INITIAL successful login. That is, after a successful login from any given app, you can't call login again and expect a callback to DID_LOGIN - you need to either cache or, even better, check the token first using getToken before calling login.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Mar 27, 2012 11:19 pm</strong></div>
				<div class="author">by <strong>adam</strong></div>
				<div class="content">EDIT: sean beat me to it, but I'll leave the code ( snippet from internal project ):<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=619&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> <span style="color: #aa9900; font-weight: bold;">function</span> loginSuccessCallback <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; mToken <span style="color: #66cc66;">=</span> MOAIFacebook<span style="color: #66cc66;">.</span>getToken <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; sendRequest <span style="color: #66cc66;">&#40;</span> msg <span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook <span style="color: #aa9900; font-weight: bold;">then</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook<span style="color: #66cc66;">.</span>setListener <span style="color: #aa9900; font-weight: bold;">then</span> MOAIFacebook<span style="color: #66cc66;">.</span>setListener <span style="color: #66cc66;">&#40;</span> MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_LOGIN<span style="color: #66cc66;">,</span> loginSuccessCallback <span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook<span style="color: #66cc66;">.</span>login <span style="color: #aa9900; font-weight: bold;">then</span> MOAIFacebook<span style="color: #66cc66;">.</span>login <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Mar 28, 2012 7:11 pm</strong></div>
				<div class="author">by <strong>bslayerw</strong></div>
				<div class="content">@sean. There's a bug in getToken which causes a crash if it's nil:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=619&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">line <span style="color: #0000dd;">25</span><span style="color: #339933;">:</span>MOAIFacebookIOS<span style="color: #339933;">::</span><span style="color: #202020;">Get</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #202020;">mToken</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span> MOAIFacebookIOS<span style="color: #339933;">::</span><span style="color: #202020;">Get</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #202020;">mFacebook</span> accessToken <span style="color: #009900;">&#93;</span> UTF8String <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />This will crash if mFacebook or accessToken is nil. I've put in a pull request to return nil if this happens.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Mar 28, 2012 8:13 pm</strong></div>
				<div class="author">by <strong>sean</strong></div>
				<div class="content">Great catch. I'll get the pull request shortly. Thanks!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Mar 28, 2012 8:38 pm</strong></div>
				<div class="author">by <strong>bslayerw</strong></div>
				<div class="content">Either I'm still missing something or I've helped discovered another bug <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />According to the Facebook documentation [<a href="https://developers.facebook.com/docs/mobile/ios/build/" class="postlink">https://developers.facebook.com/docs/mobile/ios/build/</a>]:<br /><br /><blockquote class="uncited"><div>If the app is running in a version of iOS that supports multitasking, and if the device has the Facebook app of version 3.2.3 or greater installed, the SDK attempts to open the authorization dialog within the Facebook app. After the user grants or declines the authorization, the Facebook app redirects back to the calling app, passing the authorization token, expiration, and any other parameters the Facebook OAuth server may return.</div></blockquote><br /><br />What's happening for me is that the FB delegates never get called because the Facebook app is being opened to do the login. Once complete the Facebook app relaunches my game with the token etc. The problem is, I can't find anywhere in the iOS host where this is handled. Again, from the documentation:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=619&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">// Pre iOS 4.2 support</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application handleOpenURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #009900;">&#91;</span>facebook handleOpenURL<span style="color: #339933;">:</span>url<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">// For iOS 4.2+ support</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application openURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; sourceApplication<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSString <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>sourceApplication annotation<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span>annotation <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #009900;">&#91;</span>facebook handleOpenURL<span style="color: #339933;">:</span>url<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br /><blockquote class="uncited"><div>The relevant method is called by iOS when the Facebook App redirects to the app during the SSO process. The call to Facebook::handleOpenURL: provides the app with the user's credentials.<br /></div></blockquote><br />The iOS host doesn't have these methods defined. <br /><br />I'm going to add then <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />Update: I've confirmed this behavior. I added the following method to the AppDelegate in the iOS host source:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=619&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; openURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; sourceApplication<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSString <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>sourceApplication </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;annotation<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span>annotation <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; AKUAppOpenFromURL<span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #b1b100;">return</span> YES<span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />this gets called from the Facebook app on iOS after authentication. The url &quot;openURL&quot; looks something like this:<br /><br />fb{appIDhere}://authorize#access_token={long_ass_hash}&amp;code={another_long_ass_hash}&amp;expires_in=5180418<br /><br />FYI, I saw some strange behavior with Wolf Toss when launching Facebook. I don't know if it's related.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Mar 28, 2012 9:08 pm</strong></div>
				<div class="author">by <strong>bslayerw</strong></div>
				<div class="content">I've added this fix to my pull request. Sorry for the forum spam <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Facebook Integration - access tokens</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Mar 29, 2012 12:37 am</strong></div>
				<div class="author">by <strong>sean</strong></div>
				<div class="content">Sorry. Another good catch. We handle this properly in our game (Wolf Toss), but obviously never added the code to the sample app. Again, very sorry for the oversight. At some point in the near future, we're going to unify the Wolf Toss iOS code with the sample app, which should prevent this from happening in the future. Thanks guys!</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>