<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - MOAITimer.EVENT_TIMER_KEYFRAME callback not working</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>MOAITimer.EVENT_TIMER_KEYFRAME callback not working</h2>
		<p><a href="moaitimer-event-timer-keyframe-callback-not-working-t3073/index.html">/forums/moaitimer-event-timer-keyframe-callback-not-working-t3073/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>MOAITimer.EVENT_TIMER_KEYFRAME callback not working</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Feb 24, 2015 5:38 pm</strong></div>
				<div class="author">by <strong>sshukul</strong></div>
				<div class="content">I'm trying to use the MOAITimer.EVENT_TIMER_KEYFRAME callback on a MOAIAnim object to detect and stop the animation at a halfway point. Specifically, when the Player Character reaches a destination point, to smoothly stop the animation at the middle or end point of the walk cycle instead of jerking to a halt from any point in the walk cycle animation.<br /><br />However MOAITimer.EVENT_TIMER_KEYFRAME callback doesn't seem to be getting called back doing anything. Oddly, all the other callbacks (EVENT_TIMER_LOOP, EVENT_TIMER_BEGIN_SPAN, EVENT_TIMER_END_SPAN) work perfectly.<br /><br />Here is my code:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=3073&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">player<span style="color: #66cc66;">:</span>setListener <span style="color: #66cc66;">&#40;</span> MOAITimer<span style="color: #66cc66;">.</span>EVENT_TIMER_KEYFRAME<span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> <span style="color: #66cc66;">&#40;</span> timer<span style="color: #66cc66;">,</span> keyframe<span style="color: #66cc66;">,</span> executed<span style="color: #66cc66;">,</span> keytime<span style="color: #66cc66;">,</span> value <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">print</span> <span style="color: #66cc66;">&#40;</span> <span style="color: #ff6666;">&quot;Keyframe Callback on keyframe: &quot;</span> <span style="color: #66cc66;">..</span> keyframe <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />However, this works perfectly<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=3073&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">player<span style="color: #66cc66;">:</span>setListener<span style="color: #66cc66;">&#40;</span>MOAITimer<span style="color: #66cc66;">.</span>EVENT_TIMER_END_SPAN<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span> <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;Working&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />The player object is a MOAIAnim set up with the spriter2moai Spriter animation plugin for Moai mentioned here.<br /><br /><!-- l --><a class="postlink-local" href="moai-support-for-spriter-animations-t1373/index.html">moai-support-for-spriter-animations-t1373/</a><!-- l --><br /><br />Here is the relevant code in it that's setting up the anim:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=7&amp;t=3073&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> <span style="color: #aa9900; font-weight: bold;">function</span> createAnim <span style="color: #66cc66;">&#40;</span> self<span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">,</span> x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> scaleX<span style="color: #66cc66;">,</span> scaleY<span style="color: #66cc66;">,</span> reverseFlag <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #808080; font-style: italic;">--print(&quot;Creating Animation &quot; .. name)</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> layerSize <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> player <span style="color: #66cc66;">=</span> MOAIAnim<span style="color: #66cc66;">.</span>new <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>reserveLinks <span style="color: #66cc66;">&#40;</span> <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">#</span>self<span style="color: #66cc66;">.</span>curves<span style="color: #66cc66;">&#91;</span>name<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">*</span> layerSize<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> root <span style="color: #66cc66;">=</span> MOAITransform<span style="color: #66cc66;">.</span>new <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> props <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i<span style="color: #66cc66;">,</span> curveSet <span style="color: #aa9900; font-weight: bold;">in</span> orderedPairs <span style="color: #66cc66;">&#40;</span> self<span style="color: #66cc66;">.</span>curves<span style="color: #66cc66;">&#91;</span>name<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">do</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> prop <span style="color: #66cc66;">=</span> MOAIProp2D<span style="color: #66cc66;">.</span>new <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prop<span style="color: #66cc66;">:</span>setParent <span style="color: #66cc66;">&#40;</span> root <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prop<span style="color: #66cc66;">:</span>setDeck <span style="color: #66cc66;">&#40;</span> texture <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prop<span style="color: #66cc66;">:</span>setPriority<span style="color: #66cc66;">&#40;</span> curveSet<span style="color: #66cc66;">.</span>priority <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--prop:setBlendMode( MOAIProp.GL_SRC_ALPHA, MOAIProp.GL_ONE_MINUS_SRC_ALPHA )</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; prop<span style="color: #66cc66;">.</span>name <span style="color: #66cc66;">=</span> curveSet<span style="color: #66cc66;">.</span>id<span style="color: #66cc66;">.</span>name</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; self<span style="color: #66cc66;">.</span>scaleX <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; self<span style="color: #66cc66;">.</span>scaleY <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> c <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#40;</span> i <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">*</span> layerSize</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>id<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAIProp2D<span style="color: #66cc66;">.</span>ATTR_INDEX <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>x<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_X_LOC <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>y<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_Y_LOC <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>r<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_Z_ROT <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>xs<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_X_SCL <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>ys<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_Y_SCL <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>px<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_X_PIV <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setLink <span style="color: #66cc66;">&#40;</span> c <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> curveSet<span style="color: #66cc66;">.</span>py<span style="color: #66cc66;">,</span> prop<span style="color: #66cc66;">,</span> MOAITransform<span style="color: #66cc66;">.</span>ATTR_Y_PIV <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--player:setLink ( c + 9, curveSet.a, prop, MOAIProp.GL_SRC_ALPHA )</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">table.insert</span> <span style="color: #66cc66;">&#40;</span> props<span style="color: #66cc66;">,</span> i<span style="color: #66cc66;">,</span> prop <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #0000aa;">table.sort</span><span style="color: #66cc66;">&#40;</span>props<span style="color: #66cc66;">,</span> comparePropPriorities<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> reverseFlag <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setMode<span style="color: #66cc66;">&#40;</span>MOAITimer<span style="color: #66cc66;">.</span>LOOP_REVERSE<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">else</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; player<span style="color: #66cc66;">:</span>setMode<span style="color: #66cc66;">&#40;</span>MOAITimer<span style="color: #66cc66;">.</span>LOOP<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> scaleX <span style="color: #aa9900; font-weight: bold;">and</span> scaleY <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; root<span style="color: #66cc66;">:</span>setScl<span style="color: #66cc66;">&#40;</span>scaleX<span style="color: #66cc66;">,</span> scaleY<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; root<span style="color: #66cc66;">:</span>setLoc<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">.</span>root <span style="color: #66cc66;">=</span> root</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">.</span>props <span style="color: #66cc66;">=</span> props</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">.</span>insertProps <span style="color: #66cc66;">=</span> insertProps</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; player<span style="color: #66cc66;">.</span>insertPropsRN <span style="color: #66cc66;">=</span> insertPropsRN</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">.</span>removeProps <span style="color: #66cc66;">=</span> removeProps</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; player<span style="color: #66cc66;">:</span>apply <span style="color: #66cc66;">&#40;</span> <span style="color: #cc66cc;">0</span> <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> player</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />I'm currently on Moai SDK Version 1.5 Revision 1 (Last pulled in Aug 2014). Any ideas? Thanks.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: MOAITimer.EVENT_TIMER_KEYFRAME callback not working</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Feb 24, 2015 6:48 pm</strong></div>
				<div class="author">by <strong>ezraanderson</strong></div>
				<div class="content">~<br />Maybe an issue with your code, these &quot;MOAITimer.EVENT_TIMER_KEYFRAME&quot; examples seem to work<br /><br /><ul><li>anim-listener -&gt; <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/1.5-stable/samples/anim/anim-listener/main.lua">https://github.com/moai/moai-dev/blob/1 ... r/main.lua</a><!-- m --></li><li>timer-stop --&gt; <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/1.5-stable/samples/test/timer-stop/main.lua">https://github.com/moai/moai-dev/blob/1 ... p/main.lua</a><!-- m --></li><li> timer-settime -&gt; <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/1.5-stable/samples/test/timer-settime/main.lua">https://github.com/moai/moai-dev/blob/1 ... e/main.lua</a><!-- m --></li><li> timer-no-callback -&gt; <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/1.5-stable/samples/test/timer-no-callback/main.lua">https://github.com/moai/moai-dev/blob/1 ... k/main.lua</a><!-- m --></li></ul></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: MOAITimer.EVENT_TIMER_KEYFRAME callback not working</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Feb 24, 2015 8:54 pm</strong></div>
				<div class="author">by <strong>Vavius</strong></div>
				<div class="content">MOAITimer.EVENT_TIMER_KEYFRAME is called only for special Event Curve that can be set with player:setCurve(). It does not report keyframes from MOAIAnim linked curves.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: MOAITimer.EVENT_TIMER_KEYFRAME callback not working</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Feb 25, 2015 10:04 am</strong></div>
				<div class="author">by <strong>sshukul</strong></div>
				<div class="content">Thanks again Vavius! That did it.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>