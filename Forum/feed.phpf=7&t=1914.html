<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://192.168.20.226:3000/forums/feed.php?f=7&amp;t=1914&amp;mode" />

<title>Moai Forum | The mobile platform for pro game developers</title>
<subtitle>The mobile platform for pro game developers</subtitle>
<link href="http://192.168.20.226:3000/forums/index.php" />
<updated>2013-06-27T08:20:40+00:00</updated>

<author><name><![CDATA[Moai Forum | The mobile platform for pro game developers]]></name></author>
<id>/forums/feed.php?f=7&amp;t=1914&amp;mode</id>
<entry>
<author><name><![CDATA[Vavius]]></name></author>
<updated>2013-06-27T08:20:40+00:00</updated>
<published>2013-06-27T08:20:40+00:00</published>
<id>/forums/viewtopic.php?t=1914&amp;p=10585#p10585</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=1914&amp;p=10585#p10585"/>
<title type="html"><![CDATA[Re: iOS Untz: do not stop background music from other apps]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=1914&amp;p=10585#p10585"><![CDATA[
Background music is interrupted when MOAIUntz.Initialize is called. <br />I can't find out why. Here is code from iOS UntzSystem.cpp:<br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">status <span style="color: #339933;">=</span> AudioSessionInitialize<span style="color: #009900;">&#40;</span>NULL<span style="color: #339933;">,</span> NULL<span style="color: #339933;">,</span> audioSessionInterruptionListener<span style="color: #339933;">,</span> this<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">AudioSessionSetActive<span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">checkStatus<span style="color: #009900;">&#40;</span>status<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">UInt32 category <span style="color: #339933;">=</span> kAudioSessionCategory_AmbientSound<span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span> options <span style="color: #339933;">&amp;</span> UNTZ<span style="color: #339933;">::</span><span style="color: #202020;">RECORDABLE</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    category <span style="color: #339933;">=</span> kAudioSessionCategory_PlayAndRecord<span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">status <span style="color: #339933;">=</span> AudioSessionSetProperty<span style="color: #009900;">&#40;</span>kAudioSessionProperty_AudioCategory<span style="color: #339933;">,</span> <span style="color: #0000dd;">4</span><span style="color: #339933;">,</span> <span style="color: #339933;">&amp;</span>category<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">checkStatus<span style="color: #009900;">&#40;</span>status<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /></ol></code></dd></dl><br /><br />Seems like the category for audiosession is fine (and it allows mixing after backgrounding/foregrounding the app). But something is interrupting background audio at startup. <br /><br /><blockquote class="uncited"><div><br />Also, how to detect if music is playing so I can stop or not to play the music of my game?<br /></div></blockquote><br />For iOS:<br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">UInt32 otherAudioIsPlaying<span style="color: #339933;">;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">UInt32 propertySize <span style="color: #339933;">=</span> <span style="color: #993333;">sizeof</span> <span style="color: #009900;">&#40;</span>otherAudioIsPlaying<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">AudioSessionGetProperty <span style="color: #009900;">&#40;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    kAudioSessionProperty_OtherAudioIsPlaying<span style="color: #339933;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #339933;">&amp;</span>propertySize<span style="color: #339933;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #339933;">&amp;</span>otherAudioIsPlaying</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">// non-zero otherAudioIsPlaying indicates that something is playing</span></div></li><br /></ol></code></dd></dl><br />You can bind this check to lua, maybe somewhere in MOAIUntz. Don't know the solution for Android.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1427">Vavius</a> — Thu Jun 27, 2013 8:20 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[RurouniGPL]]></name></author>
<updated>2013-06-26T08:53:10+00:00</updated>
<published>2013-06-26T08:53:10+00:00</published>
<id>/forums/viewtopic.php?t=1914&amp;p=10574#p10574</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=1914&amp;p=10574#p10574"/>
<title type="html"><![CDATA[Re: iOS Untz: do not stop background music from other apps]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=1914&amp;p=10574#p10574"><![CDATA[
Interesting question...<br /><br />Also, how to detect if music is playing so I can stop or not to play the music of my game? It's tedious when the game overlaps te background music... I think it would require the same technique...<br /><br />Thanks!<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=967">RurouniGPL</a> — Wed Jun 26, 2013 8:53 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[Vavius]]></name></author>
<updated>2013-06-25T10:27:28+00:00</updated>
<published>2013-06-25T10:27:28+00:00</published>
<id>/forums/viewtopic.php?t=1914&amp;p=10562#p10562</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=1914&amp;p=10562#p10562"/>
<title type="html"><![CDATA[iOS Untz: do not stop background music from other apps]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=1914&amp;p=10562#p10562"><![CDATA[
With native iOS frameworks we could set AudioSession category to mix sounds from game with background music from another apps. <br />It is AVAudioSessionCategoryAmbient. <br /><br />Any ideas on how to make this with Untz?<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1427">Vavius</a> — Tue Jun 25, 2013 10:27 am</p><hr />
]]></content>
</entry>
</feed>