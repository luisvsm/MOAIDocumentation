<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - [SOLVED] MOAIPathFinder not giving shortest path</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Game Development" href="../feed.php%3Ff=16.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - [SOLVED] MOAIPathFinder not giving shortest path" href="http://192.168.20.226:3000/forums/feed.php?f=16&amp;t=2065" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/moaipathfinder-not-giving-shortest-path-t2065/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html%3Fhilit=diagonal.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html%3Fhilit=diagonal.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../additional-f14.html">Additional</a> <strong>&#8249;</strong> <a href="../game-development-f16.html">Game Development</a></li>

				<li class="rightside"><a href="index.html%3Fhilit=diagonal.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://192.168.20.226:3000/forums/memberlist.php?mode=email&amp;t=2065" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=16&amp;t=2065&amp;start=0&amp;hilit=diagonal&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">[SOLVED] MOAIPathFinder not giving shortest path</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">General discussion of game creation, including ai, shaders, and other topics.<br /></div>
	<p>
		
			<strong>Moderators:</strong> <span style="color: #AA0000;" class="username-coloured">naturally</span>, <span style="color: #AA0000;" class="username-coloured">ezraanderson</span>
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			20 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p11589" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p11589">[SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong> &raquo; Tue Sep 17, 2013 5:38 pm </p>

			

			<div class="content">I've been hacking on MOAIGridPathGraph.cpp and am fairly certain that it is not giving the shortest A* path.<br /><br />It seems like the node stack is not backtracking even when the heuristic sum is greater than another node... for example it  keeps travelling along walls to solve the path, instead of cutting directly across the room.  I am not sure if this is a known problem or has a known solution, or if I am missing some setting, so I thought I'd post here and ask before attempting to fix it.<br /><br />A side note: I've successfully hacked the RECT grid to solve for thin walls and properly check for <span class="posthilit">diagonal</span> clearances.  If anyone wants this code I will post it (although it is hackey).</div>

			
				<div class="notice">Last edited by <span style="color: #AA0000;" class="username-coloured">naturally</span> on Wed Apr 09, 2014 6:15 pm, edited 1 time in total.
					
				</div>
			<div id="sig11589" class="signature"><a href="http://www.dontbepatchman.com" class="postlink"><img src="http://i.imgur.com/ney3Oo8.png" alt="Image" /></a> - <a href="http://www.dontbepatchman.com" class="postlink"><span style="font-weight: bold">Don't Be Patchman</span></a> - a sneak-and-grow adventure!</div>

		</div>

		
			<dl class="postprofile" id="profile11589">
			<dt>
				<img src="../download/file.php%253favatar%253d1551_1426308916.png" width="80" height="80" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 652</dd><dd><strong>Joined:</strong> Fri Aug 30, 2013 3:05 am</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p11590" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p11590">Re: MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong> &raquo; Tue Sep 17, 2013 5:41 pm </p>

			

			<div class="content"><blockquote class="uncited"><div>MOAIPathFinder not giving shortest path</div></blockquote><br /><br />I can confirm that the MOAIGridPathGraph has this problem.</div>

			<div id="sig11590" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><a href="http://www.ezraanderson.com" class="postlink">My Website</a> | <a href="https://www.facebook.com/ezraanderson1979" class="postlink">My Facebook</a> | <a href="https://twitter.com/ezraanderson79" class="postlink">My Twitter</a> | <a href="https://itunes.apple.com/us/artist/ezra-anderson/id477619040" class="postlink">My Games on Itunes</a> | <a href="https://play.google.com/store/apps/developer?id=Ezra+Anderson" class="postlink">My Games on Android</a></div>

		</div>

		
			<dl class="postprofile" id="profile11590">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1072</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p11592" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p11592">Re: MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong> &raquo; Tue Sep 17, 2013 5:50 pm </p>

			

			<div class="content">Thanks for the confirmation ezra!  <img src="../images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />I think I will wait a little while longer in case of any more feedback before trying to fix it.<br /><br />Another side note: something that tripped me up when compiling MOAI... I copied the original file to MOAIGridPathGraphOrig.cpp, edited MOAIGridPathGraph.cpp and ran build-linux_64... that unbeknownst to me compiled BOTH MOAIGridPathGraph.cpp and MOAIGridPathGraphOrig.cpp, and linked the original file... making me think that my changes were being integrated (since errors in MOAIGridPathGraph.cpp broke the compile).  Anyways that was a stupid frustration for a while.  Do not do that.</div>

			<div id="sig11592" class="signature"><a href="http://www.dontbepatchman.com" class="postlink"><img src="http://i.imgur.com/ney3Oo8.png" alt="Image" /></a> - <a href="http://www.dontbepatchman.com" class="postlink"><span style="font-weight: bold">Don't Be Patchman</span></a> - a sneak-and-grow adventure!</div>

		</div>

		
			<dl class="postprofile" id="profile11592">
			<dt>
				<img src="../download/file.php%253favatar%253d1551_1426308916.png" width="80" height="80" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 652</dd><dd><strong>Joined:</strong> Fri Aug 30, 2013 3:05 am</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p11679" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p11679">Re: MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong> &raquo; Tue Sep 24, 2013 2:18 pm </p>

			

			<div class="content">I'm not certain I can even use the pathfinder, even if fixed, since it is tied to a Grid.  I need to use waypoints that aren't tied to a rectangular structure.  <br /><br />So to that end I will need to implement A* in C++ and build some sort of &quot;MOAIWaypointFinder&quot; that is passed a node graph with links.  It will pre-calculate and cache the Euclidian distances for speed.  Luckily my university project was building A* in C++, but I might need testing help and help with the Lua integration...<br /><br />As for anyone concerned this might be too hard to use, it should actually work with TMX maps.  You would create another layer on your map (waypoints layer) and use a tileset that has all the combinations of nodes+waypoints.  It wouldn't be much fun to draw, admittedly, but would be more powerful.  You could parse that in Lua before passing it to MOAIWaypointFinder.  Alternatively a grid could be transformed into waypoints.<br /><br />Not sure of the timeline of this being done - haven't started yet and won't need it for a bit.  Probably two-four weeks.</div>

			<div id="sig11679" class="signature"><a href="http://www.dontbepatchman.com" class="postlink"><img src="http://i.imgur.com/ney3Oo8.png" alt="Image" /></a> - <a href="http://www.dontbepatchman.com" class="postlink"><span style="font-weight: bold">Don't Be Patchman</span></a> - a sneak-and-grow adventure!</div>

		</div>

		
			<dl class="postprofile" id="profile11679">
			<dt>
				<img src="../download/file.php%253favatar%253d1551_1426308916.png" width="80" height="80" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 652</dd><dd><strong>Joined:</strong> Fri Aug 30, 2013 3:05 am</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p11683" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p11683">Re: MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong> &raquo; Tue Sep 24, 2013 6:46 pm </p>

			

			<div class="content">~<br /><br />I can give you a Lua or a Pascal A* pathfinder if you want for a reference.<br /><br />For speed reason and the bug in a pathfinder, I send small grid that is around the character to MOAIGridPathGraph.<br /><br />Example: map 100x100<br />pathforCharaceter: 20x20<br /><br />I only use pathfinder to get my npc out of rooms so when my main character walks through a door, I save the door as a way point.<br /><br /><br /><blockquote class="uncited"><div>As for anyone concerned this might be too hard to use, it should actually work with TMX maps. You would create another layer on your map (waypoints layer) and use a tileset that has all the combinations of nodes+waypoints</div></blockquote><br /><br />That actually sounds like a very smart idea, good luck <img src="../images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>

			<div id="sig11683" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><a href="http://www.ezraanderson.com" class="postlink">My Website</a> | <a href="https://www.facebook.com/ezraanderson1979" class="postlink">My Facebook</a> | <a href="https://twitter.com/ezraanderson79" class="postlink">My Twitter</a> | <a href="https://itunes.apple.com/us/artist/ezra-anderson/id477619040" class="postlink">My Games on Itunes</a> | <a href="https://play.google.com/store/apps/developer?id=Ezra+Anderson" class="postlink">My Games on Android</a></div>

		</div>

		
			<dl class="postprofile" id="profile11683">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1072</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14070" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14070">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong> &raquo; Wed Apr 09, 2014 6:17 pm </p>

			

			<div class="content">Solution was to change the heuristic.   <img src="http://192.168.20.226:3000/forums/images/smilies/icon_redface.gif" alt=":oops:" title="Embarrassed" /> <br /><br />Was using the default, MOAIGridPathGraph.MANHATTAN_DISTANCE, which doesn't work well with diagonals.<br /><br />Solution:<br />pathFinder:setHeuristic ( MOAIGridPathGraph.EUCLIDEAN_DISTANCE )<br /><br />Duh.  Thakns Patrick.  <img src="../images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div>

			<div id="sig14070" class="signature"><a href="http://www.dontbepatchman.com" class="postlink"><img src="http://i.imgur.com/ney3Oo8.png" alt="Image" /></a> - <a href="http://www.dontbepatchman.com" class="postlink"><span style="font-weight: bold">Don't Be Patchman</span></a> - a sneak-and-grow adventure!</div>

		</div>

		
			<dl class="postprofile" id="profile14070">
			<dt>
				<img src="../download/file.php%253favatar%253d1551_1426308916.png" width="80" height="80" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 652</dd><dd><strong>Joined:</strong> Fri Aug 30, 2013 3:05 am</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14071" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14071">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong> &raquo; Wed Apr 09, 2014 6:34 pm </p>

			

			<div class="content">~<br />Cool I will have to try that.</div>

			<div id="sig14071" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><a href="http://www.ezraanderson.com" class="postlink">My Website</a> | <a href="https://www.facebook.com/ezraanderson1979" class="postlink">My Facebook</a> | <a href="https://twitter.com/ezraanderson79" class="postlink">My Twitter</a> | <a href="https://itunes.apple.com/us/artist/ezra-anderson/id477619040" class="postlink">My Games on Itunes</a> | <a href="https://play.google.com/store/apps/developer?id=Ezra+Anderson" class="postlink">My Games on Android</a></div>

		</div>

		
			<dl class="postprofile" id="profile14071">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ezraanderson</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1072</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14922" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14922">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Tue Jul 15, 2014 8:05 pm </p>

			

			<div class="content">Hi!<br /><br />Is there any solution for this? I changed the heuristic method for this:<br /><br />self.finder:setHeuristic(MOAIGridPathGraph.EUCLIDEAN_DISTANCE)<br /><br />The same results <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /> I'm using the 1.3 and 1.4 version (compability reasons), is there any change on v1.5? Is there is a patch for path finding?<br /><br />Thank you!</div>

			

		</div>

		
			<dl class="postprofile" id="profile14922">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14923" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14923">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong> &raquo; Tue Jul 15, 2014 9:48 pm </p>

			

			<div class="content">Do you have <span class="posthilit">diagonal</span> movement on?<br /><br />Best way to get help on this matter is modify the pathfinder sample and replicate your problem, then post the code back in this thread.</div>

			<div id="sig14923" class="signature"><a href="http://www.dontbepatchman.com" class="postlink"><img src="http://i.imgur.com/ney3Oo8.png" alt="Image" /></a> - <a href="http://www.dontbepatchman.com" class="postlink"><span style="font-weight: bold">Don't Be Patchman</span></a> - a sneak-and-grow adventure!</div>

		</div>

		
			<dl class="postprofile" id="profile14923">
			<dt>
				<img src="../download/file.php%253favatar%253d1551_1426308916.png" width="80" height="80" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">naturally</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 652</dd><dd><strong>Joined:</strong> Fri Aug 30, 2013 3:05 am</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p14941" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p14941">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Thu Jul 17, 2014 3:44 pm </p>

			

			<div class="content">Hi,<br /><br />I tried with and without <span class="posthilit">diagonal</span> movement <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /> Same results.<br /><br />I will try to modify the sample!</div>

			

		</div>

		
			<dl class="postprofile" id="profile14941">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15815" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15815">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Tue Nov 04, 2014 1:11 pm </p>

			

			<div class="content">Hi! At last I could do some tests. I've modified the simple sample that comes with the SDK:<br /><br />grid:setRow ( 1,  0x03, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 2,  0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 3,  0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 4,  0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 5,  0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 6,  0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 7,  0x03, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03 )<br />grid:setRow ( 8,  0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03 )<br /><br />The current behaviour is this:<br /><br /><div class="inline-attachment"><!-- ia2 -->pathfind.png<!-- ia2 --></div><br /><br />If I disable the diagonals, goes like this:<br /><br /><div class="inline-attachment"><!-- ia1 -->pathfinding_nodiagonals.png<!-- ia1 --></div><br /><br />This is a tipical structure that you cand find on any game. The Playable Character (PC) of my game should do something like this:<br /><br /><div class="inline-attachment"><!-- ia0 -->pathfinding_ideal.png<!-- ia0 --></div><br /><br />... which is more natural than the others (I have faked it). Any one has an implementation that does something like this? Or is there any solution?<br /><br />Thanks!</div>

			<div class="rules">You do not have the required permissions to view the files attached to this post.</div>

		</div>

		
			<dl class="postprofile" id="profile15815">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15819" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15819">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Taroven</strong> &raquo; Wed Nov 05, 2014 7:55 am </p>

			

			<div class="content"><blockquote><div><cite>RurouniGPL wrote:</cite>&lt;snip&gt;</div></blockquote><br />My initial thought was to raise the cost for <span class="posthilit">diagonal</span> movement, but it looks like Moai already does this for us.<br /><br />Take a look at src/moai-sim/MOAIGridPathGraph.cpp for this line: <dl class="codebox"><dt>Code: <a href="index.html%3Fhilit=diagonal.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">params.mDCost = sqrtf <span class="br0">&#40;</span><span class="br0">&#40;</span> params.mHCost * params.mHCost <span class="br0">&#41;</span> + <span class="br0">&#40;</span> params.mVCost * params.mVCost <span class="br0">&#41;</span><span class="br0">&#41;</span>;</div></li><br /></ol></code></dd></dl><br />This number is the <span class="posthilit">diagonal</span> movement cost - Which, assuming a cost of 1 for mHCost and mVCost, would be sqrt(2) or near 1.4.<br /><br />In other words, it should be using your ideal example and it may be calculating all movement as cardinal instead of applying the <span class="posthilit">diagonal</span> movement penalty. It might be a good idea to add some prints to MOAIGridPathGraph's PushNeighbor(s) methods to see exactly what's going on.<br /><br />I'd do it myself, but it's presently 3am and my new laptop still isn't set up to compile Moai yet... <img src="http://192.168.20.226:3000/forums/images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile15819">
			<dt>
				<strong>Taroven</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 19</dd><dd><strong>Joined:</strong> Thu Aug 08, 2013 1:22 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15820" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15820">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Wed Nov 05, 2014 9:08 am </p>

			

			<div class="content">Thanks you for your response!<br /><br /><blockquote class="uncited"><div>This number is the <span class="posthilit">diagonal</span> movement cost - Which, assuming a cost of 1 for mHCost and mVCost, would be sqrt(2) or near 1.4.<br /><br />In other words, it should be using your ideal example and it may be calculating all movement as cardinal instead of applying the <span class="posthilit">diagonal</span> movement penalty.</div></blockquote><br /><br />I can't compile MOAI now, but I will think how to apply what you say!<br /><br />Thanks!</div>

			

		</div>

		
			<dl class="postprofile" id="profile15820">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15890" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15890">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Thu Nov 13, 2014 1:33 pm </p>

			

			<div class="content">Hi!<br /><br /><blockquote><div><cite>Taroven wrote:</cite><dl class="codebox"><dt>Code: <a href="index.html%3Fhilit=diagonal.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">params.mDCost = sqrtf <span class="br0">&#40;</span><span class="br0">&#40;</span> params.mHCost * params.mHCost <span class="br0">&#41;</span> + <span class="br0">&#40;</span> params.mVCost * params.mVCost <span class="br0">&#41;</span><span class="br0">&#41;</span>;</div></li><br /></ol></code></dd></dl><br />This number is the <span class="posthilit">diagonal</span> movement cost - Which, assuming a cost of 1 for mHCost and mVCost, would be sqrt(2) or near 1.4.</div></blockquote><br /><br />So... you suggets that I have to do this?<br /><br /><dl class="codebox"><dt>Code: <a href="index.html%3Fhilit=diagonal.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">params.mDCost = <span style="">1</span>,<span style="">414213562</span>;</div></li><br /></ol></code></dd></dl><br /><br />Thank you!</div>

			

		</div>

		
			<dl class="postprofile" id="profile15890">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15905" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15905">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Taroven</strong> &raquo; Sat Nov 15, 2014 4:21 am </p>

			

			<div class="content"><blockquote><div><cite>RurouniGPL wrote:</cite>Hi!<br /><br /><blockquote><div><cite>Taroven wrote:</cite><dl class="codebox"><dt>Code: <a href="index.html%3Fhilit=diagonal.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">params.mDCost = sqrtf <span class="br0">&#40;</span><span class="br0">&#40;</span> params.mHCost * params.mHCost <span class="br0">&#41;</span> + <span class="br0">&#40;</span> params.mVCost * params.mVCost <span class="br0">&#41;</span><span class="br0">&#41;</span>;</div></li><br /></ol></code></dd></dl><br />This number is the <span class="posthilit">diagonal</span> movement cost - Which, assuming a cost of 1 for mHCost and mVCost, would be sqrt(2) or near 1.4.</div></blockquote><br /><br />So... you suggets that I have to do this?<br /><br /><dl class="codebox"><dt>Code: <a href="index.html%3Fhilit=diagonal.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">params.mDCost = <span style="">1</span>,<span style="">414213562</span>;</div></li><br /></ol></code></dd></dl><br /><br />Thank you!</div></blockquote><br /><br />No, you can leave the mDCost portion alone - the cost is being calculated correctly, but it looks like the pathfinder is treating <span class="posthilit">diagonal</span> movement as if it were cardinal (not <span class="posthilit">diagonal</span>) so the <span class="posthilit">diagonal</span> cost is never used.<br /><br />What I recommend is to debug it. Add some prints to PushNeighbor and PushNeighbors at the very least, showing how they are being called and what values they are being called with, etc.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15905">
			<dt>
				<strong>Taroven</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 19</dd><dd><strong>Joined:</strong> Thu Aug 08, 2013 1:22 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15964" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15964">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Tue Nov 18, 2014 12:42 pm </p>

			

			<div class="content"><img src="http://192.168.20.226:3000/forums/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> I studied A* long, long time ago... I'm  <img src="http://192.168.20.226:3000/forums/images/smilies/icon_redface.gif" alt=":oops:" title="Embarrassed" /><br /><br />I'll try what you say.<br /><br />One more question, &quot;reserveTerrainWeights&quot; would improve anything? I don't find any sample <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /><br /><br />Thank you.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15964">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15998" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15998">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Taroven</strong> &raquo; Fri Nov 21, 2014 2:01 am </p>

			

			<div class="content">Sorry for the late reply, apparently I didn't subscribe to this topic.  <img src="http://192.168.20.226:3000/forums/images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /> <br /><br /><blockquote><div><cite>RurouniGPL wrote:</cite>:shock: I studied A* long, long time ago... I'm  <img src="http://192.168.20.226:3000/forums/images/smilies/icon_redface.gif" alt=":oops:" title="Embarrassed" /><br /><br />I'll try what you say.<br /><br />One more question, &quot;reserveTerrainWeights&quot; would improve anything? I don't find any sample <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /><br /><br />Thank you.</div></blockquote><br /><br />I don't know. The method (in MOAIPathFinder.cpp) just initializes self.mWeights with a Size var, and there are references to mWeights in ComputeTerrainCost (an internal method) and setTerrainWeight (a MOAIPathFinder method accessible via Lua), both in the same file.<br /><br />I'm not really seeing what the actual effect of reserveTerrainWeights is, but no harm in testing a bit. Looks like mWeights.Size defaults to 0, so if anything I'd try using pathfinder:reserveTerrainWeights(1) from Lua and just seeing what happens.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15998">
			<dt>
				<strong>Taroven</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 19</dd><dd><strong>Joined:</strong> Thu Aug 08, 2013 1:22 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p16288" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p16288">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Wed Dec 24, 2014 12:06 pm </p>

			

			<div class="content">Hi! This week I will have some time to test things.<br /><br />First, mDCost isn't near to sqrt(2):<br /><br />mDCost: 22.627417<br /><br />I will check other things!</div>

			

		</div>

		
			<dl class="postprofile" id="profile16288">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p16289" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p16289">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Taroven</strong> &raquo; Wed Dec 24, 2014 11:00 pm </p>

			

			<div class="content"><blockquote><div><cite>RurouniGPL wrote:</cite>Hi! This week I will have some time to test things.<br /><br />First, mDCost isn't near to sqrt(2):<br /><br />mDCost: 22.627417<br /><br />I will check other things!</div></blockquote><br /><br />As long as mDCost == sqrt( (mVCost^2) + (mHCost^2) ), it's calculating correctly, and that result tells me it is simply by not being 0.<br /><br />I would add prints in PushNeighbor and PushNeighbors to see if tiles are being correctly identified as <span class="posthilit">diagonal</span>.</div>

			

		</div>

		
			<dl class="postprofile" id="profile16289">
			<dt>
				<strong>Taroven</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 19</dd><dd><strong>Joined:</strong> Thu Aug 08, 2013 1:22 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p17021" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p17021">Re: [SOLVED] MOAIPathFinder not giving shortest path</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>RurouniGPL</strong> &raquo; Mon Mar 30, 2015 11:23 am </p>

			

			<div class="content">Hi!<br /><br />I'm back with this issue... I couldn't work on it until now. I will add  prints in PushNeighbor and PushNeighbors to see if tiles are being correctly identified as <span class="posthilit">diagonal</span>.<br /><br />Let's see <img src="../images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile17021">
			<dt>
				<strong>RurouniGPL</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 238</dd><dd><strong>Joined:</strong> Wed Jun 27, 2012 6:54 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			20 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../game-development-f16.html" class="left-box left" accesskey="r">Return to Game Development</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16" selected="selected">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.057s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>