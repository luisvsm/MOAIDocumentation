<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - UNTZ : Can we change the sound pitch ?</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>UNTZ : Can we change the sound pitch ?</h2>
		<p><a href="untz-can-we-change-the-sound-pitch-t1421/index.html">/forums/untz-can-we-change-the-sound-pitch-t1421/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Nov 26, 2012 8:12 pm</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">Hi, I am looking for a way to change the pitch of the sound sample, and didn't find any suitable API within current UNTZ implementation in Moai. So, before I dive deep into source code trying to write down my own APIs, I wanted to ask if the UNTZ library in general has that feature.<br />I'd like to see if this is worth pursuing, or I better write an OpenAL bridge ( which I prefer not having to spend time on).<br />Also, what's the status on FMOD, I've seen it's been pretty much put aside, would that be a good way to go?<br />Looking forward to hear advice from people that worked extensively with sound in Moai.<br />Thanks a bunch<br />N</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Nov 27, 2012 2:33 am</strong></div>
				<div class="author">by <strong>stun</strong></div>
				<div class="content">I wouldn't say 'worked extensively', but I have modified the FMOD code from 1.3 so that it actually works: <!-- m --><a class="postlink" href="https://github.com/c0d3monk33/moai-dev">https://github.com/c0d3monk33/moai-dev</a><!-- m --><br /><br />Having said that given FMOD is really a commercial product I'd love to see an OpenAL bridge for MOAI. Feel like collaborating? I haven't really investigated writing one because I got FMOD working with 32 channels after a few days of effort. OpenAL seems to have a bit of a checkered history too, as it's no longer open source. Would you be looking at OpenAL 'Soft' for MOAI?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Nov 27, 2012 9:58 am</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">Thanks for the link and the info <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br />OpenAL is no longer open source?  <img src="images/smilies/icon_e_surprised.gif" alt=":o" title="Surprised" />  I didn't know about that.<br />I have to see how much time I will have available to pursue this. I assume making a bridge to OpenAL for iOS (which is my primary target platform) wouldn't take me almost any time at all as I already did it before for another engine. However, since my dev environment include OSX and Windows, I might not have time to look around and update these hosts.<br />Will keep you informed about my OpenAL whereabouts.<br />Meanwhile, anybody did anything more advanced with Untz?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Nov 28, 2012 5:23 am</strong></div>
				<div class="author">by <strong>rhoster</strong></div>
				<div class="content">I'm not even trying to think about the audio now, but soon enough, I'll need to add some basic audio - a background music that fades in and out, with some simple sound effects.  I'm *hoping* that there is some type of free implementation that will achieve that.  I'd be curious to know what solutions are currently available and just how broken Untz really is?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Nov 28, 2012 11:09 am</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">&quot;how broken Untz really is?&quot; &gt;&gt;<br />Not sure yet, just out of the box it works on OSX host, and not working on iOS, but there is a super easy fix, there's another forum post here that solves it (basically, just find in MoaiView.mm a line AKUUntzInit(); and uncomment ifdef around it).<br />There are other forum posts saying that some file formats don't work with Android.<br /><br />Just looking at Untz API it looks pretty fine, I like implementation of seek/moveVolume, etc... which is consistent with MOAIAction way of doing things, but I find that it so painfully lacks pitch manipulation that I am now looking into implementing OpenAL instead, which is a pain in the ass.<br />So the lack of possibility to change the sound pitch renders Untz pretty useless for me, and I believe for many developers,  and here's why  pretty much most of the games/apps need this very basic feature:<br /><br />Imagine you're making a car game. Pitch manipulation lets you change the sound of the car so that it goes up in pitch as you push the gas pedal. Or, if you're making a simple &quot;Labyrinth&quot; kinda game, same thing, as the rolling ball changes speed, you can get very realistic effect by changing the pitch of sound according to ball speed. Without being able to change sound pitch, we can never even get close to make these sounds, so our options are to either go mute or implement other sound library of our choice.<br /><br />Or for any other sound effect, like lasers or explosions in space shooters, or elements break on collision in &quot;Angry Birds&quot;, everytime you play a sound you'd want to vary its pitch (and volume) a bit, to avoid annoying endless repetition of the same sound effect (unless you are making a ZX Spectrum-like retro title).<br /><br />Since my primary target is iOS, as I wrote above, I will probably try and implement OpenAL, and then I'll make a Sound Manager in lua that will resort to basic UNTZ when running app in OSX/Windows (to have at least some sound while developing) and then on device it will call OpenAL API instead.<br /><br />As I said I so strongly prefer not doing this, that if anyone has any suggestion I'm very eager to hear <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br />Cheers<br />N</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Nov 28, 2012 11:20 am</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">... just before I jump into OpenAL, I will investigate UNTZ sound and see if I change the sample rate of a sample, it should play with different pitch... I hope this works, it would save a lot of time...</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Nov 28, 2012 6:13 pm</strong></div>
				<div class="author">by <strong>rhoster</strong></div>
				<div class="content"><blockquote><div><cite>nosheet wrote:</cite>&quot;Imagine you're making a car game. Pitch manipulation lets you change the sound of the car so that it goes up in pitch as you push the gas pedal. Or, if you're making a simple &quot;Labyrinth&quot; kinda game, same thing, as the rolling ball changes speed, you can get very realistic effect by changing the pitch of sound according to ball speed. Without being able to change sound pitch, we can never even get close to make these sounds, so our options are to either go mute or implement other sound library of our choice.<br /><br />Or for any other sound effect, like lasers or explosions in space shooters, or elements break on collision in &quot;Angry Birds&quot;, everytime you play a sound you'd want to vary its pitch (and volume) a bit, to avoid annoying endless repetition of the same sound effect (unless you are making a ZX Spectrum-like retro title).</div></blockquote><br /><br />Thanks for the great examples - we do indeed use beam type effects (including lasers) and would benefit from this as well - although, for our game they are more infrequent, so repetition isn't as large of a concern.<br /><br />I'm glad to hear that the basics of Untz seem to be intact.  I'm curious to follow along with whatever you decide to implement because we're still about a month off me working on adding in the audio.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Nov 28, 2012 7:32 pm</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">Here's a summary of my todays attempt:<br />- Untz appears that by its design makes sound pitch changes impossible. Maybe I misunderstood something, but if it depends on fixed sample rate, as it appears to be, then nothing can be done. Anyway, since I couldn't find absolutely no documentation on Untz itself, or almost any other page on entire Internet that gives it a mention, I gave up on the idea of modifying Untz.<br /><br />- I spent a few hours trying to implement the *** truly fantastic *** ObjectAL library, but couldn't make it to work due to some apparently trivial ObjectiveC problems that I couldn't know how to fix. Until I get some answer on ObjectAL's forum, I give up on this too.<br /><br />At any rate, I abandoned idea to work more on this until I really get to need this feature very badly, and in that case I will make a quick Moai wrapper for the super-old SoundEngine API written by Apple back in 2008. It is very simple and straightforward, simple C++ with no ObjectiveC headaches. Although no longer supported by Apple, seems to still be working as my 3-year old game that use it still works on all devices and versions of iOS.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Nov 29, 2012 12:46 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">For my sound needs, I just use a synthesizer coded in native iOS for CoreAudio and control it from the MOAI environment.  Bonus thing is, it also runs and sounds the same in Android, and there aren't a lot of files to maintain - just small patch sets.<br /><br />But of course everyones needs are different.. the sound side of MOAI needs a bit of love, though.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Nov 29, 2012 5:46 pm</strong></div>
				<div class="author">by <strong>nosheet</strong></div>
				<div class="content">@ibisum, do you use MOAIAudioSampler with UNTZ system? It works on Android too? It would be great if you could give us a bit more details, sounds interesting.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Nov 29, 2012 8:14 pm</strong></div>
				<div class="author">by <strong>rhoster</strong></div>
				<div class="content"><blockquote><div><cite>nosheet wrote:</cite>@ibisum, do you use MOAIAudioSampler with UNTZ system? It works on Android too? It would be great if you could give us a bit more details, sounds interesting.</div></blockquote><br /><br />I'm with nosheet, any advice you can give would be appreciated.  Thanks!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Nov 30, 2012 7:37 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I'm not using UNTZ or anything like that - I have a small synth library which generates audio, similar to something like sfxr that runs under both Android and OSX audio subsystems, and I pass parameters to it like a MIDI device - with MIDI CC #'s and so on.  This synth is something I developed outside the context of MOAI - I just wanted to point out that you can do sound in the MOAI hosts, but you have to set it up yourself.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Nov 30, 2012 4:04 pm</strong></div>
				<div class="author">by <strong>speeder</strong></div>
				<div class="content">One reason I did not switched to moai earlier, is that one of the apps I was making is a music box (with a tracker-like file format I developed, within Corona SDK limitations).<br /><br />I will still want to port that thing one day to moai... If everything in my company runs well, you might count on me for helping the sound side of moai...<br /><br />I want to use something that supports pitch and volume envelopes, and also some basic filtering (low-pass, high-pass, etc...). For example it would be awesome to make a game where you can shut a door, and it uses low-pass on the sound effects of the outside so you hear like a closed door really sounds like.<br /><br />But the pitch-shift is the absolute mininum, and I also tried to hack untz (and I do not even made a single moai sample work) and failed.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Nov 30, 2012 4:23 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Well, its not a lot of work to do sample-playback in the host, its just that the sound API for MOAI is patchy anyway and the hosts in their current form have differing requirements than, it seems, most of us.  Professional Sound API's in the gamedev world are .. well .. everyone has their chosen flavor, it seems.<br /><br />Anyway, my chosen flavor is to just use a little synth .. with parameters similar to many MIDI synths .. and render the frames of audio as possible in a separate thread, away from the MOAI realm.  It is quite easy to implement on CoreAudio and in fact the whole callback mechanism for both CoreAudio and AndroidNDK-style sound-gen are compatible enough to where most of the boring work is the platform glue code setup just to be able to run a single synthesize_audio_frame() library call..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sat Dec 01, 2012 10:12 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Okay .. I've looked at it, and I see no reason why we can't add SFXR to MOAI and have a great sound-generation solution, cross-platform-wise:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=23&amp;t=1421&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">On Linux, we can use parts of sfxr-dssi:</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">htps://github.com/smbolton/sfxr-dssi</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">On iOS, csfxr:</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">https://github.com/nevyn/cfxr</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">On Android:</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">https://github.com/boblemarin/SFXR-for-Android</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />These resources sort of support the idea of just having sfxr ported on all mobile platforms and available as a common lib, anyway.  That would be good work to do, except .. who has time?<br /><br />But, on a more immediate basis, I will continue to investigate the idea of just having sfxr functioning as a cross-platform noise-synth for MOAI.  I think it makes a lot of sense, and may enable other synth engines to be dropped in easily, sample-playback, etc.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: UNTZ : Can we change the sound pitch ?</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Dec 02, 2012 4:45 pm</strong></div>
				<div class="author">by <strong>rhoster</strong></div>
				<div class="content">It would be nice to see MOAI get some audio love of any sort.  It would seem that the features you guys are talking about would be great to have.  That being said, I haven't spent any time actually updating any of the MOAI library code - only reading it for my own edification.  I'm also swamped with work as producer/programmer on the project we're currently working on and am stuck in lua-land for the foreseeable future.  I'd like to help out in some capacity and will have more time when we move onto the audio side of things in about a month.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>