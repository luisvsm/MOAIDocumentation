<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - GUI</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>GUI</h2>
		<p><a href="gui-t236/page40.html">/forums/gui-t236/page40.html</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>3</strong> of <strong>3</strong></div>
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jun 10, 2012 7:28 am</strong></div>
				<div class="author">by <strong>andrew.lundell</strong></div>
				<div class="content">This gui has been very useful to me.<br /><br />One question, though.  Is there a way to change the font size (or style) of a widget through the layout files?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jun 10, 2012 10:34 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">In the patch that I will submit this week, we have added the ability to apply a text style to any GUI element .. its not currently possible in the existing version, but is an easy thing to add if you want to DIY instead of wait for our patch.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jun 13, 2012 6:29 pm</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">First of all, thanks Derick for a great framework. Nice job!<br /><br />I'm implementing moaigui in tandem with the state-manager from the WolfClicker tutorial. It's all pretty sweet so far, however, I've run into a little something that I don't know how to resolve.<br /><br />Since the state-manager requires me to pass all layers to it in order for it to behave nicely, I've removed the adding of the layer created by gui.GUI to the MOAIRenderMngr to avoid any rendering conflicts. In other words; this is how my refreshRenderTable in moaiguis layermgr.lua looks like:<dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> <span style="color: #aa9900; font-weight: bold;">function</span> refreshRenderTable<span style="color: #66cc66;">&#40;</span>layerList<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--MOAIRenderMgr.setRenderTable(layerList)</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /></ol></code></dd></dl>Otherwise, I'm following the samples pretty closely. I've managed to pass in user input from the event loop of the state-manager framework, so buttons are pressed, hovered, etc. <br /><br />Here's my event loop:<dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">mainMenu<span style="color: #66cc66;">.</span>onInput <span style="color: #66cc66;">=</span> <span style="color: #aa9900; font-weight: bold;">function</span> <span style="color: #66cc66;">&#40;</span> self <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> tapCount <span style="color: #66cc66;">=</span> inputmgr<span style="color: #66cc66;">:</span>getTouch <span style="color: #66cc66;">&#40;</span> <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; mainMenu<span style="color: #66cc66;">.</span>g<span style="color: #66cc66;">:</span>injectMouseMove <span style="color: #66cc66;">&#40;</span> x<span style="color: #66cc66;">,</span> y <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #66cc66;">&#40;</span> inputmgr<span style="color: #66cc66;">:</span>down <span style="color: #66cc66;">&#40;</span> <span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span> inputmgr<span style="color: #66cc66;">:</span>isDown <span style="color: #66cc66;">&#40;</span> <span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainMenu<span style="color: #66cc66;">.</span>g<span style="color: #66cc66;">:</span>injectMouseButtonDown <span style="color: #66cc66;">&#40;</span> globalData<span style="color: #66cc66;">.</span>inputconstants<span style="color: #66cc66;">.</span>LEFT_MOUSE_BUTTON <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainMenu<span style="color: #66cc66;">.</span>g<span style="color: #66cc66;">:</span>injectMouseButtonUp <span style="color: #66cc66;">&#40;</span> globalData<span style="color: #66cc66;">.</span>inputconstants<span style="color: #66cc66;">.</span>LEFT_MOUSE_BUTTON <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /></ol></code></dd></dl> where inputmgr is the inputmgr as seen at <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/master/samples/tutorials/WolfClicker/modules/input-manager.lua">https://github.com/moai/moai-dev/blob/m ... anager.lua</a><!-- m --> and mainMenu.g is the handle to the initialized gui engine, i.e. the result from gui.GUI.<br /><br />Unfortunatley, I'm not able to scroll the elements in a widgetlist. (Or more precisely, sometimes the list is scrolled a few pixels, but never by any significant amount - and certainly not like in the samples.) So the question becomes: is it possible to pass to moaigui something similar to moais isDown? Or is there another way to achieve scrolling a widgetlist by dragging of the scrollbar thumb? Any help is greatly appreciated. Thanks! <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jun 13, 2012 8:04 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I think the problem is you're removing moaigui's layer from the render list.  You have to add it, if you've already got one elsewhere, or go in the other direction, and add another Layer array to the RenderTable.  Without inclusion in this array, moaiguis layers won't be rendered.  And without inclusion in the render loop, updates (such as are necessary in scrolling) won't be visible. <br /><br />Another thing is the issue of input events and hit-testing, and so on.  moaigui needs to be layer 1 in the scene - see the readme.txt for why this is so, and how to retrieve the gui layer when you need it.  You can of course add other layers to the RenderMgr, its just that gui has to be layer 1.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jun 14, 2012 5:50 pm</strong></div>
				<div class="author">by <strong>joarb</strong></div>
				<div class="content">Thank you for your answer ibisum! It makes a lot of sense. I take it from your answer that there is no way to get scrolling work from an external event loop. Since I got the injection of position/mouse clicks to work so easily, and subsequently hovering and button clicks to work fairly easy, I was hoping scrolling would be just as easy.<br /><br />I got the scrolling to work when I added the layer to the moaigui layermgr, so I'm going to explore that avenue a little further. Thanks again! <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Jun 14, 2012 6:30 pm</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Glad you got it sorted joarb!  Hope you'll share more details with your progress as you make it.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jun 17, 2012 9:59 am</strong></div>
				<div class="author">by <strong>andrew.lundell</strong></div>
				<div class="content">Hmm... I seem to have a problem with click detection.<br /><br />The buttons work fine.   But the &quot;WidgetList&quot; usually (but not always) gives me an off-by-one error.   (To select, or pass a click event to the 3rd element, I have to click on the 2nd element.  One slot above.)<br /><br />As far as I can tell, _partition:propListForPoint(..) is returning the wrong values, but I can't fathom why.<br /><br />Is anyone else having this trouble?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jun 17, 2012 4:39 pm</strong></div>
				<div class="author">by <strong>derickdong</strong></div>
				<div class="content">What version of MOAI are you using? In the past, there had been problems with values returned by that function. As far as I can tell, though, the most recent versions are working properly. Also, what version of the GUI are you using? Are you using the project that's included with the MOAI download? I don't recommend using that; instead, download the project using the link in this thread. Are you running the examples that come with the project, or is this some of your own code? If your own, would it be possible to see the code that's giving you the problem?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jun 18, 2012 12:18 am</strong></div>
				<div class="author">by <strong>andrew.lundell</strong></div>
				<div class="content">I'm using the version of MOAIGui that came with Moai1.1. Haven't upgraded to 1.2 yet.<br /><br />I'm using my own code. I don't seem to notice the problem in the demos, but I also notice that the demos have a LOT of white space between lines in the list, I wonder if that has anything to do with it.<br /><br />Here is how I'm adding items to the list ...<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; for ii = <span style="">1</span>,<span style="">5</span> do</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row = wlist:addRow<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row:getCell<span class="br0">&#40;</span><span style="">1</span><span class="br0">&#41;</span>:setImage<span class="br0">&#40;</span> resources.getPath<span class="br0">&#40;</span>&quot;check box.png&quot;<span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row:setDim<span class="br0">&#40;</span><span style="">90</span>,<span style="">5</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row:getCell<span class="br0">&#40;</span><span style="">2</span><span class="br0">&#41;</span>:setText<span class="br0">&#40;</span> &quot;Overdue ToDo item #&quot; .. ii <span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; row:getCell<span class="br0">&#40;</span><span style="">2</span><span class="br0">&#41;</span>:setTextAlignment<span class="br0">&#40;</span>row:getCell<span class="br0">&#40;</span><span style="">2</span><span class="br0">&#41;</span>.TEXT_ALIGN_LEFT, row:getCell<span class="br0">&#40;</span><span style="">2</span><span class="br0">&#41;</span>.TEXT_ALIGN_CENTER<span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; end</div></li><br /></ol></code></dd></dl><br /><br />And in the layout ... <br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; widgetlist1 = <span class="br0">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; widget = &quot;widget list&quot;,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pos = <span class="br0">&#123;</span><span style="">0</span>, <span style="">0</span><span class="br0">&#125;</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dim = <span class="br0">&#123;</span><span style="">100</span>, <span style="">90</span><span class="br0">&#125;</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectionImage = &quot;selection image.png&quot;,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maxSelect = <span style="">1</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rowHeight = <span style="">6</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; columns = <span class="br0">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>&quot;X&quot;, <span style="">5</span> , &quot;image&quot; <span class="br0">&#125;</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>&quot;Todo List&quot;, <span style="">65</span>, &quot;label&quot;<span class="br0">&#125;</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>,</div></li><br /></ol></code></dd></dl><br /><br />Thanks for any help.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jun 18, 2012 1:15 am</strong></div>
				<div class="author">by <strong>andrew.lundell</strong></div>
				<div class="content">Hmm. I'm noticing that text boxes are occasionally showing the same problem.  So I may have some larger problem.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jun 18, 2012 8:15 pm</strong></div>
				<div class="author">by <strong>derickdong</strong></div>
				<div class="content">It seems there was a problem with the way the rect was being set for the textboxes used to display text. Frankly, I'm a little surprised text was being displayed at all. Download the project from here, and see if it works for you. I didn't really use 1.1, as it caused too many problems with my other project. It was primarily tested against 1.0, and I've done a bit of testing with 1.2, so I imagine there won't be any problems with 1.1.<br /><br /><a href="https://github.com/derickd/moaigui/downloads" class="postlink">https://github.com/derickd/moaigui/downloads</a></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jun 19, 2012 2:34 am</strong></div>
				<div class="author">by <strong>andrew.lundell</strong></div>
				<div class="content">This fixes a lot! Thank you very much!<br /><br />One final question, is it possible to make a multi-line edit box?<br /><br />To be honest, I can't find what's <span style="font-weight: bold">stopping</span> it from being multi-line, so I'm at a loss what change to make.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jun 19, 2012 8:12 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Derick:  Shouldn't this fix (to text.lua):<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">diff --git a/gui/text.lua b/gui/text.lua</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">index b19c1c4..4ebfcab <span style="">100644</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">--- a/gui/text.lua</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+++ b/gui/text.lua</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">@@ -<span style="">32</span>,<span style="">6</span> +<span style="">32</span>,<span style="">11</span> @@</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; VERSION: <span style="">0.2</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; MOAI VERSION: v1.0 r3</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+ &nbsp; &nbsp; &nbsp; UPDATED: <span style="">6</span>-<span style="">18</span>-<span style="">12</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+ &nbsp; &nbsp; &nbsp; MOAI VERSION: v1.2</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+ &nbsp; &nbsp; &nbsp; - Was not properly setting the rect for textbox in setRect<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; NOTES</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; - MOAITextBox does not seem to handle setVisible properly, so we blank out the</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string when hiding, and restore it when showing.</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">@@ -<span style="">104</span>,<span style="">7</span> +<span style="">109</span>,<span style="">7</span> @@ function _M.Text:setRect<span class="br0">&#40;</span>width, align<span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; if <span class="br0">&#40;</span>nil ~= self._textStyle<span class="br0">&#41;</span> then</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local scale = self._textStyle:getSize<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._height = scale + scale / <span style="">6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._textBox:setRect<span class="br0">&#40;</span><span style="">0</span>, self._height, self._width, <span style="">0</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._textBox:setRect<span class="br0">&#40;</span><span style="">0</span>, -self._height, self._width, <span style="">0</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; end</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;end</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br />.. be this instead?<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=6&amp;t=236&amp;start=40&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">function _M.Text:setRect<span class="br0">&#40;</span>width, align<span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; self._width = width</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; if <span class="br0">&#40;</span>nil ~= self._textStyle<span class="br0">&#41;</span> then</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local scale = self._textStyle:getSize<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local lines = self:getLines<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._height = scale + scale / <span style="">6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self._textBox:setRect<span class="br0">&#40;</span><span style="">0</span>, self._height * lines, self._width, <span style="">0</span><span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; end</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">end</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl><br /><br /><br />??</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jun 19, 2012 4:18 pm</strong></div>
				<div class="author">by <strong>derickdong</strong></div>
				<div class="content"><blockquote><div><cite>andrew.lundell wrote:</cite>One final question, is it possible to make a multi-line edit box?.</div></blockquote><br />No, edit boxes do not currently have that capability.<br /><br />@ibisum<br />Is the function getLines something you've added? I don't seem to have that in my version. What does it do?<br /><br />When working on this fix, I turned on textbox debug lines, by adding the following code:<br /><br />MOAIDebugLines.setStyle ( MOAIDebugLines.TEXT_BOX, 1, 1, 1, 1, 1 )<br /><br />Previously, the text wasn't inside the debug line box. Instead, the box appeared directly above the text, which is what was screwing up the hit detection. With the change I made, the text now correctly appears inside the debug line box.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jun 20, 2012 7:38 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Sorry derick, I've gotten a bit confused with all our changes to moaigui in the last few weeks .. and haven't really sorted out what is original moaigui code and what is stuff that was added by our team as we worked on the Nichtraucher app.  <br /><br />I will prepare a pull request with my changes - including getLines() as well as the loadLayoutFromData() method I mentioned elsewhere (which is very, very useful when dealing with multiple input forms..).  Stay tuned, patch is imminent..</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: GUI</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Jun 22, 2012 10:29 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I just wanted to report in that I've submitted a pull request for our changes to the moaigui framework, which includes a number of new features:<br /><br />* linegraph widget added to the project (you're welcome! <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br />* methods added to allow the loading of a layout and stashing as a data, for ease of switching between multiple gui layouts<br />* multilayoutdemo.lua added to project to demonstrate a) switching between multiple layouts, and b) the linegraph widget<br />* textStyle property now added to all widgets - specify a base textstyle, or use a custom one from the theme<br /><br />Hope this contribution is of use, and I hope you like the pull request derick!  <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />My fork with these changes (until derick merges the pull request) is available here:<br /><br /><!-- m --><a class="postlink" href="https://github.com/seclorum/moaigui">https://github.com/seclorum/moaigui</a><!-- m --></div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>3</strong> of <strong>3</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>