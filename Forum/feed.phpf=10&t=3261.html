<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://192.168.20.226:3000/forums/feed.php?f=10&amp;t=3261&amp;mode" />

<title>Moai Forum</title>
<subtitle>The mobile platform for pro game developers</subtitle>
<link href="http://192.168.20.226:3000/forums/index.php" />
<updated>2016-04-07T01:29:30+00:00</updated>

<author><name><![CDATA[Moai Forum]]></name></author>
<id>/forums/feed.php?f=10&amp;t=3261&amp;mode</id>
<entry>
<author><name><![CDATA[btatarov]]></name></author>
<updated>2016-04-07T01:29:30+00:00</updated>
<published>2016-04-07T01:29:30+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17974#p17974</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17974#p17974"/>
<title type="html"><![CDATA[Re: Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17974#p17974"><![CDATA[
I just stumbled upon the same problem while migrating my android ad providers to Moai 1.6. I don't know how to reproduce it every time, but it usually happens if I call it while the ad is still loading (I think). You can always do something like this:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">-- Early in your game, preferably before doing anything else with the same object</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> listener_callback_func <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFoo<span style="color: #66cc66;">.</span>setListener <span style="color: #66cc66;">&#40;</span> MOAIFoo<span style="color: #66cc66;">.</span>SOME_EVENT<span style="color: #66cc66;">,</span> <span style="color: #aa9900; font-weight: bold;">function</span> <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">  <span style="color: #aa9900; font-weight: bold;">if</span> listener_callback_func <span style="color: #aa9900; font-weight: bold;">then</span> listener_callback_func <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span> <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">-- Later when you want to set the listener</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">listener_callback_func <span style="color: #66cc66;">=</span> my_callback_func</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">-- Unset the listener</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">listener_callback_func <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">nil</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />Even if it crashes, at least it will do so while loading game/changing scenes, which is much better than in-game crashes.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1114">btatarov</a> — Thu Apr 07, 2016 1:29 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[naturally]]></name></author>
<updated>2016-04-04T20:54:42+00:00</updated>
<published>2016-04-04T20:54:42+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17966#p17966</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17966#p17966"/>
<title type="html"><![CDATA[Re: Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17966#p17966"><![CDATA[
Thanks for the report ibi<br /><br />I did have this occur once more, and while it always happens in the same place in my app, it doesn't always happen... so reproducing it is a pain.  I am confused that it happens through the KeyboardSensor event considering I don't recall pressing anything while it happens...<br /><br />I'll try upgrading to a later version sometime and see if it helps!<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1551">naturally</a> — Mon Apr 04, 2016 8:54 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[ibisum]]></name></author>
<updated>2016-03-30T06:44:15+00:00</updated>
<published>2016-03-30T06:44:15+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17956#p17956</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17956#p17956"/>
<title type="html"><![CDATA[Re: Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17956#p17956"><![CDATA[
I had something like this once in 1.5, and I seem to remember fixing it upstream at this point:<br /><br />&gt;&gt;&gt;#11 0x00000000006168b2 in MOAIKeyboardSensor::HandleEvent(ZLStream&amp;) ()<br /><br />Its possible that the MOAI host is not instantiating the handlers/de-instancing them properly, because (e.g. Android) main-GUI-thread and Android IME are on the wrong threads or a lock-fail occurs but doesn't propagate, or something like that.<br /><br />I don't have my 1.5 projects available, but I'll try to have a look next change I get and see what I fixed for those projects locally ..<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=262">ibisum</a> — Wed Mar 30, 2016 6:44 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[naturally]]></name></author>
<updated>2016-03-14T05:31:58+00:00</updated>
<published>2016-03-14T05:31:58+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17937#p17937</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17937#p17937"/>
<title type="html"><![CDATA[Re: Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17937#p17937"><![CDATA[
Strange.  I haven't had it occur for a while, so it's tricky to reproduce.  <br /><br />I did have a possibly related problem.  i got an out of memory error because:<br />- i had an animation that used a setlistener(EVENT_STOP to repeat itself <br />- when i called the root animation:clear(), it put it into an infinite loop<br /><br />I had to add a semaphor-like flag that stopped renewing the loop if clear() was being called.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1551">naturally</a> — Mon Mar 14, 2016 5:31 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[halfnelson]]></name></author>
<updated>2016-03-11T11:08:06+00:00</updated>
<published>2016-03-11T11:08:06+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17935#p17935</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17935#p17935"/>
<title type="html"><![CDATA[Re: Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17935#p17935"><![CDATA[
That is the error it throws for a call to a pure virtual function. It terminates the app. Apparently this can happen when you call a virtual function from a constructor or something.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=943">halfnelson</a> — Fri Mar 11, 2016 11:08 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[naturally]]></name></author>
<updated>2016-03-10T20:35:32+00:00</updated>
<published>2016-03-10T20:35:32+00:00</published>
<id>/forums/viewtopic.php?t=3261&amp;p=17934#p17934</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=3261&amp;p=17934#p17934"/>
<title type="html"><![CDATA[Crash on setListener?]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=3261&amp;p=17934#p17934"><![CDATA[
Running with 1.5, I get the following segfault every now and then:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="gdb" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">Program terminated with <span style="font-weight:bold;">signal</span> SIGABRT, Aborted.</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#0</span>  <span style="color: #555;">0x00007f978026ee37</span> in <span style="color: #442886; font-weight:bold;">__GI_raise</span> <span style="font-weight:bold;">&#40;</span>sig=sig@entry=<span style="">6</span><span style="font-weight:bold;">&#41;</span> at <span style="color: #0057AE; text-style:italic;">../nptl/sysdeps/unix/sysv/linux/raise.c</span>:<span style="color: #442886;">56</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="">56</span>      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or <span style="color: #442886; font-weight:bold;">directory.</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="font-weight:bold;">&#40;</span>gdb<span style="font-weight:bold;">&#41;</span> bt</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#0</span>  <span style="color: #555;">0x00007f978026ee37</span> in <span style="color: #442886; font-weight:bold;">__GI_raise</span> <span style="font-weight:bold;">&#40;</span>sig=sig@entry=<span style="">6</span><span style="font-weight:bold;">&#41;</span> at <span style="color: #0057AE; text-style:italic;">../nptl/sysdeps/unix/sysv/linux/raise.c</span>:<span style="color: #442886;">56</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#1</span>  <span style="color: #555;">0x00007f9780270528</span> in <span style="color: #442886; font-weight:bold;">__GI_abort</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span> at <span style="color: #0057AE; text-style:italic;">abort.c</span>:<span style="color: #442886;">89</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#2</span>  <span style="color: #555;">0x00007f9780b8105d</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">__gnu_cxx</span>::__verbose_terminate_handler<span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span> from <span style="color: #0057AE; text-style:italic;">/usr/lib/x86_64-linux-gnu/libstdc++.so.6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#3</span>  <span style="color: #555;">0x00007f9780b7eed6</span> in <span style="color: #442886; font-weight:bold;">??</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span> from <span style="color: #0057AE; text-style:italic;">/usr/lib/x86_64-linux-gnu/libstdc++.so.6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#4</span>  <span style="color: #555;">0x00007f9780b7ef21</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">std</span>::terminate<span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span> from <span style="color: #0057AE; text-style:italic;">/usr/lib/x86_64-linux-gnu/libstdc++.so.6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#5</span>  <span style="color: #555;">0x00007f9780b7fa6f</span> in <span style="color: #442886; font-weight:bold;">__cxa_pure_virtual</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span> from <span style="color: #0057AE; text-style:italic;">/usr/lib/x86_64-linux-gnu/libstdc++.so.6</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#6</span>  <span style="color: #555;">0x00000000006db39a</span> in <span style="color: #006E26;">MOAIEventSource</span>::SetListener<span style="font-weight:bold;">&#40;</span>lua_State*, unsigned <span style="color: #442886; font-weight:bold;">int<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#7</span>  <span style="color: #555;">0x00000000006db7bb</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">MOAIInstanceEventSource</span>::_setListener<span style="font-weight:bold;">&#40;</span>lua_State*<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#8</span>  <span style="color: #555;">0x0000000000add538</span> in <span style="color: #442886; font-weight:bold;">lj_BC_FUNCC</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#9</span>  <span style="color: #555;">0x0000000000acd480</span> in <span style="color: #442886; font-weight:bold;">lua_pcall</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#10</span> <span style="color: #555;">0x00000000006c73b0</span> in <span style="color: #006E26;">MOAILuaState</span>::DebugCall<span style="font-weight:bold;">&#40;</span>int, <span style="color: #442886; font-weight:bold;">int<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#11</span> <span style="color: #555;">0x00000000006168b2</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">MOAIKeyboardSensor</span>::HandleEvent<span style="font-weight:bold;">&#40;</span>ZLStream&amp;<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#12</span> <span style="color: #555;">0x00000000005bbfd5</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">MOAIInputMgr</span>::Update<span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#13</span> <span style="color: #555;">0x00000000006296cd</span> in <span style="color: #006E26;">MOAISim</span>::StepSim<span style="font-weight:bold;">&#40;</span>double, unsigned int<span style="font-weight:bold;">&#41;</span> <span style="font-weight:bold;">&#91;</span>clone <span style="color: #442886; font-weight:bold;">.constprop.25<span style="font-weight:bold;">&#93;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#14</span> <span style="color: #555;">0x000000000062d7e2</span> in <span style="color: #442886; font-weight:bold;"><span style="color: #006E26;">MOAISim</span>::Update<span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#15</span> <span style="color: #555;">0x0000000000578136</span> in <span style="color: #442886; font-weight:bold;">_onTimer<span style="font-weight:bold;">&#40;</span>int<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#16</span> <span style="color: #555;">0x0000000000706346</span> in <span style="color: #442886; font-weight:bold;">glutMainLoopEvent</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#17</span> <span style="color: #555;">0x000000000070679d</span> in <span style="color: #442886; font-weight:bold;">glutMainLoop</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#18</span> <span style="color: #555;">0x0000000000578636</span> in GlutHost<span style="font-weight:bold;">&#40;</span>int, <span style="color: #442886; font-weight:bold;">char**<span style="font-weight:bold;">&#41;</span></span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#19</span> <span style="color: #555;">0x00007f9780259ec5</span> in <span style="color: #442886; font-weight:bold;">__libc_start_main</span> <span style="font-weight:bold;">&#40;</span>main=<span style="color: #555;">0x573d50</span> &lt;main&gt;, argc=<span style="">6</span>, argv=<span style="color: #555;">0x7ffec6619b58</span>, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=<span style="color: #555;">0x7ffec6619b48</span><span style="font-weight:bold;">&#41;</span> at <span style="color: #0057AE; text-style:italic;">libc-start.c</span>:<span style="color: #442886;">287</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #006600;">#20</span> <span style="color: #555;">0x0000000000577ddf</span> in <span style="color: #442886; font-weight:bold;">_start</span> <span style="font-weight:bold;">&#40;</span><span style="font-weight:bold;">&#41;</span></div></li><br /></ol></code></dd></dl><br /><br />I'm not *quite* sure what to make of it.  Is this happening during one of my action/timer :setListener() calls?<br /><br />How would I get more info about it so I could track it to the Lua code?<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1551">naturally</a> — Thu Mar 10, 2016 8:35 pm</p><hr />
]]></content>
</entry>
</feed>