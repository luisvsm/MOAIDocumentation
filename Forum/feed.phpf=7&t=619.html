<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://192.168.20.226:3000/forums/feed.php?f=7&amp;t=619&amp;mode" />

<title>Moai Forum | The mobile platform for pro game developers</title>
<subtitle>The mobile platform for pro game developers</subtitle>
<link href="http://192.168.20.226:3000/forums/index.php" />
<updated>2012-03-29T00:37:13+00:00</updated>

<author><name><![CDATA[Moai Forum | The mobile platform for pro game developers]]></name></author>
<id>/forums/feed.php?f=7&amp;t=619&amp;mode</id>
<entry>
<author><name><![CDATA[sean]]></name></author>
<updated>2012-03-29T00:37:13+00:00</updated>
<published>2012-03-29T00:37:13+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3057#p3057</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3057#p3057"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3057#p3057"><![CDATA[
Sorry. Another good catch. We handle this properly in our game (Wolf Toss), but obviously never added the code to the sample app. Again, very sorry for the oversight. At some point in the near future, we're going to unify the Wolf Toss iOS code with the sample app, which should prevent this from happening in the future. Thanks guys!<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=289">sean</a> — Thu Mar 29, 2012 12:37 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[bslayerw]]></name></author>
<updated>2012-03-28T21:08:58+00:00</updated>
<published>2012-03-28T21:08:58+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3048#p3048</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3048#p3048"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3048#p3048"><![CDATA[
I've added this fix to my pull request. Sorry for the forum spam <img src="/forums/images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=270">bslayerw</a> — Wed Mar 28, 2012 9:08 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[bslayerw]]></name></author>
<updated>2012-03-28T20:38:57+00:00</updated>
<published>2012-03-28T20:38:57+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3045#p3045</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3045#p3045"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3045#p3045"><![CDATA[
Either I'm still missing something or I've helped discovered another bug <img src="/forums/images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />According to the Facebook documentation [<a href="https://developers.facebook.com/docs/mobile/ios/build/" class="postlink">https://developers.facebook.com/docs/mobile/ios/build/</a>]:<br /><br /><blockquote class="uncited"><div><br />If the app is running in a version of iOS that supports multitasking, and if the device has the Facebook app of version 3.2.3 or greater installed, the SDK attempts to open the authorization dialog within the Facebook app. After the user grants or declines the authorization, the Facebook app redirects back to the calling app, passing the authorization token, expiration, and any other parameters the Facebook OAuth server may return.<br /></div></blockquote><br /><br />What's happening for me is that the FB delegates never get called because the Facebook app is being opened to do the login. Once complete the Facebook app relaunches my game with the token etc. The problem is, I can't find anywhere in the iOS host where this is handled. Again, from the documentation:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">// Pre iOS 4.2 support</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application handleOpenURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #b1b100;">return</span> <span style="color: #009900;">&#91;</span>facebook handleOpenURL<span style="color: #339933;">:</span>url<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">// For iOS 4.2+ support</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application openURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    sourceApplication<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSString <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>sourceApplication annotation<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span>annotation <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #b1b100;">return</span> <span style="color: #009900;">&#91;</span>facebook handleOpenURL<span style="color: #339933;">:</span>url<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br /><blockquote class="uncited"><div><br />The relevant method is called by iOS when the Facebook App redirects to the app during the SSO process. The call to Facebook::handleOpenURL: provides the app with the user's credentials.<br /></div></blockquote><br />The iOS host doesn't have these methods defined. <br /><br />I'm going to add then <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />Update: I've confirmed this behavior. I added the following method to the AppDelegate in the iOS host source:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">  <span style="color: #339933;">-</span> <span style="color: #009900;">&#40;</span>BOOL<span style="color: #009900;">&#41;</span>application<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>UIApplication <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>application </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">              openURL<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSURL <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>url</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    sourceApplication<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>NSString <span style="color: #339933;">*</span><span style="color: #009900;">&#41;</span>sourceApplication </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">           annotation<span style="color: #339933;">:</span><span style="color: #009900;">&#40;</span>id<span style="color: #009900;">&#41;</span>annotation <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">      AKUAppOpenFromURL<span style="color: #009900;">&#40;</span>url<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #b1b100;">return</span> YES<span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">  <span style="color: #009900;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />this gets called from the Facebook app on iOS after authentication. The url &quot;openURL&quot; looks something like this:<br /><br />fb{appIDhere}://authorize#access_token={long_ass_hash}&amp;code={another_long_ass_hash}&amp;expires_in=5180418<br /><br />FYI, I saw some strange behavior with Wolf Toss when launching Facebook. I don't know if it's related.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=270">bslayerw</a> — Wed Mar 28, 2012 8:38 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[sean]]></name></author>
<updated>2012-03-28T20:13:48+00:00</updated>
<published>2012-03-28T20:13:48+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3044#p3044</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3044#p3044"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3044#p3044"><![CDATA[
Great catch. I'll get the pull request shortly. Thanks!<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=289">sean</a> — Wed Mar 28, 2012 8:13 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[bslayerw]]></name></author>
<updated>2012-03-28T19:11:47+00:00</updated>
<published>2012-03-28T19:11:47+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3040#p3040</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3040#p3040"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3040#p3040"><![CDATA[
@sean. There's a bug in getToken which causes a crash if it's nil:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">line <span style="color: #0000dd;">25</span><span style="color: #339933;">:</span>MOAIFacebookIOS<span style="color: #339933;">::</span><span style="color: #202020;">Get</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #202020;">mToken</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span> MOAIFacebookIOS<span style="color: #339933;">::</span><span style="color: #202020;">Get</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #202020;">mFacebook</span> accessToken <span style="color: #009900;">&#93;</span> UTF8String <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />This will crash if mFacebook or accessToken is nil. I've put in a pull request to return nil if this happens.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=270">bslayerw</a> — Wed Mar 28, 2012 7:11 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[adam]]></name></author>
<updated>2012-03-27T23:19:36+00:00</updated>
<published>2012-03-27T23:19:36+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3006#p3006</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3006#p3006"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3006#p3006"><![CDATA[
EDIT: sean beat me to it, but I'll leave the code ( snippet from internal project ):<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> <span style="color: #aa9900; font-weight: bold;">function</span> loginSuccessCallback <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        mToken <span style="color: #66cc66;">=</span> MOAIFacebook<span style="color: #66cc66;">.</span>getToken <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        sendRequest <span style="color: #66cc66;">&#40;</span> msg <span style="color: #66cc66;">&#41;</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook <span style="color: #aa9900; font-weight: bold;">then</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook<span style="color: #66cc66;">.</span>setListener <span style="color: #aa9900; font-weight: bold;">then</span> MOAIFacebook<span style="color: #66cc66;">.</span>setListener <span style="color: #66cc66;">&#40;</span> MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_LOGIN<span style="color: #66cc66;">,</span> loginSuccessCallback <span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #aa9900; font-weight: bold;">if</span> MOAIFacebook<span style="color: #66cc66;">.</span>login <span style="color: #aa9900; font-weight: bold;">then</span> MOAIFacebook<span style="color: #66cc66;">.</span>login <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">end</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=229">adam</a> — Tue Mar 27, 2012 11:19 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[sean]]></name></author>
<updated>2012-03-27T23:18:18+00:00</updated>
<published>2012-03-27T23:18:18+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3005#p3005</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3005#p3005"/>
<title type="html"><![CDATA[Re: Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3005#p3005"><![CDATA[
You can definitely get the token (using MOAIFacebook.getToken()), but don't do so until your SESSION_DID_LOGIN callback is called, which is ONLY called upon INITIAL successful login. That is, after a successful login from any given app, you can't call login again and expect a callback to DID_LOGIN - you need to either cache or, even better, check the token first using getToken before calling login.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=289">sean</a> — Tue Mar 27, 2012 11:18 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[bslayerw]]></name></author>
<updated>2012-03-27T22:11:34+00:00</updated>
<published>2012-03-27T22:11:34+00:00</published>
<id>/forums/viewtopic.php?t=619&amp;p=3001#p3001</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=619&amp;p=3001#p3001"/>
<title type="html"><![CDATA[Facebook Integration - access tokens]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=619&amp;p=3001#p3001"><![CDATA[
I just wanted to double check I'm not missing something before I go about implementation this. It seems as though while MOAIFacebook is exposed to lua there doesn't seem to be a way to get an access token once the user is logged in. I want to use MOAIFacebook to authenticate my app then and use the access token to access FB Open Graph (these methods aren't exposed so I'm just going to use lua json for this for now).<br /><br />The following code with crash (getToken throws an Objective-C exception):<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">   MOAIFacebook<span style="color: #66cc66;">.</span>init<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;myidhere&quot;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>DIALOG_DID_NOT_COMPLETE<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>DIALOG_DID_COMPLETE<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_LOGIN<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>setListener<span style="color: #66cc66;">&#40;</span>MOAIFacebook<span style="color: #66cc66;">.</span>SESSION_DID_NOT_LOGIN<span style="color: #66cc66;">,</span> FBCallback <span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAIFacebook<span style="color: #66cc66;">.</span>login<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #0000aa;">print</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;Facebook token = &quot;</span><span style="color: #66cc66;">..</span> MOAIFacebook<span style="color: #66cc66;">.</span>getToken<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- BOOM</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />It doesn't seem like my listen is getting called and even if it did I'd have no way to get the access token. Unless I'm missing something I'm going to have to set a delegate in native code and store the access token in the user defaults. <br /><br />FYI, this brings up another point, it's not pressing but it would be nice to handle uncaught objective-c exceptions and print a lua stack trace.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=270">bslayerw</a> — Tue Mar 27, 2012 10:11 pm</p><hr />
]]></content>
</entry>
</feed>