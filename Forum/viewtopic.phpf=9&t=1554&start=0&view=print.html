<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - Translating Android 9patch into MOAIStretchPatch2D</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Translating Android 9patch into MOAIStretchPatch2D</h2>
		<p><a href="translating-android-9patch-into-moaistretchpatch2d-t1554/index.html">/forums/translating-android-9patch-into-moaistretchpatch2d-t1554/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jan 13, 2013 6:25 am</strong></div>
				<div class="author">by <strong>dbrain</strong></div>
				<div class="content">Hello,<br /><br />Sorry if this is the wrong forum. I'm new to MOAI.<br />I was wondering if anyone could give me a good how to / example on how to stretch my image, as Android would with a 9patch, using MOAIStretchPatch2D.<br /><br />Android 9patches you draw black pixels in a 1 pixel transparent border around the image. This tells Android which lines are safe to scale and keeps the rest at it's current size.<br />MOAIStretchPatch2D talks in columns, rows and uvrects as far as scaling goes. How does this translate?<br /><br />E.g. say I have a white square 100x100 image with a 25px block of colour in each corner. How would I tell MOAIStretchPatch2D to fill the screen, stretching the white but keeping the colours at 25px in each corner?<br /><br />Thanks!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jan 13, 2013 7:42 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I don't have an answer to your question about MOAIStretchPatch2D, never used it directly myself, but there is strong 9patch support in the Hanappe framework for MOAI:<br /><br />    <!-- m --><a class="postlink" href="https://github.com/makotok/Hanappe.git">https://github.com/makotok/Hanappe.git</a><!-- m --><br /><br />    See:  hanappe-samples/bin/samples/display/ninepatch_sample.lua<br />    And: hanappe-framework/src/hp/display/NinePatch.lua<br /><br />.. which uses MOAIStretchPatch2D, and might give you some clues.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jan 13, 2013 11:21 am</strong></div>
				<div class="author">by <strong>dbrain</strong></div>
				<div class="content">Thanks ibisum. I actually had a look at this before posting, but it wasn't much help.<br /><br />The image I'm trying to 9 patch I essentially want to scale a 5px section horizontally (starting at X: 167px Y: 0) and a 5px section vertically (starting at X: 0 Y: 124px). Looking at most of the samples it looks like MOAIStretchPatch2D creates a grid and stretches one of the grid items rather than the kind of adhoc &quot;stretch these areas&quot; I'm looking for.<br /><br />reserveUVRects &amp; setUVRect may be what I'm after but I can't work how to use them to achieve what I'm after.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jan 13, 2013 11:56 am</strong></div>
				<div class="author">by <strong>makotok1123</strong></div>
				<div class="content"><blockquote><div><cite>dbrain wrote:</cite>Thanks ibisum. I actually had a look at this before posting, but it wasn't much help.<br /><br />The image I'm trying to 9 patch I essentially want to scale a 5px section horizontally (starting at X: 167px Y: 0) and a 5px section vertically (starting at X: 0 Y: 124px). Looking at most of the samples it looks like MOAIStretchPatch2D creates a grid and stretches one of the grid items rather than the kind of adhoc &quot;stretch these areas&quot; I'm looking for.<br /><br />reserveUVRects &amp; setUVRect may be what I'm after but I can't work how to use them to achieve what I'm after.</div></blockquote><br /><br />Hello. <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /> <br /><br />Is the same thing you want to achieve as well NinePatch of Hanappe.<br />I think the ratio is just different.<br />Therefore, if you specify the part you want to stretch, it will work well.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jan 13, 2013 7:19 pm</strong></div>
				<div class="author">by <strong>dbrain</strong></div>
				<div class="content">Thanks makotok1123. Is it? Do I define that kind of thing in rows/columns?<br />The way I understand it is that creates a grid and scales the intersect between a colStretch=true row and a colStretch=true column. Does this mean to make it work I would have to define say 100 columns (to split my image by 5px) and work out which part of 100 is the stretch area? Same with rows.<br /><br />Android description is here: <!-- m --><a class="postlink" href="http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch">http://developer.android.com/guide/topi ... nine-patch</a><!-- m --><br /><br />Here's the android 9patched image to be more clear about what I'm after. There's a 1px transparent border, black pixels in there define the stretch area.<br /><div class="inline-attachment">
		<dl class="file">
			<dt class="attach-image"><img src="download/file.php%3Fid=117.html" alt="bgTest2.9.png" title="Image I'm trying to 9patch / bgTest2.9.png" onclick="viewableArea(this);" /></dt>
			<dd><em>Image I'm trying to 9patch</em></dd>
			<dd>bgTest2.9.png (24.87 KiB) Viewed 241 times</dd>
		</dl>
		</div></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jan 14, 2013 5:27 am</strong></div>
				<div class="author">by <strong>makotok1123</strong></div>
				<div class="content">I tried to implement a simple NinePatche.<br />Do you think there is?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jan 14, 2013 9:05 pm</strong></div>
				<div class="author">by <strong>dbrain</strong></div>
				<div class="content">Oh, wow.. thanks makotok1123. That look's awesome.<br />Is there a nice way to make it fill the full screen without a stretch animation? I noticed all of the StretchPatch2D examples had a scale in them. I guess I could setScale instead of moveScl, will have to look into how to make that fill the viewport.<br /><br />Should be enough to go on with anyway.. thanks heaps!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jan 14, 2013 9:31 pm</strong></div>
				<div class="author">by <strong>dbrain</strong></div>
				<div class="content">I managed to full screen it without animation using prop:setScl(SCREEN_WIDTH / imageWidth, SCREEN_HEIGHT / imageHeight) if anyone else is following.<br /><br />That's really awesome makotok1123. Didn't realise you were actually reading the transparent edging to work out where to stretch (new to lua and moai, took me a second).<br /><br />EDIT: I'm also rounding the scaled X/Y up to 2 decimal places as there seemed to be some rounding error that made the edges lose a pixel or two.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Translating Android 9patch into MOAIStretchPatch2D</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jan 14, 2013 10:11 pm</strong></div>
				<div class="author">by <strong>makotok1123</strong></div>
				<div class="content">@dbrain<br /><br />Thank you. <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /> <br /><br />I was in a hurry to implement.<br />There may be problems with the details.<br /><br />Set the UV, I have removed the edge. (Rounding error has been concerned ...)<br />You can also copy the MOAIImage, remove the edge.<br />That way might be nice in some cases.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC - 8 hours [ <abbr title="Daylight Saving Time">DST</abbr> ]<br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>