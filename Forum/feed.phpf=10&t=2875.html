<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
<link rel="self" type="application/atom+xml" href="http://192.168.20.226:3000/forums/feed.php?f=10&amp;t=2875&amp;mode" />

<title>Moai Forum</title>
<subtitle>The mobile platform for pro game developers</subtitle>
<link href="http://192.168.20.226:3000/forums/index.php" />
<updated>2014-11-06T07:45:43+00:00</updated>

<author><name><![CDATA[Moai Forum]]></name></author>
<id>/forums/feed.php?f=10&amp;t=2875&amp;mode</id>
<entry>
<author><name><![CDATA[JDance]]></name></author>
<updated>2014-11-06T07:45:43+00:00</updated>
<published>2014-11-06T07:45:43+00:00</published>
<id>/forums/viewtopic.php?t=2875&amp;p=15823#p15823</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=2875&amp;p=15823#p15823"/>
<title type="html"><![CDATA[Re: [1.5] touch error on ios 8.1 in landscape]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=2875&amp;p=15823#p15823"><![CDATA[
I also run landscape and had a lot of problems getting this right. I don't think I have the same version of the host as you are using. Anyway this is what I did in case anyone struggles with the same problems. I have not made a pull request because my host is out of date and I have coded it explicitly for landscape now. And I used a slightly different function to get screen size independent of iOS version - just use max/min width/height. I did this to avoid any version problems.<br /><br />MoaiAppDelegate.mm<br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">-</span><span style="color: #66cc66;">&#40;</span> BOOL <span style="color: #66cc66;">&#41;</span> application<span style="color: #66cc66;">:</span><span style="color: #66cc66;">&#40;</span> UIApplication<span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#41;</span>application didFinishLaunchingWithOptions<span style="color: #66cc66;">:</span><span style="color: #66cc66;">&#40;</span> NSDictionary<span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#41;</span>launchOptions <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">...</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    CGRect screenRectLandscape <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#91;</span> MoaiAppDelegate screenRectForLandscape<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    mMoaiView <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#91;</span> MoaiView alloc <span style="color: #66cc66;">&#93;</span> initWithFrame<span style="color: #66cc66;">:</span> screenRectLandscape <span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">...</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    mWindow <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#91;</span> UIWindow alloc <span style="color: #66cc66;">&#93;</span> initWithFrame<span style="color: #66cc66;">:</span> <span style="color: #66cc66;">&#91;</span> UIScreen mainScreen <span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>bounds <span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">...</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">//</span><span style="color: #808080; font-style: italic;">----------------------------------------------------------------//</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">+</span><span style="color: #66cc66;">&#40;</span> CGRect <span style="color: #66cc66;">&#41;</span>screenRectForLandscape <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    CGSize screenSize <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#91;</span>UIScreen mainScreen<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">.</span>bounds<span style="color: #66cc66;">.</span>size<span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #aa9900; font-weight: bold;">return</span> CGRectMake<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> MAX<span style="color: #66cc66;">&#40;</span>screenSize<span style="color: #66cc66;">.</span>width<span style="color: #66cc66;">,</span> screenSize<span style="color: #66cc66;">.</span>height<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> MIN<span style="color: #66cc66;">&#40;</span>screenSize<span style="color: #66cc66;">.</span>width<span style="color: #66cc66;">,</span> screenSize<span style="color: #66cc66;">.</span>height<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />MoaiView.mm<br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">-</span><span style="color: #66cc66;">&#40;</span> void <span style="color: #66cc66;">&#41;</span> moaiInit <span style="color: #66cc66;">:</span><span style="color: #66cc66;">&#40;</span> UIApplication<span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#41;</span>application <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">...</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #66cc66;">//</span> only use the views already set width<span style="color: #66cc66;">/</span>height</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        AKUSetScreenSize <span style="color: #66cc66;">&#40;</span> mWidth<span style="color: #66cc66;">,</span> mHeight <span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        AKUSetScreenDpi<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#91;</span> self guessScreenDpi <span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        AKUSetViewSize <span style="color: #66cc66;">&#40;</span> mWidth<span style="color: #66cc66;">,</span> mHeight <span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">...</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><br /><br />AKU-iphone.mm<br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">//</span><span style="color: #aa9900; font-weight: bold;">in</span> AKUIphoneInit <span style="color: #0000aa;">remove</span> the lines settings resolution <span style="color: #66cc66;">-</span> since this is done through AKUSetScreenSize</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /></ol></code></dd></dl><p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=1128">JDance</a> — Thu Nov 06, 2014 7:45 am</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[NickoftheSouth]]></name></author>
<updated>2014-10-29T21:49:04+00:00</updated>
<published>2014-10-29T21:49:04+00:00</published>
<id>/forums/viewtopic.php?t=2875&amp;p=15768#p15768</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=2875&amp;p=15768#p15768"/>
<title type="html"><![CDATA[Re: [1.5] touch error on ios 8.1 in landscape]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=2875&amp;p=15768#p15768"><![CDATA[
Ok so I found out what was going on here for anyone else that has had a similar issue.<br />This stemed from Apple suddenly changing the way that bounds are used in certian instances in the iOS 8.1 update.<br />The root of this was in screenSizeOrientationIndependent<br /><br />for example our game went live and the 8.1 update broke the layout entirely.<br />This was due to the width and height being swapped on the main screen bounds.<br /><br />to fix the problem from 8.1 we changed the method to be:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #339933;">+</span><span style="color: #009900;">&#40;</span>CGRect<span style="color: #009900;">&#41;</span>screenSizeOrientationIndependent <span style="color: #009900;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    CGRect screenSize <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span>UIScreen mainScreen<span style="color: #009900;">&#93;</span>.<span style="color: #202020;">bounds</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    NSString <span style="color: #339933;">*</span>reqSysVer <span style="color: #339933;">=</span> @<span style="color: #ff0000;">&quot;8.1&quot;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    NSString <span style="color: #339933;">*</span>currSysVer <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span>UIDevice currentDevice<span style="color: #009900;">&#93;</span> systemVersion<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #009900;">&#91;</span>currSysVer compare<span style="color: #339933;">:</span>reqSysVer options<span style="color: #339933;">:</span>NSNumericSearch<span style="color: #009900;">&#93;</span> <span style="color: #339933;">!=</span> NSOrderedAscending<span style="color: #009900;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #b1b100;">return</span> CGRectMake<span style="color: #009900;">&#40;</span><span style="color: #0000dd;">0</span><span style="color: #339933;">,</span><span style="color: #0000dd;">0</span><span style="color: #339933;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            MIN<span style="color: #009900;">&#40;</span>screenSize.<span style="color: #202020;">size</span>.<span style="color: #202020;">width</span><span style="color: #339933;">,</span> screenSize.<span style="color: #202020;">size</span>.<span style="color: #202020;">height</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            MAX<span style="color: #009900;">&#40;</span>screenSize.<span style="color: #202020;">size</span>.<span style="color: #202020;">width</span><span style="color: #339933;">,</span> screenSize.<span style="color: #202020;">size</span>.<span style="color: #202020;">height</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #b1b100;">else</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #b1b100;">return</span> screenSize<span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><br /></ol></code></dd></dl><br /><br />(yes that is apples way of checking the current ios version in code  <img src="images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /> )<br /><br />turns out this is only the case for the view but not the window.<br />the window needed the bounds as they appear in the current orentation.<br /><br />to fix I changed the didFinishLaunchingWithOptions method like so:<br /><br /><dl class="codebox"><dt>Code: </dt><dd><code style="line-height: 30%;"><ol class="c" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    mMoaiView <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span> MoaiView alloc <span style="color: #009900;">&#93;</span> initWithFrame<span style="color: #339933;">:</span><span style="color: #009900;">&#91;</span> MoaiAppDelegate screenSizeOrientationIndependent<span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    ...</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #202020;">mMoaiVC</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span><span style="color: #009900;">&#91;</span> MoaiVC alloc <span style="color: #009900;">&#93;</span> init <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#91;</span> mMoaiVC setView<span style="color: #339933;">:</span>mMoaiView <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"> </div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    mWindow <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span>UIWindow new<span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    mWindow.<span style="color: #202020;">frame</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#91;</span>UIScreen mainScreen<span style="color: #009900;">&#93;</span>.<span style="color: #202020;">bounds</span><span style="color: #339933;">;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    ...</div></li><br /></ol></code></dd></dl><br /><br />Apple better not 'fix' this in the next update.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=870">NickoftheSouth</a> — Wed Oct 29, 2014 9:49 pm</p><hr />
]]></content>
</entry>
<entry>
<author><name><![CDATA[NickoftheSouth]]></name></author>
<updated>2014-10-29T00:32:27+00:00</updated>
<published>2014-10-29T00:32:27+00:00</published>
<id>/forums/viewtopic.php?t=2875&amp;p=15758#p15758</id>
<link href="http://192.168.20.226:3000/forums/viewtopic.php?t=2875&amp;p=15758#p15758"/>
<title type="html"><![CDATA[[1.5] touch error on ios 8.1 in landscape]]></title>

<content type="html" xml:base="/forums/viewtopic.php?t=2875&amp;p=15758#p15758"><![CDATA[
Looks like this might be a known bug with ios 8 and above but I've only noticed it in regards to MOAI since 8.1 came out.  <br /><br />Our game is in landscape.<br />All the touch still works execpt the right side of the screen (aprox 1/3ed), which produces the following error:<br /><br /><blockquote class="uncited"><div><br />2014-10-29 13:27:11.022 moai[746:171218] unexpected nil window in _UIApplicationHandleEventFromQueueEvent, _windowServerHitTestWindow: &lt;UIWindow: 0x1773fdf0; frame = (0 0; 320 568); gestureRecognizers = &lt;NSArray: 0x17740440&gt;; layer = &lt;UIWindowLayer: 0x17740000&gt;&gt;<br /></div></blockquote><br /><br />now I found this stack overflow post that seemed relevent: <a href="http://stackoverflow.com/questions/25963101/unexpected-nil-window-in-uiapplicationhandleeventfromqueueevent" class="postlink">http://stackoverflow.com/questions/25963101/unexpected-nil-window-in-uiapplicationhandleeventfromqueueevent</a><br />The suggested fix is to add:<br />mWindow.frame = [[UIScreen mainScreen] bounds];<br /><br />and replace initWithFrame with the call [UIWindow new].<br /><br />in the app delegate after the the call to makeKeyAndVisible.<br />So I tried this and it seemed to fix the touch issue, however all my visuals were magnified double and ran off the screen to the right and bottom.<br />I tried various combinations of setting the frame but nothing seems to work.<p>Statistics: Posted by <a href="http://192.168.20.226:3000/forums/memberlist.php?mode=viewprofile&amp;u=870">NickoftheSouth</a> — Wed Oct 29, 2014 12:32 am</p><hr />
]]></content>
</entry>
</feed>