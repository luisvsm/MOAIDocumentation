<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - Alpha not applied with MOAIDraw.</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Moai SDK" href="../feed.php%3Ff=7.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Alpha not applied with MOAIDraw." href="../feed.php%3Ff=7&amp;t=291.html" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/alpha-not-applied-with-moaidraw-t291/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../moai-development-forums.html">Moai Development Forums</a> <strong>&#8249;</strong> <a href="../moai-sdk-developer-support.html">Moai SDK</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="../memberlist.php%3Fmode=email&amp;t=291.html" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="../viewtopic.php%3Ff=7&amp;t=291&amp;start=0&amp;view=print.html" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">Alpha not applied with MOAIDraw.</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Discussion about using Moai SDK - post questions, issues, and ideas here.<br /></div>
	<p>
		
			<strong>Moderators:</strong> naturally, seebs
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			20 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p1381" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p1381">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Mon Dec 26, 2011 9:07 am </p>

			

			<div class="content"><a href="http://192.168.20.226:3000/docs/class_m_o_a_i_gfx_device.html#a6bc4ae09569266a3abf3681ecd4b9f6c" target="_blank">MOAIGfxDevice.setPenColor</a> is not applying Alpha (ex. 0.5) with MOAIDraw.fillRect, at least not on Win32.
<br />
<br />I did not post this in the <a href="http://192.168.20.226:3000/forums/bug-reports/" target="_blank">Bug Reports</a> forum because I am not sure if this <a href="http://www.urbandictionary.com/define.php?term=pebcak" target="_blank">PEBCAK</a>, or a legitimate issue.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1381">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1394" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1394">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Mon Dec 26, 2011 5:46 pm </p>

			

			<div class="content">Alpha with setPenColor and fillRect does appear to be partially working for me.  At 0.5, there is some transparency.  However, 0.001 looks the same as 0.5, as in, not faint at all ... ?</div>

			

		</div>

		
			<dl class="postprofile" id="profile1394">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1397" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1397">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mervills.email</strong> &raquo; Mon Dec 26, 2011 7:50 pm </p>

			

			<div class="content">Would love to help but I can't find any documentation relating to MOAIDraw... what are the function arguments for MOAIDraw.fillRect?</div>

			

		</div>

		
			<dl class="postprofile" id="profile1397">
			<dt>
				<strong>mervills.email</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 15</dd><dd><strong>Joined:</strong> Mon Dec 19, 2011 9:48 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1399" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1399">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 3:06 am </p>

			

			<div class="content">I, too, did not find the documentation for the MOAIDraw API, so <a href="http://192.168.20.226:3000/forums/bug-reports/moaidraw-not-included-in-online-docs/" target="_blank">posted it in the Bug Reports forum</a>.
<br />
<br />The function arguments for fillRect are in the GitHub project, in <a href="https://github.com/moai/moai-dev/blob/master/src/moaicore/MOAIDraw.cpp" target="_blank">MOAIDraw.cpp</a>.
<br />
<br />I believe this issue involves the pen color.  There is a commit, on Dec. 20, titled "<a href="https://github.com/moai/moai-dev/compare/cf861f335a...362fa615de" target="_blank">fixed pen color bug</a>...", but have not confirmed this is related.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1399">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1417" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1417">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Tue Dec 27, 2011 3:19 pm </p>

			

			<div class="content">Will check into it. Moai's graphics objects (should) default to a blend mode that expects premultiplied alpha. Are your test colors using premultiplied alpha?</div>

			

		</div>

		
			<dl class="postprofile" id="profile1417">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1420" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1420">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 3:27 pm </p>

			

			<div class="content">I am a little unclear on how to determine if my test colors are using premultiplied alpha. >doh!<
<br />Here is the code:
<br />
<br /><blockquote>
<br />MOAIGfxDevice.setPenColor ( 0, 1, 1, 0.5 )
<br />MOAIDraw.fillRect ( x1,y1, x2,y2 )
<br />
<br /></blockquote>
<br />If I set the Alpha to, for example, 0.001 instead of 0.5, it visually appears the same, i.e. not faint at all, just a little transparency.
<br />
<br />I can attempt to create a short script file that reproduces the issue.  I wanted to check first to determine if I was not setting a blend mode or such, to get my expected results. </div>

			

		</div>

		
			<dl class="postprofile" id="profile1420">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1426" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1426">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Tue Dec 27, 2011 3:53 pm </p>

			

			<div class="content">Premultipled alpha just means you multiply the R, G, B components of your color with A. So to get a cyan with 50% opacity you'd do:
<br />
<br />MOAIGfxDevice.setPenColor ( 0, 0.5, 0.5, 0.5 ) -- 50% transparent cyan
<br />
<br />Specifying your colors this way (with the proper blending mode) also lets you control the additive quality of a color. So:
<br />
<br />MOAIGfxDevice.setPenColor ( 0, 1, 1, 1 ) -- opaque
<br />
<br />MOAIGfxDevice.setPenColor ( 0, 1, 1, 0 ) -- additive
<br />
<br />Will look identical on a black or dark background, but on a textured background the latter color should appear to be additive whereas the former should appear to be opaque. The difference may be more obvious with darker colors:
<br />
<br />MOAIGfxDevice.setPenColor ( 0, 0.25, 0.25, 1 ) -- opaque
<br />
<br />MOAIGfxDevice.setPenColor ( 0, 0.25, 0.25, 0 ) -- additive</div>

			

		</div>

		
			<dl class="postprofile" id="profile1426">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1427" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1427">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 3:56 pm </p>

			

			<div class="content">Understood.  How do I set the blend mode for fillRect?</div>

			

		</div>

		
			<dl class="postprofile" id="profile1427">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1429" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1429">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Tue Dec 27, 2011 4:02 pm </p>

			

			<div class="content">The blend mode lives in the MOAIProp2D. If I recall correctly, the MOAIDraw samples uses a MOAIScriptDeck with a callback for immediate mode drawing. So you'd just use MOAIProp2D's setBlendMode (). You can pass that one of the presets (MOAIProp2D.BLEND_NORMAL, MOAIProp2D.BLEND_ADD, MOAIProp2D.BLEND_MULTIPLY) or a proper OpenGL blend mode - all the expected OpenGL consts should be exposed through MOAIProp2D.
<br />
<br />But I'm pretty sure the prop's blend mode defaults to the right one for premultiplied alpha (src = GL_ONE, dst = GL_ONE_MINUS_SRC_ALPHA).</div>

			

		</div>

		
			<dl class="postprofile" id="profile1429">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1430" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1430">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 4:08 pm </p>

			

			<div class="content"><div>
<br />Ah, so does this mean to draw 2 rects with different draw modes in one Draw Callback, I would change the prop, that owns the ScriptDeck, to the correct blend mode before <em>each </em>fillRect, in the Draw Callback?  Or would I need 2 different ScriptDecks and Props.
<br />
<br />
<br />Patrick, thank you tremendously for your insights.  Based on the tests and the feedback, I do think I am experiencing an alpha issue, and will look to resolve it and post the results. 
<br />
<br /></div></div>

			

		</div>

		
			<dl class="postprofile" id="profile1430">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1431" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1431">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Tue Dec 27, 2011 4:18 pm </p>

			

			<div class="content">Hmmm. I would need to expose a setBlendMode on MOAIGfxDevice for you. Right now the prop sets the blend mode prior to doing any drawing from the deck... so you would need two props.
<br />
<br />There's a lot more drawing state (textures, shaders, pipeline transforms, etc.) that could be exposed depending on how far you want to go with immediate mode drawing. What's there now is still pretty preliminary...
<br />
<br />Let me know if this is mission critical for you and I will prioritize accordingly.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1431">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1432" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1432">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 4:27 pm </p>

			

			<div class="content">Ah.  We use fillRect for "health bars".  One of our games has multiple "resources" (i.e. currently, 6 "bars").  The bars change colors based on their value (gee.. red is low..).  But what we really need, is to be able to set the vertex colors, to have a subtle gradient from, say, red to orange, on the bar.  This is not done so well by scaling a texture...  Any thoughts on setting vertex colors, or "Street Fighter" bars in general (<a href="http://edwardrayes.files.wordpress.com/2011/07/178123-street-fighter-alpha-3-playstation-screenshot-due-to-the-fast1.png" target="_blank">click here for sample</a>)?  Or does iOS not even support that (shows you what I know)</div>

			

		</div>

		
			<dl class="postprofile" id="profile1432">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1433" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1433">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Tue Dec 27, 2011 4:41 pm </p>

			

			<div class="content">It does, but MOAIDraw doesn't expose it right now. One workaround would be to use MOAIMesh with a custom vertex format. That will let you specify per-vertex color and/or uv.
<br />
<br />I've made a note to beef up MOAIDraw... sounds like a pretty important use case!</div>

			

		</div>

		
			<dl class="postprofile" id="profile1433">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1435" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1435">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Tue Dec 27, 2011 5:31 pm </p>

			

			<div class="content">If I set the alpha channel of the 3 setPenColor calls in the "scriptDeck" sample to any number less than 1 (ex. 0.0, 0.001, 0.1, 0.5), the lines remain opaque.
<br />
<br />However, if I add prop:setBlendMode( MOAIProp2D.BLEND_MULTIPLY ) the lines will disappear, no matter what the value of alpha (ex. 0.0, 1.0) (??)
<br />
<br />The <strong>default </strong><em>appears </em>to be BLEND_NORMAL, which, in this case, <span style="text-decoration: underline">ignores</span> the alpha channel. (?)
<br />
<br />BLEND_ADD does appear to work as I would expect (the RGB * A is added to the pixel) </div>

			

		</div>

		
			<dl class="postprofile" id="profile1435">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1446" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1446">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Wed Dec 28, 2011 1:06 pm </p>

			

			<div class="content">In the "<strong>scriptDeck</strong>" sample, it appears that there is no current need for the <strong>setRect </strong>on the <strong>MOAIScriptDeck</strong>.  The <strong>MOAIDraw</strong> functions do not appear to respect this "window", and draw just as they are instructed; no problem there, just confirming that the line in the sample may be redundant (remove?), or that I am incorrect.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1446">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1456" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1456">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Wed Dec 28, 2011 5:54 pm </p>

			

			<div class="content">The MOAIScriptDeck's setRect actually sets the deck's broad phase rectangle for placement in the layer partition and for view culling. It's not intended to be a clipping window or anything - you are free to draw any shape you want inside or outside of the rect. But if you don't have a rect then the partition will treat the object as though it is dimensionless and will put it in the 'empties' list so it will not be returned by any spatial query or get drawn by the layer.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1456">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1457" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1457">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Wed Dec 28, 2011 6:01 pm </p>

			

			<div class="content">Very good to know, thank you very much.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1457">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1510" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1510">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>anddrewscott</strong> &raquo; Fri Dec 30, 2011 4:28 pm </p>

			

			<div class="content">What is MOAIDraw for? Is it vector shapes? </div>

			

		</div>

		
			<dl class="postprofile" id="profile1510">
			<dt>
				<strong>anddrewscott</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 153</dd><dd><strong>Joined:</strong> Fri Sep 02, 2011 2:39 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1511" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1511">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>bonozogames</strong> &raquo; Fri Dec 30, 2011 4:31 pm </p>

			

			<div class="content">(review the <strong><a href="https://github.com/moai/moai-dev/tree/master/samples/basics/scriptDeck" target="_blank">scriptDeck</a> </strong>sample included in the project)</div>

			

		</div>

		
			<dl class="postprofile" id="profile1511">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=282_1327341093.png" width="120" height="120" alt="User avatar" /><br />
				<strong>bonozogames</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 170</dd><dd><strong>Joined:</strong> Sun Nov 06, 2011 4:17 am</dd><dd><strong>Location:</strong> Tulsa, OK</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p1512" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p1512">Alpha not applied with MOAIDraw.</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>anddrewscott</strong> &raquo; Fri Dec 30, 2011 4:44 pm </p>

			

			<div class="content">Thank you very much.</div>

			

		</div>

		
			<dl class="postprofile" id="profile1512">
			<dt>
				<strong>anddrewscott</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 153</dd><dd><strong>Joined:</strong> Fri Sep 02, 2011 2:39 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			20 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../moai-sdk-developer-support.html" class="left-box left" accesskey="r">Return to Moai SDK</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7" selected="selected">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.046s | 13 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>