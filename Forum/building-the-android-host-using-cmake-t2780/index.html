<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - Building the Android host using CMake</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Android" href="../feed.php%3Ff=17.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Building the Android host using CMake" href="http://192.168.20.226:3000/forums/feed.php?f=17&amp;t=2780" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/building-the-android-host-using-cmake-t2780/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../platform-specifics-f12.html">Platform Specifics</a> <strong>&#8249;</strong> <a href="../android-f17.html">Android</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://192.168.20.226:3000/forums/memberlist.php?mode=email&amp;t=2780" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=17&amp;t=2780&amp;start=0&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">Building the Android host using CMake</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Tablets / Phones / Consoles / Ouya<br /></div>
	<p>
		
			<strong>Moderator:</strong> ezraanderson
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			14 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p15129" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p15129">Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>spectralcanine</strong> &raquo; Thu Aug 21, 2014 7:13 pm </p>

			

			<div class="content">I built the Android host of version 1.4p0 with the given ant folder (which is quite a lot of work under Windows, I must say).<br /><br />Now I'd prefer to use the CMake files to build a slimmer library, since the ant folder results in a 5825KB .so file, most of which I believe I am not even actually using (e.g. Box2D, and many other things).<br />CMake successfully generates a VC++ project, but getting it to compile is a whole other thing.<br />I had to add things like the Java include folders and CMake variables manually, which got me further along the way, but now moai-android/moaiext-jni.h is asking for a &quot;android/log.h&quot; header, and I can't for the life of me find where this file is, and I am getting other errors (undeclared identifiers, missing inttypes.h, etc.) in the other projects beside moai-android.<br /><br />Is it worth the trouble to get this working on Windows?<br /><br />In a related subject - since I am telling CMake what features I want, why does the VC++ project it creates contain all of the rest too?<br />For example, as I mentioned above - Box2D. Why is it included and compiled with the rest of the project when it is not ticked in CMake?<br /><br />Thanks.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15129">
			<dt>
				<strong>spectralcanine</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 35</dd><dd><strong>Joined:</strong> Thu Mar 21, 2013 9:07 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15130" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15130">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ezraanderson</strong> &raquo; Thu Aug 21, 2014 9:01 pm </p>

			

			<div class="content">~<br />You can manually change the flags for things you want in all the files , but I would leave most of them in the binary are quite small in my opinion. <br /><ul><li> <!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/blob/master/bin/create-projects-win.bat">https://github.com/moai/moai-dev/blob/m ... ts-win.bat</a><!-- m --></li></ul><br />I just recently switched to doing android builds on Ubuntu/linux and its much easier. Its totally worth making the jump, it will save you a lot of headaches <img src="../images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /><br /><br />Are you using the stable branch?</div>

			<div id="sig15130" class="signature">Dead Dark: A roguelike, zombie apocalypse survival game<br /><!-- m --><a class="postlink" href="http://www.dead-dark.com">http://www.dead-dark.com</a><!-- m --><br /><!-- w --><a class="postlink" href="http://www.ezraanderson.com">www.ezraanderson.com</a><!-- w --></div>

		</div>

		
			<dl class="postprofile" id="profile15130">
			<dt>
				<img src="../download/file.php%253favatar%253d1202_1372191800.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong>ezraanderson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 889</dd><dd><strong>Joined:</strong> Wed Nov 21, 2012 9:24 pm</dd><dd><strong>Location:</strong> Canada</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15131" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15131">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>spectralcanine</strong> &raquo; Thu Aug 21, 2014 9:41 pm </p>

			

			<div class="content">I know it will probably be much easier on Linux, it's just such an annoyance to dual boot...<br /><br />I am using the stable 1.4p0, since 1.5.2 doesn't like me (it says my NDK is &quot;broken&quot; for whatever reason).<br /><br />I'll look at that bat file, thanks.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15131">
			<dt>
				<strong>spectralcanine</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 35</dd><dd><strong>Joined:</strong> Thu Mar 21, 2013 9:07 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15132" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15132">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Thu Aug 21, 2014 9:46 pm </p>

			

			<div class="content">I am not sure you can produce an android build with visual studio! I am not sure the cmake scripts are tested with 1.4p0. It needs to use the ndk and cross compile. There is a batch file for building android via cmake on windows in the bin folder, disabling modules is good but that 5mb doesn't get too much smaller. <br />you can find a guide here:<br /><!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/wiki/Building-for-android-on-windows">https://github.com/moai/moai-dev/wiki/B ... on-windows</a><!-- m --><br /><br />and a build tool that will build all hosts (except mac and ios) on windows here:<br /><!-- m --><a class="postlink" href="http://halfnelson.github.io/moaicli/">http://halfnelson.github.io/moaicli/</a><!-- m --></div>

			

		</div>

		
			<dl class="postprofile" id="profile15132">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 501</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15133" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15133">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>spectralcanine</strong> &raquo; Thu Aug 21, 2014 11:46 pm </p>

			

			<div class="content">That tool looks amazing, but it failed to build for me <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /><br /><br />First it injects @APP_ID@ in the project's res/values/strings.xml but it is never defined.<br />But the real issue is in the sdk ant/build.xml:691 &quot;null returned: 1&quot;<br />Not sure what it means looking at the line<br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="xml" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">proguardFile=&quot;${out.absolute.dir}/proguard.txt</div></li><br /></ol></code></dd></dl><br /><br />There were also some minor issues, like not recognizing the already installed things, not managing to automatically install JDK (it downloaded it, but didn't install for some reason), and some of the confirmations requiring to y+enter twice.<br /><br />I tip my non existent hat to you, this is a great initiative.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15133">
			<dt>
				<strong>spectralcanine</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 35</dd><dd><strong>Joined:</strong> Thu Mar 21, 2013 9:07 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15135" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15135">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Sat Aug 23, 2014 4:29 am </p>

			

			<div class="content">ahh, yep I remember that app_id bug, I really should release the fixed version <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" />. <br />The pressing y twice is an annoying bug with jruby console process stdin redirection which I am yet to solve cleanly. <br />The code purposely doesn't detect existing versions since some of the versions of the tools are patched to work properly and it ensures that the correct &quot;known good&quot; editions are used.<br /><br />The not installing jdk is a new one, it might be a win 8.1 thing.<br />I have never seen that ant one before though :/ I will look into it. <br /><br />Thanks for the feedback, development has stalled while I  work on a nicer reusable host and binary release</div>

			

		</div>

		
			<dl class="postprofile" id="profile15135">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 501</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15159" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15159">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>spectralcanine</strong> &raquo; Tue Aug 26, 2014 10:00 pm </p>

			

			<div class="content">I just read the original moaicli thread and apparently you already responded to this error <a href="../moaicli-t2453/page20.html#p14599" class="postlink">/forums/moaicli-t2453/page20.html#p14599</a>.<br /><br />Setting the app_id to something manually fixed the building issue.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15159">
			<dt>
				<strong>spectralcanine</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 35</dd><dd><strong>Joined:</strong> Thu Mar 21, 2013 9:07 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15166" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15166">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ibisum</strong> &raquo; Wed Aug 27, 2014 9:27 am </p>

			

			<div class="content">Just wanted to pitch in and say for the record, that you can get a very easy Linux-based VM set up to build the Android host, and it runs just fine in Virtualbox on Windows.  I have, for all intents and purposes, just virtualized the MOAI-host build-servers and they run pretty fine in my environment that way.  All I'm using to do MOAI now is an editor somewhere, that can check into our repo's; virtualized build-servers do the rest.  I think that should be kept in mind if you want to stay on Windows, for some reason - don't let it get in your way of running Linux builds automatically (with frankly better tools) that way, because it does also work very smoothly.</div>

			<div id="sig15166" class="signature">;<br />--<br /><!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile15166">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong>ibisum</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1323</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15458" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15458">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>DanielWolf</strong> &raquo; Sat Sep 27, 2014 7:48 pm </p>

			

			<div class="content">Hi halfnelson,<br /><br /><blockquote><div><cite>halfnelson wrote:</cite>ahh, yep I remember that app_id bug, I really should release the fixed version <img src="../images/smilies/icon_e_sad.gif" alt=":(" title="Sad" />. </div></blockquote><br />I just ran into the same problem with the @APP_ID@ placeholder. Any chance of seeing an updated release of MoaiCLI? <br /><br />Alternatively, is there a way I can build MoaiCLI myself? If so, should I use your sdk1.5 branch?</div>

			

		</div>

		
			<dl class="postprofile" id="profile15458">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=1352_1389306735.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong>DanielWolf</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 88</dd><dd><strong>Joined:</strong> Thu Mar 07, 2013 1:41 am</dd><dd><strong>Location:</strong> Munich, Germany</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15461" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15461">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Sat Sep 27, 2014 9:29 pm </p>

			

			<div class="content">sdk1.5 is the right branch, you can build it yourself (although it is just jruby so no real building actually happens, but there is a dist folder with a build_windows.bat that will create the package that I distribute to people). To use the project direct from github (instead of converting to jar) <br /><br />git clone <!-- m --><a class="postlink" href="http://github.com/halfnelson/moaicli">http://github.com/halfnelson/moaicli</a><!-- m --><br />cd moaicli<br />cd src<br />jruby -S gem install bundler<br />jruby -S bundle install --standalone<br />cd mygameprojects<br />c:\moaicli\moaicli.bat new testproject<br />cd testproject<br />c:\moaicli\moaicli build android</div>

			

		</div>

		
			<dl class="postprofile" id="profile15461">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 501</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15474" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15474">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>DanielWolf</strong> &raquo; Sun Sep 28, 2014 8:02 pm </p>

			

			<div class="content">Thanks for your step-by-step instructions. Somehow it didn't work out for me. The jruby calls worked fine, but calling moaicli.bat afterwards resulted in<br /><br />X:\dev\projects\moaicli&gt;moaicli.bat<br />LoadError: load error: ansicolor -- java.lang.UnsatisfiedLinkError: C:\Users\wolf\AppData\Local\Temp\WindowsConsole479321499213693698.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform<br />  require at org/jruby/RubyKernel.java:1065<br />  require at X:/dev/tools/jruby-1.7.16/lib/ruby/shared/rubygems/core_ext/kernel_require.rb:55<br />   (root) at moaicli.bat\..\src\moaicli.rb:7<br /><br />I tried it both with the 64 and 32 bit version of JRuby.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15474">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=1352_1389306735.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong>DanielWolf</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 88</dd><dd><strong>Joined:</strong> Thu Mar 07, 2013 1:41 am</dd><dd><strong>Location:</strong> Munich, Germany</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15481" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15481">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Sun Sep 28, 2014 9:59 pm </p>

			

			<div class="content">Ah, you are using a 64bit jvm, the jvm needs to be run with -d32, which I admit is a pain (and one of the reasons the release of moaicli on windows comes with its own embedded 32bit JRE). The real fix is for me to recompile ansicolor.dll as 64bit too, and then load the correct one from java  (instead of assuming 32bit).<br /><!-- m --><a class="postlink" href="https://github.com/halfnelson/ansicolor/blob/master/src/main/c/WindowsConsole.c">https://github.com/halfnelson/ansicolor ... sConsole.c</a><!-- m --><br /><br />shouldn't be hard. I will let you know. I also recently added visual studio compilation as the default for windows builds in moaicli (mingw is still there but needs --platform mingw flag)</div>

			

		</div>

		
			<dl class="postprofile" id="profile15481">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 501</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15494" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15494">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>halfnelson</strong> &raquo; Mon Sep 29, 2014 12:22 pm </p>

			

			<div class="content">these issues should be fixed in latest release: <!-- m --><a class="postlink" href="https://github.com/halfnelson/moaicli/releases/tag/1.5.0-rc2">https://github.com/halfnelson/moaicli/r ... /1.5.0-rc2</a><!-- m --><br /><br />you no longer need 32bit vm (i bundled 64bit and 32bit versions of ansicolor now)<br /><br />app_id placeholder bug should be fixed now.</div>

			

		</div>

		
			<dl class="postprofile" id="profile15494">
			<dt>
				<strong>halfnelson</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 501</dd><dd><strong>Joined:</strong> Thu Jun 14, 2012 4:48 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p15518" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p15518">Re: Building the Android host using CMake</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>DanielWolf</strong> &raquo; Mon Sep 29, 2014 8:06 pm </p>

			

			<div class="content">Works great now. Thanks a lot!</div>

			

		</div>

		
			<dl class="postprofile" id="profile15518">
			<dt>
				<img src="http://192.168.20.226:3000/forums/download/file.php?avatar=1352_1389306735.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong>DanielWolf</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 88</dd><dd><strong>Joined:</strong> Thu Mar 07, 2013 1:41 am</dd><dd><strong>Location:</strong> Munich, Germany</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			14 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../android-f17.html" class="left-box left" accesskey="r">Return to Android</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17" selected="selected">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.052s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>