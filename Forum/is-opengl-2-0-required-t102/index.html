<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - Is OpenGL 2.0 required?</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Moai SDK" href="../feed.php%3Ff=7.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Is OpenGL 2.0 required?" href="http://192.168.20.226:3000/forums/feed.php?f=7&amp;t=102" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/is-opengl-2-0-required-t102/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../moai-development-forums.html">Moai Development Forums</a> <strong>&#8249;</strong> <a href="../moai-sdk-developer-support.html">Moai SDK</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://192.168.20.226:3000/forums/memberlist.php?mode=email&amp;t=102" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=7&amp;t=102&amp;start=0&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">Is OpenGL 2.0 required?</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Discussion about using Moai SDK - post questions, issues, and ideas here.<br /></div>
	<p>
		
			<strong>Moderators:</strong> naturally, seebs
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			10 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p446" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p446">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>thebullno1</strong> &raquo; Thu Aug 18, 2011 3:31 am </p>

			

			<div class="content">I just updated to revision da2caeb808025e3bfff76c5ccce5d636997a80c7 of moai-beta since I'm excited about PhysFS integration. And Akuma crashes at AKURender (access violation 0x000000) even if I pass it a blank script. My experience and hunch tell me that this has something to do with some unsupported OpenGL functions, thus the null pointer.
<br />
<br />I just want to confirm whether Moai has been updated to use OpenGL 2.0 on desktop. Is there any plan for a fallback option? If there is not then never mind, I'm getting a new laptop/desktop anyway. In mean time, I will compile against Moai 0.4.</div>

			<div id="sig446" class="signature"><a href="../akuma-an-alternative-pc-host-t65/index.html" class="postlink">Akuma: An alternative PC host</a><br /><a href="../moainao-run-your-script-on-android-without-building-t695/index.html" class="postlink">MoaiNao: Launch project on Android without building</a><br /><a href="../moairemote-another-remote-launcher-t917/index.html" class="postlink">MoaiRemote: Another remote launcher</a></div>

		</div>

		
			<dl class="postprofile" id="profile446">
			<dt>
				<img src="../download/file.php%253favatar%253d171_1329238722.jpg" width="120" height="100" alt="User avatar" /><br />
				<strong>thebullno1</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 319</dd><dd><strong>Joined:</strong> Sat Jul 02, 2011 3:53 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p447" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p447">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Thu Aug 18, 2011 3:22 pm </p>

			

			<div class="content">Yes, it should take advantage of desktop 2.0 if it is there and fall back on fixed function. The null pointer crash may be from an extension name we're misusing. For example, if there's an *EXT function we're calling directly but you're on a later version of OpenGL that includes the function naively, glew doesn't remap the *ETX pointer onto the native. The reverse is true as well.
<br />
<br />You can see us handling this case in MOAIGfxDevice::DetectContext starting at line 176. It ain't pretty. On my todo list is factoring all of this out into its own file that should provide a cleaner, consolidated set of gl function pointers with. Open to other ideas if you have them.
<br />
<br />If you can identify which function is missing and causing the crash, please send me a pull request. Unless you have a very old graphics card it *should* support everything we need to do; maybe we're just getting an extension wrong.
<br />
<br />Also, we get and parse the OpenGL version string in starting at line 149. This has worked on the limited number of platforms we've tested on, but that version string is notoriously non-standard. May also bear double checking on your hardware.
<br />
<br />...
<br />
<br />Re PhysFS, still a preliminary integration. We decided to implement it in a stand-alone fashion for now, but are pretty seriously thinking about taking it low level and writing a replacement for the C standard's file routines. If we do that we could replace the file system in uslscore and lua... maybe some of the other 3rd party libraries as well. It would violate our self-imposed constraint of not customizing any of the 3rd party libraries, and we'd have to maintain those changes moving forward... but the upside is that everything would just work with PhysFS. Would also make it easier to drop in VFS drivers down the road.
<br />
<br />You have strong opinions on either side of that tradeoff?</div>

			

		</div>

		
			<dl class="postprofile" id="profile447">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p548" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p548">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>thebullno1</strong> &raquo; Thu Sep 15, 2011 4:08 am </p>

			

			<div class="content">My card is ancient btw. And I got a new laptop so this issue is solved.
<br />
<br />I support replacing C standard routines. Everything will just work in the end.
<br />
<br />Besides, I think Lua is the only library that has io access. Oh, actually libcurl may need it too.
<br />
<br />IMO, the way to do it is to modify uslscore to use VFS and make all 3rd party libraries use uslscore.
<br />
<br />
<br />
<br />It is possible to make lua works with a third party VFS by providing a custom module handler.  The love2d engine uses this method <a href="http://love2d.org/" target="_blank">http://love2d.org/</a></div>

			<div id="sig548" class="signature"><a href="../akuma-an-alternative-pc-host-t65/index.html" class="postlink">Akuma: An alternative PC host</a><br /><a href="../moainao-run-your-script-on-android-without-building-t695/index.html" class="postlink">MoaiNao: Launch project on Android without building</a><br /><a href="../moairemote-another-remote-launcher-t917/index.html" class="postlink">MoaiRemote: Another remote launcher</a></div>

		</div>

		
			<dl class="postprofile" id="profile548">
			<dt>
				<img src="../download/file.php%253favatar%253d171_1329238722.jpg" width="120" height="100" alt="User avatar" /><br />
				<strong>thebullno1</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 319</dd><dd><strong>Joined:</strong> Sat Jul 02, 2011 3:53 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p552" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p552">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Fri Sep 16, 2011 12:08 am </p>

			

			<div class="content">Cool. The latest version up on moai-dev/master uses the stdio wrapper. We modified Lua as discussed. Cleaning up a few things and planning an SDK release tomorrow or first thing next week.
<br />
<br />I also expect the OpenGL support to smooth out over the next few releases. Our use of extensions still needs some work. We're planning to consolidate them soon under a single wrapper that can better address both mobile, desktop (and some other environments we'll be announcing).</div>

			

		</div>

		
			<dl class="postprofile" id="profile552">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p553" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p553">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>dlannan68</strong> &raquo; Fri Sep 16, 2011 3:01 am </p>

			

			<div class="content">Hrm.. modifying Lua? esp std libs.. is something I would not personally be keen on at all. It will complicate many things, especially any sort of module support. This is a bit of a shame because I will need to shift away from moai to an alternative solution.
<br />
<br /><edit> Just a note, I would recommend extension styled architecture rather than encapsulation. Extension methodology allows easy updates, easy to extend with minimal impact to other extensions (simply by namespacing), easy versioning of extensions, and ability to 'swap around' extended components. Encapsulation on the other hand, results in extremely difficult maintenance and versioning procedures and limits extension (by its nature). For examples of extension based architecture, examine Corona and read some of the papers written by the Lua authors (they very much follow the extension architecture model).
<br />
<br /><edit>
<br />
<br />Cheers,
<br />
<br />Dave</div>

			

		</div>

		
			<dl class="postprofile" id="profile553">
			<dt>
				<strong>dlannan68</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 14</dd><dd><strong>Joined:</strong> Tue Aug 09, 2011 1:12 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p554" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p554">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Fri Sep 16, 2011 3:07 pm </p>

			

			<div class="content">I'm open to it and agree that patching 3rd party libs is far from ideal. Could you be more specific about how you'd propose to implement VFS, then? If I provide it in parallel, then it won't be transparent to the user. Would you simply provide an alternative Lua io? By 'extension' do you just mean overwriting the Lua io module at runtime?
<br />
<br />For libcurl and sqlite I really don't see a good alternative. I've looked into using compiler settings to get out ahead of the standard libraries; that would be my preferred approach, but seems like a lot trickier to get right and maintain than to patch. Also, I then have to take on wrapping the entire C standard instead of just the file io functions specifically. Not eager to lose days writing wrappers or fighting the build...
<br />
<br />The version we are pushing now *does* have stdio replaced in Lua. If you don't need VFS, simply link with a non-modified version of Lua instead. I can take an alternative direction if you will do the legwork and specify exactly what you'd like to see that also meets our needs (transparent use of VFS on supported platforms). Unfortunately, I am too busy at this exact moment to examine Corona or read papers. On the other hand, am happy to discuss and implement specifics. Please check out the latest version in moai-dev-master, look at the zipfs library and let me know exactly what you'd propose.</div>

			

		</div>

		
			<dl class="postprofile" id="profile554">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p555" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p555">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>dlannan</strong> &raquo; Sat Sep 17, 2011 1:06 am </p>

			

			<div class="content">The 0.6 does have stdio replaced? I'll look at that when I get some spare time (work - making simulators is taking up a fair amount of my time at the moment, and getting this little game ready).
<br />
<br />Ok. first all I'll make sure Im on the same page as what you are implementing. VFS - Virtual File System. Reason to implement: Make developers have the ability to use a file descriptor mechanism, but not necessarily need to worry about platform implementation? Is this right?
<br />
<br />Based on the above definition, the file access should be very high level and not necessarily down in the "IO" systems of libraries. Libs like Libcurl, sqlite already have libraries for the platforms you are targeting - so I dont quite see the need to want to change that particular set. For general game developer and application user, you should have some sort of abstract interface for definining IO usage (ignore Lua's internal use, since most of the game side API is already controlled by MOAI anyway). An extended interface could look like:
<br />
<br />MOAIVFS.OpenFile, MOIAVFS.ReadFile, MOIAVFS.Pack, etc.. this allows your own control of file access at a very high level.
<br />
<br />To then make best use of this mechanism, you have a build tool that appropriately makes the data sets needed for the specific file system you are targeting. For example when building for Android you use a similar solution like we used on GBA - build the files into the code (this is suggested in the documents I know - but it needs to be transparent to the developer). You could also have in-memory solutions or just use the unzip method that android supports. Theres only a handful of file types you need to support, so it makes sense to have this sort of "easy" interface. This is what I'll be doing when I get time.
<br />
<br />When you need to change/modify the file mechanisms for the platform, you can do it fairly safely without breaking any interfaces - this is what most game systems do (they have their own extended IO class/interface).
<br />
<br />For things like Lua's internal require/dofile/etc .. I would leave the general stdio (ANSI C on Lua I have used on dozens of different embedded devices including the GBA, NDS and others and wouldnt make much sense to change/redevelop it), these should still work on different platforms?
<br />
<br />Remember this is my opinion, and it is by no means "right". There are billions of ways to do things in code and my personal solutions are more targeted for the following requirements:
<br />
<br />- Minimal impact on std libraries
<br />
<br />- As much support for ext libraries as possible (make developers life easier)
<br />
<br />- Reduce input to output tool use. This is a little tricky, but the simpler the process is to get art/script/audio in and viewed on screen the more likely the engine will have high levels of use. As an example of this, Ubisoft use a 'live' game engine system. Artists/Designers/Programmers dont touch files at all, its all generated from interactive visual tools and integrated into a 'live' game framework - artists can instantly see their work in game with no need to handle assets (this is probably the ultime extreme end of the use case, but it shows an important lesson).
<br />
<br />- Time to market (a whole heap of related topics fit in here).
<br />
<br />In some way, you should be able to have a VFS module loaded by the developer as needed. Which then provides the vfs namespace and you get all the nice file handling capabilities.
<br />
<br />Hope this makes some sense...
<br />
<br />Cheers,
<br />
<br />Dave</div>

			

		</div>

		
			<dl class="postprofile" id="profile555">
			<dt>
				<strong>dlannan</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3</dd><dd><strong>Joined:</strong> Sat Sep 17, 2011 7:37 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p557" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p557">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>thebullno1</strong> &raquo; Sat Sep 17, 2011 3:50 am </p>

			

			<div class="content">By Corona do you mean this: <a href="http://www.anscamobile.com/corona/" target="_blank">http://www.anscamobile.com/corona/</a>
<br />
<br />It has a terrible file system. You cannot put script and audio in a sub-directory. Thus, the project folder looks like a mess. Reading a binary resource file means unzipping it to a temporary folder.
<br />
<br /><blockquote>
<br />Libs like Libcurl, sqlite already have libraries for the platforms you are targeting – so I dont quite see the need to want to change that particular set
<br />
<br /></blockquote>
<br />They don't have the ability to read from a compressed archive or an encrypted one since they are using the C standard library. And in Android, everything is packaged in the apk.
<br />
<br /><blockquote>
<br />For example when building for Android you use a similar solution like we used on GBA – build the files into the code (this is suggested in the documents I know – but it needs to be transparent to the developer)
<br />
<br /></blockquote>
<br />With the VFS in place, you can just drop things into the assets folder and it just works. Of course, there's not much difference at the high level, but it reduce build time(one compression phases instead of two) and load time(read directly from the apk instead of unzipping and read back)
<br />
<br /><blockquote>
<br />You could also have in-memory solutions or just use the unzip method that android supports.
<br />
<br /></blockquote>
<br />I believe the VFS is implemented in order to avoid unzipping to a temporary location.
<br />
<br /><blockquote>
<br />For things like Lua's internal require/dofile/etc .. I would leave the general stdio (ANSI C on Lua I have used on dozens of different embedded devices including the GBA, NDS and others and wouldnt make much sense to change/redevelop it), these should still work on different platforms?
<br />
<br /></blockquote>
<br />Without the ability to read from an archive, I'm afraid they won't. However, for require, the module handler is extendable without touching lua source code. You only need to push one into package.loaders.
<br />
<br />
<br />
<br />Besides, lua io is not the "core" of lua, it is actually and extension. The "core" lua only know how to compile code and interpret bytecode from memory.
<br />
<br />
<br />
<br />I belive the major reason for VFS is how Android handle resources: everything is packed into the apk. Assets are accessed using the AssetManager(in java) or unzipping the apk to file/memory.
<br />
<br />
<br />
<br />Patching lua io module at runtime should work nicely for require/dofile/file.open... but there's still that libcurl and libsqlite.
<br />
<br />By patching i mean executing something in lua like: require = my_require, dofile = my_dofile, file = my_file, where my_* functions use the VFS instead of standard C library.
<br />
<br />
<br />
<br />But again, since Moai is open source and the modification is made at low level, I think if you link with an unmodified Lua version, everything will still work.</div>

			<div id="sig557" class="signature"><a href="../akuma-an-alternative-pc-host-t65/index.html" class="postlink">Akuma: An alternative PC host</a><br /><a href="../moainao-run-your-script-on-android-without-building-t695/index.html" class="postlink">MoaiNao: Launch project on Android without building</a><br /><a href="../moairemote-another-remote-launcher-t917/index.html" class="postlink">MoaiRemote: Another remote launcher</a></div>

		</div>

		
			<dl class="postprofile" id="profile557">
			<dt>
				<img src="../download/file.php%253favatar%253d171_1329238722.jpg" width="120" height="100" alt="User avatar" /><br />
				<strong>thebullno1</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 319</dd><dd><strong>Joined:</strong> Sat Jul 02, 2011 3:53 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p581" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p581">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>dlannan</strong> &raquo; Tue Sep 27, 2011 7:24 am </p>

			

			<div class="content">Just some quick notes, no point responding to all this.
<br />
<br />With Corona its a pure implementation of Lua, thus you have the opportunity to use _any_ of the large number of file packing and manipulation systems built for Lua. Additionally, you dont need to use resource files like that - Lua can natively read binary (I dont get why people dont use this - we have been doing this for 10 yrs).
<br />
<br />VFS (any virtual filesystem) should be a layer _above_ the low level IO, not a replacement for it. Look at any good game engine (Crytek, Unreal3, Unigine etc) all use extended file systems for packing, virtualisation of files and for in-memory file handling and serialisation. You can always still use the low level file IO if needed in them (ie the IO is not replaced). This is what I have been explaining about extension vs encapsulation. Encapsulation is _guaranteed_ to trip you up in the future.
<br />
<br />Im also not certain how much you have done with apk's, but  if you design your manifest and resource layout correctly you can use normal file access, theres no need for any "compressed" depacking etc (when you install the apk this is done for you?? just put what you want to happen in the manifest?!). You can build your own manifest using Eclipse and put whatever resources in whatever structure you would like to have when installed. If you use your own pak file you put it in the resources and load using your pak file loading extensions?
<br />
<br />Apk's are a delivery system for Android (much like you can use apt-get use in Gentoo) it provides a secure way for applications to be delivered to a device with signing for security (really just indicates the developer/creator - but ensures it hasnt been tampered with). This is why I'm very uncertain about why VFS is being used in the current manner. Imho, its complicating your development rather than simplifying (which should always be main target goal).
<br />
<br />I should note, the more you move away from vanilla Lua, the less likely you will be able to do things like build LuaJIT versions of the systems - which I would recommend you try to keep in mind also, LuaJIT is available on most platforms and provides many tens and some times hundredfold increase in performance for Lua execution.
<br />
<br />For us, it looks like we will do the one little game then move over to a pure Lua implementation. There are some impressive things being done in OGLES.. so will move there soon.
<br />
<br />Cheers,
<br />
<br />Dave</div>

			

		</div>

		
			<dl class="postprofile" id="profile581">
			<dt>
				<strong>dlannan</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 3</dd><dd><strong>Joined:</strong> Sat Sep 17, 2011 7:37 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p583" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p583">Is OpenGL 2.0 required?</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Wed Sep 28, 2011 12:24 am </p>

			

			<div class="content">Thanks for these thoughts. Certainly nothing wrong with a pure Lua approach. If you are committed to that, then the VFS is a moot point.
<br />
<br />In the event you would like to continue using Moai SDK but without the VFS, consider dropping in an original, unaltered Lua source. Everything should build and run smoothly. You can then use MOAIFileSystem as a VFS along with Lua's binary loading capability. Alternatively, if you'd like to move the VFS into a one-to-one Lua io replacement module we can inject at runtime, I'd welcome the contribution and can then roll back to an unaltered Lua and make the initialization of the replacement module optional.</div>

			

		</div>

		
			<dl class="postprofile" id="profile583">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			10 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../moai-sdk-developer-support.html" class="left-box left" accesskey="r">Return to Moai SDK</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7" selected="selected">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.044s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>