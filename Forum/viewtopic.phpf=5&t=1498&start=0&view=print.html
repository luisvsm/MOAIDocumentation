<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum | The mobile platform for pro game developers &bull; View topic - easter - A community toolset</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum | The mobile platform for pro game developers</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>easter - A community toolset</h2>
		<p><a href="easter-a-community-toolset-t1498/index.html">/forums/easter-a-community-toolset-t1498/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Dec 16, 2012 5:51 pm</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content">As I said in the other thread, I want to propose a community toolset that can solve many problems with Moai. First the goals and non goals:<br /><br />Goals:<br /><ul>- Provide a streamlined way of creating, building and deploying a project<br />- Supports Android and iOS as build targets<br />- Works on Windows and Unix<br />- Manage plugins and dependencies automatically<br />- Flexible enough for advanced users. Sensible defaults for new users.<br />- Everything can be done through a command line and a config file<br />- Coordinate community effort using a common workflow and toolset. Look at what rebar has done to an obscure language like Erlang.<br />- The tool will be written in Lua so everyone can contribute.<br /></ul><br />Non-goals:<br /><ul>- GUI front end. It can be a separate project. Command line tool are easier to integrate into any workflow<br />- Requires no platform specific knowledge from users. It can't be done. At least not now. One still needs to know about the NDK, about XCode to use it properly. The aim is to streamline, not to simplify<br /></ul><br />OK, so what is it? easter has 2 parts: A command line tool and a set of projects and template. easter the command line tool will help you do everything from creating new projects, downloading dependencies to deploying and building.<br /><br />First, to install Moai itself, you type:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter get-moai</div></li><br /></ol></code></dd></dl><br />It will use git to clone the official repo to your home folder, build all the things it can. This might not work out of the box if you lack the required tools but it can be solved easily with package managers on Linux and MacOS. For windows, we can offer an all-in-one installer.<br /><br /><span style="font-weight: bold">To create a new project:<br /></span><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter create-project mygame</div></li><br /></ol></code></dd></dl><br />It will create a minimal project using the template from a community maintained repo. For new users, we also offer basic &quot;official&quot; templates such as:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter create-project MyPlatformer template=platformer</div></li><br /></ol></code></dd></dl><br />Or to use &quot;unofficial&quot; template:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter create-project FirstFantasy template=git://github.com/bullno1/rpg-template</div></li><br /></ol></code></dd></dl><br /><br />Now, open the game folder, the structure is:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+src //lua files</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+assets//asset files, need platform specific scripts to process</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+android//android specific files</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+iOS//ios specific files</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">+deps//dependencies</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter.lua</div></li><br /></ol></code></dd></dl><br /><br />easter.lua is a config file that looks like this:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; project_name <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;MyGame&quot;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #0000aa;">type</span> <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;app&quot;</span><span style="color: #66cc66;">,</span><span style="color: #808080; font-style: italic;">--different from lib</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; moai <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;file://path/to/customized/version&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;">--if you have your own bug fixes. specify nothing or &quot;default&quot; for the default version</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; deps <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; rapanui <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;git://pathToRapaNui&quot;</span><span style="color: #66cc66;">,</span> tag <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;1.0&quot;</span><span style="color: #66cc66;">,</span> branch<span style="color: #66cc66;">=</span><span style="color: #ff6666;">&quot;master&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;">-- for a specific version</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; moses <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;git://pathToMoses&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;">--default is master latest commit</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; lustache <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;file://path/To/local/library&quot;</span><span style="color: #66cc66;">&#125;</span> <span style="color: #808080; font-style: italic;">--local library works too</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; prebuild_steps <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #808080; font-style: italic;">--what to do before building</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;pack_atlases&quot;</span><span style="color: #66cc66;">,</span><span style="color: #808080; font-style: italic;">--invoke texture packer</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;convert_audio&quot;</span><span style="color: #808080; font-style: italic;">--invoke ffmpeg</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; postbuild_steps <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #808080; font-style: italic;">--nothing cross platform</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#125;</span></div></li><br /></ol></code></dd></dl><br />As you can see,it's a lua table. For platform specific stuffs, we have easter.&lt;platform_name&gt;.lua. For example, in easter.android.lua:<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; packageName <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;com.mycompany.&quot;</span><span style="color: #66cc66;">..</span>project_name<span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;">--this variable is automatically available</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; api_level <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; host_template <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;git://my/own/template&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #808080; font-style: italic;">--if you don't want to use easter's provided template</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; deps <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #808080; font-style: italic;">--extra android's dependencies</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; android_library <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;svn://my/android/library&quot;</span><span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; postbuild_steps <span style="color: #66cc66;">=</span> postbuild_steps <span style="color: #808080; font-style: italic;">--common postbuild steps</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">.</span>prepend<span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;obfuscate_apk&quot;</span><span style="color: #66cc66;">,</span> options<span style="color: #66cc66;">=</span><span style="color: #ff6666;">&quot;....&quot;</span><span style="color: #66cc66;">&#125;</span><span style="color: #808080; font-style: italic;">--options can be given to build steps</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">.</span>append <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;submit_to_appthwack&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#125;</span></div></li><br /></ol></code></dd></dl><br /><br />Build steps are just lua scripts. They are searched from user's home folder and then program's folder. They will be invoked with the appropriate informations.<br /><br />Now, to test your projects in the GLUT host, just do: <br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter run device=iPad_mini</div></li><br /></ol></code></dd></dl><br />To build it to binary:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter build target=android</div></li><br /></ol></code></dd></dl><br />And that's it.<br /><br />easter can be extended with new command. Just do:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter get-plugin nao</div></li><br /></ol></code></dd></dl><br />It will download MoaiNao (*cough* my own project *cough*). From then on, you can easily type:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter nao</div></li><br /></ol></code></dd></dl><br />And it will launch your project in your Android device.<br />All commands are just plugins. &quot;Official&quot; commands are no different, they are just prepackaged with the tool<br /><br />That's pretty much the basic. It's not only useful for new users but also advanced users. Other planned commands are:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter update-deps #update dependencies that does not have a fixed version</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter clean #delete temporary files</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">easter make-host #create the host without building, I'll explain later</div></li><br /></ol></code></dd></dl><br />That's all for the tool, now on to the libraries and addons.<br /><br />First, for pure lua libraries. They can pretty much be used as-is. Just clone the repo/copy the file/symlink the folder and it will work. easter run will take care of setting package.path.<br />For libraries that requires C++/Java/ObjectiveC, we need a very clean approach. Some of my thoughts:<br /><br />The project needs an easter.lua in the root folder. easter will parse it to gain more information about the library. An example:<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="text" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">{</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; project_name=&quot;hannape&quot;,</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; type=&quot;lib&quot;,--not an app project</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; deps = {</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp;--the library itself, in turn, can have more dependencies, it will be resolved automatically when used in an app project</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; }</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">}</div></li><br /></ol></code></dd></dl><br />The lib project also mimics the app project layout. This enable library author to &quot;inject&quot; necessary files into users project in the build phase. So we also have android, assets, iOS folders. Dependency tree however, will be flattened to the common deps folder of the apps.<br /><br />Now onto plugin interface or libraries that uses non-Lua code as well. I still can't think of a clear idea, but this is what I have so far.<br />First, we need our own host for all platforms. I can help with the Android host. All modifiable files (android build scripts, xcode project file, Android manifest...) are templatized. The template engine is mustache and lua can use lustache (mustache library). Plugins need to declare what they want to inject, how they want to initialize/shutdown and handle events. Example of a plugin for Android:<br />In easter.android.lua<br /><dl class="codebox"><dt>Code: <a href="viewtopic.php%3Ff=5&amp;t=1498&amp;start=0&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; java <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; activity_create <span style="color: #66cc66;">=</span> file <span style="color: #ff6666;">&quot;create.java&quot;</span><span style="color: #66cc66;">,</span><span style="color: #808080; font-style: italic;">--put the whole content of the create.java </span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">--file into the activity_create template</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">--injection point</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; declaration <span style="color: #66cc66;">=</span> template<span style="color: #66cc66;">&#40;</span>file<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;declare.java.mustache&quot;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">,</span> project_name<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--this code fragment declares all the variables needed. It is also a template.</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">--It takes input from the project's setting</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; activity_destroy <span style="color: #66cc66;">=</span> file <span style="color: #ff6666;">&quot;facebook.shutdown()&quot;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">-- a simple string. file() is just a function that reads a file and return the content</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; manifest <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;top_level <span style="color: #66cc66;">=</span> file <span style="color: #ff6666;">&quot;xxxx.xml&quot;</span> <span style="color: #808080; font-style: italic;">--inject the file</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; cpp <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #808080; font-style: italic;">--injections for cpp</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #66cc66;">&#125;</span></div></li><br /></ol></code></dd></dl><br /><br />Multiplatform plugins can have multiple easter.&lt;platform&gt;.lua. It's automatically detected. Unsupported plugins will results in a build error with &quot;easter build&quot; command.<br />We can have a proper programmatic interface for hooking plugin but IMO, it's too much noise (overriding a class or implement an interface for the sake of being proper while all we need is some simple function calls at the right places). The users might need to hack the host anyway.<br />easter make-host will become handy when you want to debug your plugin.<br /><br />With that, I conclude my proposal, who's with me? Anything to add?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Dec 16, 2012 8:19 pm</strong></div>
				<div class="author">by <strong>JDance</strong></div>
				<div class="content">Sounds great. I think a proper tool like this would really help in coordinating community efforts like you say. Need android keyboard? Sure it's in plugin format, just add it to you config, no need for zipline to merge it. It's a bit out of my comfort zone to build a tool like this, but I would definitely use it and contribute. I'm used to maven, npm etc developing for other platforms and they're just a joy to use:) If you got something up and running I could definitely code some parts of it and extend it (with your help). I guess it might be good to leave the C++/Java plugins until later since that seems rather complex.<br /><br />I guess it needs to work on OS X as well if it's supposed to build for iphone? I have no clue how to make xcode build stuff from the command line but ofcourse it's possible.<br /><br />It will be at least a few months until my game is finished, and I would really like a smooth build process for that, releasing updates and what not. And then it might be on to the next game.<br /><br />One thing I'd add is support for specifying a custom moai-fork in the settings file. Since I have some modifications to the core I would like to build from my own:)<br /><br />Edit: Read your other post now, great stuff <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Dec 16, 2012 9:56 pm</strong></div>
				<div class="author">by <strong>stun</strong></div>
				<div class="content">Sounds like a great idea, I'd happily contribute. <br /><br />I'm curious about the plug in system. Is that going to be able to patch files in the moai-dev repo? I ask because I've also added several bits and pieces to the moai-dev repo in my own fork that I'd happily convert to plug-ins for distribution.<br /><br />How are you going to manage multiple plug-ins patching the same moai-dev files though? For example GLUTHost and AKU-luaext need to be patched for every additional 3rd party library that is added?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Dec 17, 2012 9:49 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Really great idea!  Lets get rolling .. github?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Dec 17, 2012 11:58 am</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content"><blockquote class="uncited"><div> I guess it might be good to leave the C++/Java plugins until later since that seems rather complex.</div></blockquote><br />Of course, the first step is to be able to create a project using vanilla Moai and pure lua plugin, build and deploy.<br />However, Java and C++ plugins are one of the primary motivation: to integrate community developed features. Also Moai's current make-host.sh script is quite a mess.<br /><br /><blockquote class="uncited"><div>I guess it needs to work on OS X as well if it's supposed to build for iphone? I have no clue how to make xcode build stuff from the command line but ofcourse it's possible.</div></blockquote><br />I found this: <!-- m --><a class="postlink" href="https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html">https://developer.apple.com/library/mac ... ild.1.html</a><!-- m --><br />I don't own a Mac though.<br /><br /><blockquote class="uncited"><div>One thing I'd add is support for specifying a custom moai-fork in the settings file. Since I have some modifications to the core I would like to build from my own:)</div></blockquote><br />It's in the plan, have a look at line 4 of easter.lua. there's moai = ...<br /><br /><blockquote class="uncited"><div>I'm curious about the plug in system. Is that going to be able to patch files in the moai-dev repo? I ask because I've also added several bits and pieces to the moai-dev repo in my own fork that I'd happily convert to plug-ins for distribution.</div></blockquote><br />It will inject text into code (text file) just like what Moai's already doing to generate the android host. However, it will use a more understandable template engine and the templating code will be Lua. I'm still partial about mustache due to it's {{ }} marker. {{ and }} are actually valid syntax in C++ and Java, although no sane person would open a scope like that (One brace is enough).<br /><br />You can look at the current Android host, it generates a new source file if you change your plugin settings. (Yes, Moai already has a make-shift plugin system).</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Dec 17, 2012 1:05 pm</strong></div>
				<div class="author">by <strong>JDance</strong></div>
				<div class="content"><blockquote><div><cite>stun wrote:</cite>Sounds like a great idea, I'd happily contribute. <br /><br />I'm curious about the plug in system. Is that going to be able to patch files in the moai-dev repo? I ask because I've also added several bits and pieces to the moai-dev repo in my own fork that I'd happily convert to plug-ins for distribution.<br /><br />How are you going to manage multiple plug-ins patching the same moai-dev files though? For example GLUTHost and AKU-luaext need to be patched for every additional 3rd party library that is added?</div></blockquote><br /><br />Well I guess the &quot;patch&quot; would really be just one init line or something like that. For example with every lua extension another line of &quot;luaopenXX&quot; has to be added. Adding those lines from several plugins should not be a problem.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Dec 17, 2012 1:06 pm</strong></div>
				<div class="author">by <strong>JDance</strong></div>
				<div class="content"><blockquote><div><cite>thebullno1 wrote:</cite>It's in the plan, have a look at line 4 of easter.lua. there's moai = ...</div></blockquote><br /><br />Woot where can I find easter.lua?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Dec 18, 2012 3:22 am</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content"><blockquote><div><cite>JDance wrote:</cite><blockquote><div><cite>thebullno1 wrote:</cite>It's in the plan, have a look at line 4 of easter.lua. there's moai = ...</div></blockquote><br /><br />Woot where can I find easter.lua?</div></blockquote><br />In the my first post. This is a plan. I haven't started yet  <img src="images/smilies/icon_e_wink.gif" alt=";)" title="Wink" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Dec 18, 2012 10:25 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">Got a repo?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Dec 21, 2012 5:47 am</strong></div>
				<div class="author">by <strong>dooms101</strong></div>
				<div class="content">So easter would end up being a command line tool written in Lua, correct? I might be interested in writing a little IDE in Java (for portability) around it. I've been growing really tired of my current workflow using all these batch files and different editors... I use Visual Studio 2010 and SQL Server Management Studio for my day job so you can imagine how pampered I am. I know there was another IDE floating around here somewhere but I think that project was abandoned.<br /><br />If I did write an IDE it would be more like a glorified text editor, with the ability to manage a project file structure (or maybe multiple projects), use a syntax highlighted multi-tab editor, and an easy interface to deploy to a host (or simulator) and whatnot. I mostly want to write it for my own sake but I'll happily share the source. I would love to have a tool like easter to build it off.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Dec 21, 2012 12:28 pm</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content"><blockquote><div><cite>ibisum wrote:</cite>Got a repo?</div></blockquote><br />Not yet, I'm busy with projects right now. And school's about to start soon. I may start a serious Moai project in the next few months so easter is a tool that I want for myself, but I just want to share the ideas.<br /><br /><blockquote><div><cite>dooms101 wrote:</cite>So easter would end up being a command line tool written in Lua, correct?</div></blockquote><br />Yes.<br /><br />For me, the best IDE is gvim. When I use Visual Studio, I <span style="font-weight: bold">must</span> have visvim installed or I won't be able to code at all. It has all the features you mentioned with the proper plugins.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Mar 11, 2013 2:35 pm</strong></div>
				<div class="author">by <strong>Nepherhotep</strong></div>
				<div class="content">Such a toolset will be extremely useful. Although writing it from scratch will probably be quite hard. What about using existing build systems?<br />For example - <!-- m --><a class="postlink" href="http://www.scons.org/">http://www.scons.org/</a><!-- m -->, which can be used for building complicated software (like Moai is).<br />Instead of launching &quot;easter run-some-command&quot; it will require to run appropriate target &quot;scons build-some-target&quot;. At least easter can be made as a simple wrapper script upon those build systems.<br />Another idea - for pure lua modules use LuaRocks deployment system. I think it won't be difficult to create MOAI mirror of lua libraries.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Mar 31, 2013 10:30 pm</strong></div>
				<div class="author">by <strong>Gianmichele</strong></div>
				<div class="content">This is a really nice idea. Any update on it?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jun 25, 2013 7:02 am</strong></div>
				<div class="author">by <strong>thebullno1</strong></div>
				<div class="content"><blockquote><div><cite>Nepherhotep wrote:</cite>Such a toolset will be extremely useful. Although writing it from scratch will probably be quite hard. What about using existing build systems?<br />For example - <!-- m --><a class="postlink" href="http://www.scons.org/">http://www.scons.org/</a><!-- m -->, which can be used for building complicated software (like Moai is).<br />Instead of launching &quot;easter run-some-command&quot; it will require to run appropriate target &quot;scons build-some-target&quot;. At least easter can be made as a simple wrapper script upon those build systems.<br />Another idea - for pure lua modules use LuaRocks deployment system. I think it won't be difficult to create MOAI mirror of lua libraries.</div></blockquote><br /><br />Personally, I don't like an official repository since it makes personal fork more difficult. It's not meant to mirror or replace LuaRocks, rather, if you want lua rock libraries (which should be pure lua), you can just point your dependency to those folders. The aim is to create a tool which manages dependencies and automates building for different systems.<br /><br />MOAI itself is moving towards a CMake based system. Moreover, even without it, you can still build Moai using platform specific commands like vs-build or xcodebuild. This is also geared towards Android/iOS app building rather than building Moai.<br /><br /><blockquote class="uncited"><div>This is a really nice idea. Any update on it?</div></blockquote><br />I will be very busy at least until next year. So no <img src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sun Jun 30, 2013 10:25 pm</strong></div>
				<div class="author">by <strong>halfnelson</strong></div>
				<div class="content">I have been working on one that might be ready to try soonish. I made it to improve my workflow since I dev the same game on at least 3 different boxes and got annoyed at having to setup android sdk etc on each one. It might be useful to people.<br /><br />I am still working on phase one:<br /><ul><li>Cross platform support: code runs on windows, mac, linux : Done</li><li>Create a new project &quot;moalcli new sampleapp&quot;: Done </li><li>Can build simple windows project &quot;moaicli build windows&quot; : Done (just copies lua files into folder with host executable)</li><li>Can run simple windows project &quot;moaicli start windows&quot;: Done</li><li>Can build android project &quot;moaicli build android&quot;: WIP <br /><ul><li>Detect or install Apache Ant: Done</li><li>Detect or install JDK: Done</li><li>Detect or install Android SDK: Done</li><li>Detect or install Android platform tools: Done</li><li>Detect or install specific platform sdk eg Android-10: WIP</li></ul></li></ul><br />Initial goal is to have windows and android builds working on windows and linux and android builds working on linux.<br />I don't own a mac or xcode so I am out of luck there.<br /><br />once phase one is done, I want to have it able to build the moai lib on each platform and auto install tools to do so. This might require me to use mingw to build libmoai on windows. Once this is in place it should be easy to come up with a plugin structure that will allow someone to bundle an extension to moai and the cli tool can include it into the host and libmoai and build the lot.<br /><br />The whole thing is done in JRuby. I looked at lua, in particular &quot;lake&quot; but the ecosystem is better (IMHO) in jruby (although I have uncovered some bugs, so maybe it will be just normal ruby, also cross platform)<br /><br />This was not meant to replace a future version of easter. It only exists because easter does not, and I needed the tools.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: easter - A community toolset</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sat Jul 06, 2013 10:11 pm</strong></div>
				<div class="author">by <strong>halfnelson</strong></div>
				<div class="content">Update:<br />Windows will now build and run the Android host and install automatically the JFK,sdk,build-tools, platform-tools,and the requested build target (Android-10). It will also launch it on a device using &quot;moaicli start Android&quot;<br /><br />To get plugins working and to make them easier to author, I have got  the windows  and libmoai to compile under mingw. This should mean that for windows devs who just want to use moai and Lua, they will not have to download visual c. It also means that plugins could be distributed as .a files and just linked in or turned into so or dll without having to worry about abi changes between vs versions. Mingw can be auto downloaded if  a compile is needed.<br /><br />I have also investigated jnlua as a way to make java plugins easier for Android. should only need to ship a jar.<br /><br />my proof of concept would be to make untz a plugin<br /><br />Will keep you posted.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>