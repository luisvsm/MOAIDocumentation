<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>Moai Forum &bull; View topic - Audio input</title>

<link href="styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" />
<link type="image/vnd.microsoft.icon" rel="shortcut icon" href="styles/proFormell/theme/images/favicon.ico">
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>Moai Forum</h1>
		<p>The mobile platform for pro game developers<br /><a href="index.html">/forums/</a></p>

		<h2>Audio input</h2>
		<p><a href="audio-input-t398/index.html">/forums/audio-input-t398/</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
		
			<div class="post">
				<h3>Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Jan 20, 2012 5:02 am</strong></div>
				<div class="author">by <strong>kengo.nakajima</strong></div>
				<div class="content">Hi, now I am trying to add voice chat in my game, wondering how to do it especially on iOS.<br /><br />Now, I think this could be a basic structure when using MOAI :<br /><br />1. Get audio data from CoreAudio on iOS,<br />2. Send and receive it through luaext socket,<br />3. Play with UNTZ.<br /><br />Now MOAI doesn't have any API to do 1, so I think I have to write it,<br />but any other solutions?<br /><br /> - Anyone implemented already?<br /> - well-known lua modules?<br /> - something else?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Jan 20, 2012 8:12 am</strong></div>
				<div class="author">by <strong>kengo.nakajima</strong></div>
				<div class="content">&gt; 1. Get audio data from CoreAudio on iOS,<br />&gt; 2. Send and receive it through luaext socket,<br />&gt; 3. Play with UNTZ.<br /><br />Hi, I have tested OpenAL at <!-- m --><a class="postlink" href="https://github.com/kengonakajima/snippets/tree/master/openal">https://github.com/kengonakajima/snippe ... ter/openal</a><!-- m --><br />and and it is OK for 1 by porting this openal code to lua extention.<br /><br />Next is 3, but now MOAI doesn't have Untz sample lua code that<br />reads PCM data from memory buffer. Could you show me an exsample ?<br /><br />In moai source code, It sure has in-memory API but no demos so I couldn't find out how to do it.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Jan 20, 2012 9:15 am</strong></div>
				<div class="author">by <strong>ibisum</strong></div>
				<div class="content">I guess it would be a similar issue for Camera input as well?  I'd like to do some camera processing in moai .. so I guess anything you've learned about crossing the C++/Lua gap for Audio is applicable for video streaming as well .. any tips?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sat Jan 21, 2012 9:22 pm</strong></div>
				<div class="author">by <strong>kengo.nakajima</strong></div>
				<div class="content">&gt; 1. Get audio data from CoreAudio on iOS,<br />&gt; 2. Send and receive it through luaext socket,<br />&gt; 3. Play with UNTZ.<br /><br />Hi, i have sent a pull request for on-memory samples that enables step 3. <br /><br /><!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/pull/106">https://github.com/moai/moai-dev/pull/106</a><!-- m --><br /><br />Please consider applying it!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Jan 23, 2012 12:10 am</strong></div>
				<div class="author">by <strong>polyrhythm</strong></div>
				<div class="content">Great work Kengo.<br /><br />Since you are looking at this, can you see a way to set the play rate of the buffer? It would be good to be able to pitch sounds.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jan 24, 2012 4:52 am</strong></div>
				<div class="author">by <strong>kengo.nakajima</strong></div>
				<div class="content">Hi, I've added MOAIAudioSampler  trial implementation on <br /><!-- m --><a class="postlink" href="https://github.com/moai/moai-dev/pull/106">https://github.com/moai/moai-dev/pull/106</a><!-- m --><br />It has record-playback demo, so now step 1 and 3 are done.<br />It works well on iOS devices.<br />Plz look at it!<br /><br />and, to polyrithm, do you mean the first arg of MOAIUntzSystem.initialize? <br />You can specify default sampling frequency.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Jan 24, 2012 8:48 pm</strong></div>
				<div class="author">by <strong>polyrhythm</strong></div>
				<div class="content">Hi Kengo<br /><br />No I mean playback rate of the sample, so <br /><br />sample:setRate(1) -- normal rate<br />sample:setRate(2) -- double speed (octave higher)<br />sample:setRate(0.5) -- half speed (octave lower)<br /><br />Without having tried it, your new code looks great. But how can one control the frequency of that sine wave? <br />Also, do you not get clicks when you loop it? I get small intervals of silence when I loop a sound file.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jan 25, 2012 1:18 am</strong></div>
				<div class="author">by <strong>patrick</strong></div>
				<div class="content">Nice work, Kengo! We've been slammed getting the Android update for Wolf Toss out the door. Thanks for the pull request - will grab it before next release.<br /><br />Thanks!</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jan 25, 2012 2:16 am</strong></div>
				<div class="author">by <strong>bslayerw</strong></div>
				<div class="content"><blockquote><div><cite>polyrhythm wrote:</cite>Hi Kengo<br /><br />No I mean playback rate of the sample, so <br /><br />sample:setRate(1) -- normal rate<br />sample:setRate(2) -- double speed (octave higher)<br />sample:setRate(0.5) -- half speed (octave lower)<br /><br />Without having tried it, your new code looks great. But how can one control the frequency of that sine wave? <br />Also, do you not get clicks when you loop it? I get small intervals of silence when I loop a sound file.</div></blockquote><br /><br />Untz doesn't support setting the rate/frequency/pitch (or any other effects).</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Audio input</h3>
				<div class="date"><img src="styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Jan 25, 2012 8:54 am</strong></div>
				<div class="author">by <strong>kengo.nakajima</strong></div>
				<div class="content">Hi patrick,  thank you for your reply! I'll add some performance improvement on them later.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />http://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>