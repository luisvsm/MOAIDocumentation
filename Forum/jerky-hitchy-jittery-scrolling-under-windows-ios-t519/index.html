<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - jerky / hitchy / jittery scrolling under Windows, iOS</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Moai SDK" href="../feed.php%3Ff=7.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - jerky / hitchy / jittery scrolling under Windows, iOS" href="../feed.php%3Ff=7&amp;t=519.html" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '20';
	var base_url = '/forums/jerky-hitchy-jittery-scrolling-under-windows-ios-t519/';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/jerky-hitchy-jittery-scrolling-under-windows-ios-t519/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../moai-development-forums.html">Moai Development Forums</a> <strong>&#8249;</strong> <a href="../moai-sdk-developer-support.html">Moai SDK</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="../memberlist.php%3Fmode=email&amp;t=519.html" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=7&amp;t=519&amp;start=0&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">jerky / hitchy / jittery scrolling under Windows, iOS</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Discussion about using Moai SDK - post questions, issues, and ideas here.<br /></div>
	<p>
		
			<strong>Moderators:</strong> naturally, seebs
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			42 posts
			 &bull; <a href="index.html#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>1</strong> of <strong>3</strong></a> &bull; <span><strong>1</strong><span class="page-sep">, </span><a href="page20.html">2</a><span class="page-sep">, </span><a href="page40.html">3</a></span>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p2408" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p2408">jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Sat Feb 18, 2012 2:23 am </p>

			

			<div class="content">I'm working with a really simple case:<br />* create a tile deck<br />* instantiate a couple dozen fairly large sprites from it, put them next to each other<br />* set the layer's camera<br />* call camera:moveLoc over 10 seconds or so<br /><br />It will noticeably hitch several times a second.<br /><br />I've tried replacing the camera:moveLoc with an update coroutine that moves the cam a fixed # of pixels per call, or a # multiplied by device time, or a # multipled by elapsed time, with no improvement in result.<br /><br />I've cleared and set a variety of loop flags, pretty much every possible combo.<br /><br />On Windows, modifying GlutHost::_onPaint to get a glFinish at the end smooths it significantly:<br /><br />[code=C++]static void _onPaint () {	<br />	AKURender ();<br />	glutSwapBuffers ();<br />	glFinish();<br />	//glFlush(); -- doesn't improve anything, only glFinish works.<br />}<br />[/code]<br /><br />Adding a similar call on iOS does not help, leading me to believe the glFinish simply hides a bug involving the update loop elsewhere.<br /><br />Does anyone else have a nice, smoothly scrolling background? This is such a simple repro case, I find it hard to believe it's something strange I'm doing in my program. OTOH, on initial examination of the MOAI update loop, I didn't find anything obviously wrong-- it's also fairly basic, just running sim steps to catch the sim up to system time.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2408">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2409" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2409">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>Mud</strong> &raquo; Sat Feb 18, 2012 3:07 am </p>

			

			<div class="content">The developers seem to have a lot on their plate. I imagine it would save them time when evaluating this if you could post a minimal sample that reproduces it.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2409">
			<dt>
				<strong>Mud</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 57</dd><dd><strong>Joined:</strong> Mon Jan 30, 2012 4:54 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2410" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2410">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Sat Feb 18, 2012 7:31 am </p>

			

			<div class="content">I'll post one later this weekend. It's pretty much what I wrote, but I'm not at a computer where I can code just this minute.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2410">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2411" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2411">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Sat Feb 18, 2012 7:55 am </p>

			

			<div class="content">Alright, here we go. <br /><br />Hitchy on multiple PCs, iPhone simulator on a Mac, and a couple iPhones.<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="lua" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> screenWidth<span style="color: #66cc66;">,</span> screenHeight <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">960</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">640</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAISim<span style="color: #66cc66;">.</span>openWindow <span style="color: #66cc66;">&#40;</span> <span style="color: #ff6666;">&quot;scrolltest&quot;</span><span style="color: #66cc66;">,</span> screenWidth<span style="color: #66cc66;">,</span> screenHeight<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> viewport <span style="color: #66cc66;">=</span> MOAIViewport<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">viewport<span style="color: #66cc66;">:</span>setSize<span style="color: #66cc66;">&#40;</span>screenWidth<span style="color: #66cc66;">,</span> screenHeight<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">viewport<span style="color: #66cc66;">:</span>setScale<span style="color: #66cc66;">&#40;</span>screenWidth<span style="color: #66cc66;">,</span> screenHeight<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">viewport<span style="color: #66cc66;">:</span>setOffset<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> tex <span style="color: #66cc66;">=</span> MOAITexture<span style="color: #66cc66;">.</span>new <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">tex<span style="color: #66cc66;">:</span>load <span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">'pixelletters.png'</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> deck <span style="color: #66cc66;">=</span> MOAITileDeck2D<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">deck<span style="color: #66cc66;">:</span>setTexture<span style="color: #66cc66;">&#40;</span>tex<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">deck<span style="color: #66cc66;">:</span>setSize<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> w<span style="color: #66cc66;">,</span>h <span style="color: #66cc66;">=</span> tex<span style="color: #66cc66;">:</span>getSize<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">deck<span style="color: #66cc66;">:</span>setRect<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span>w<span style="color: #66cc66;">,</span>h<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> layer <span style="color: #66cc66;">=</span> MOAILayer2D<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">layer<span style="color: #66cc66;">:</span>setViewport <span style="color: #66cc66;">&#40;</span>viewport<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">local</span> camera <span style="color: #66cc66;">=</span> MOAITransform<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">layer<span style="color: #66cc66;">:</span>setCamera<span style="color: #66cc66;">&#40;</span>camera<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">MOAISim<span style="color: #66cc66;">.</span>pushRenderPass <span style="color: #66cc66;">&#40;</span>layer<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">for</span> i<span style="color: #66cc66;">=</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">10</span> <span style="color: #aa9900; font-weight: bold;">do</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> sprite <span style="color: #66cc66;">=</span> MOAIProp2D<span style="color: #66cc66;">.</span>new<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> &nbsp; &nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; sprite<span style="color: #66cc66;">:</span>setDeck<span style="color: #66cc66;">&#40;</span>deck<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; sprite<span style="color: #66cc66;">:</span>setIndex<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; layer<span style="color: #66cc66;">:</span>insertProp<span style="color: #66cc66;">&#40;</span>sprite<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp; &nbsp; &nbsp; &nbsp; sprite<span style="color: #66cc66;">:</span>setLoc<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>i<span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">*</span>w<span style="color: #66cc66;">,</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #aa9900; font-weight: bold;">end</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">camera<span style="color: #66cc66;">:</span>moveLoc<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">10000</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span><span style="color: #cc66cc;">20</span><span style="color: #66cc66;">,</span>MOAIEaseType<span style="color: #66cc66;">.</span>LINEAR<span style="color: #66cc66;">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><br /></ol></code></dd></dl></div>

			<div class="rules">You do not have the required permissions to view the files attached to this post.</div>

		</div>

		
			<dl class="postprofile" id="profile2411">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2412" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2412">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>plamen</strong> &raquo; Sat Feb 18, 2012 10:37 am </p>

			

			<div class="content">yeah, i was about to post same observations but on PC host. I expected it to happen only in simulator but not on actual IOS device. I dont know what to do with my project now. if its not working smoothly on IOS/Android.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2412">
			<dt>
				<strong>plamen</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 21</dd><dd><strong>Joined:</strong> Sat Jan 28, 2012 8:20 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2415" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2415">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Sat Feb 18, 2012 6:17 pm </p>

			

			<div class="content">PC -&gt; has the hitching judder<br />Android -&gt; has the hitching judder<br />Ipad -&gt; runs completely smoothly<br /><br />How much better is the performance on Windows - it may be worth exploring building libmoai.so for Android using glfinish......</div>

			

		</div>

		
			<dl class="postprofile" id="profile2415">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2417" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2417">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Sat Feb 18, 2012 11:06 pm </p>

			

			<div class="content">On Windows (on the system I was using-- could vary between hardware), it got a LOT better with glFinish. But it got no better when I did the same to iPhone. So possibly it was just random luck, in that glFinish caused the timing to more closely match between wall-clock per frame and sim step per frame.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2417">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2418" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2418">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ibisum</strong> &raquo; Sat Feb 18, 2012 11:55 pm </p>

			

			<div class="content">I'm not seeing a lot of jitter on Android, but I am on testing on fast devices, mostly.  I must say that the GC issue on Android infects not just MOAI but other GL engines, also .. there are certain things that can be done to tune the use of GC for graphics properly on Android, and either a) MOAI team have done it,  b) haven't done it yet, or c) something about your test rigs is odd?</div>

			<div id="sig2418" class="signature">;<br />--<br /><!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile2418">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong>ibisum</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1413</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2422" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2422">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Sun Feb 19, 2012 3:34 am </p>

			

			<div class="content">The jitter I'm discussing is not due to GC. It happens multiple times a second. I breakpointed in the GC code, and it isn't happening with that frequency. (Which is good, given the code. 3 times/second GC on this sample would be insane.)<br /><br />And it's not my test rigs, which are wildly divergent hardware with nothing in common except for the fact they use transistors. <img src="../images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>

			

		</div>

		
			<dl class="postprofile" id="profile2422">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2430" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2430">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Sun Feb 19, 2012 3:56 pm </p>

			

			<div class="content">There are definitely timing issues for Windows and Android<br />see <!-- l --><a class="postlink-local" href="http://192.168.20.226:3000/forums/post2194.html?hilit=judder&amp;sid=d3032b75f9bc5dfb7b8704fc00f074a1#p2194">post2194.html?hilit=judder&amp;sid=d3032b75f9bc5dfb7b8704fc00f074a1#p2194</a><!-- l --><br /><br />Increasing the the sim step size helps in this case but not the code above.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2430">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2441" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2441">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Mon Feb 20, 2012 12:56 am </p>

			

			<div class="content">I'm running the code on my system now and am seeing the hitch you're talking about. I am seeing it in both debug and release builds. glFinish didn't make a difference on Windows for me.<br /><br />Both the GLUT and Android host use timers to trigger redraws. There isn't any notion of a proper v-sync in these hosts - just set the timer to 60hz and pray. So if we get two updates in a frame or miss a frame we're going to see a hitch pretty much no matter what. The iOS host uses the DisplayLink API, which I believe is synchronized with vblank. This would explain the smooth(er) behavior on iPad.<br /><br />So... this is something that needs some research. We won't be able to get to it internally until after 1.0, though I recognize it as a major problem for those of you developing on Android and desktop.<br /><br />I strongly suspect the timer-based implementation is to blame, but don't have a smoking gun. If anyone has time to either figure out how to implement v-sync in the existing hosts or set up a new host I'd be really interested in the results.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2441">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2445" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2445">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>ibisum</strong> &raquo; Mon Feb 20, 2012 9:17 am </p>

			

			<div class="content">DoubleBuffering + GLFlush() -&gt; GLFinish() == possible solution?<br /><br /><!-- m --><a class="postlink" href="http://stackoverflow.com/questions/589064/how-to-enable-vertical-sync-in-opengl">http://stackoverflow.com/questions/5890 ... -in-opengl</a><!-- m --><br /><br />Also of interest, what is reported here:<br /><br /><!-- m --><a class="postlink" href="http://gamedev.stackexchange.com/questions/16699/vsync-real-30fps-on-android">http://gamedev.stackexchange.com/questi ... on-android</a><!-- m --><br /><br />&quot;interval is silently clamped to minimum and maximum implementation dependent values before being stored; these values are defined by EGLConfig attributes EGL_MIN_SWAP_INTERVAL and EGL_MAX_SWAP_INTERVAL respectively.&quot; <br /><br />Perhaps these can be tweaked in the Android host for fun and profit?<br /><br />EDIT: Another interesting solution of the problem for Android - self-cooked vsync: <br /><br /><!-- m --><a class="postlink" href="http://quirkygba.blogspot.com/2010/10/android-native-coding-in-c.html">http://quirkygba.blogspot.com/2010/10/a ... -in-c.html</a><!-- m --></div>

			<div id="sig2445" class="signature">;<br />--<br /><!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile2445">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong>ibisum</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1413</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2451" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2451">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Mon Feb 20, 2012 9:49 am </p>

			

			<div class="content">It would be really useful to find the &quot;smoking gun&quot; as this issue has been frustrating me for over 2 months now.<br /><br />I think it's more important to solve on the android platform (as moai is &quot;sold&quot; as a mobile framework) than windows but they are related some how.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2451">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2454" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2454">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Mon Feb 20, 2012 11:18 am </p>

			

			<div class="content">I don't think this is a vsync issue.<br /><br />I installed<br /><!-- m --><a class="postlink" href="http://www.opengl.org/sdk/tools/gDEBugger/">http://www.opengl.org/sdk/tools/gDEBugger/</a><!-- m --><br /><br />You can debug an exe at each call to GL.<br /><br />and stepped through the code above on Windows. Where the &quot;judder&quot; appears you can see a physical jump (ie moai is telling GL to draw the buffer but rather than moving at a fixed step for example 2 pixels each time the jump suddenly goes up to 15 pixels)<br /><br />This points it back at timing... or some sort of attempt to catchup<br /><br />So Moai is saying to gl -&gt; move 2 pixels, move 2 pixels, move 2 pixels, move 15 pixels, move 2 pixels<br /><br />Why it is doing this I don't know... is it processing lua and then resampling where layers, objects should be?</div>

			

		</div>

		
			<dl class="postprofile" id="profile2454">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2467" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2467">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong> &raquo; Mon Feb 20, 2012 8:37 pm </p>

			

			<div class="content">@mikegriffin That's right. If we miss an update due to timer slowdown then Moai will perform multiple sim steps (if 'spin' is allowed on MOAISim). You can prevent this and force MOAISim to perform a single, fixed step every time if gets an update... but then then if the timer slows down we'll see the opposite problem - a freeze or lag. The 15 pixel change you're seeing is due to multiple sim steps being processed between draws. Check out MOAISim.setLoopFlags to modify the behavior.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2467">
			<dt>
				<img src="http://www.gravatar.com/avatar/3f2c5c26c628e4b5500d87c737c60015?s=120.jpg" width="120" height="120" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">patrick</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 653</dd><dd><strong>Joined:</strong> Sun Apr 03, 2011 5:50 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2471" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2471">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>matthew.franklin</strong> &raquo; Mon Feb 20, 2012 9:57 pm </p>

			

			<div class="content">Just to verify, I've re-run the sample code on the following platforms:<br /><br />* 3 different Windows XP PCs, using moai-untz.exe<br />* A core i3 Mac, using iPhone Simulator<br />* An iPhone 3GS<br /><br />(Haven't run on an iPhone 4 or Android, as I don't have one handy right now.)<br /><br />All of the above demonstrated highly noticeable jerkiness / jitter / judder / (whatever term we're using now) in scrolling.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2471">
			<dt>
				<strong>matthew.franklin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 7</dd><dd><strong>Joined:</strong> Fri Jan 13, 2012 10:35 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2477" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2477">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Tue Feb 21, 2012 9:18 am </p>

			

			<div class="content">I'm pretty sure I played with all the SIM loop flag options with no obvious difference. I'll revisit to confirm.<br /><br />If the flags are not making any difference I'm beginning to wonder if the flags are being honoured correctly.<br /><br />Is there any other place frames would be dropped?  In the renderer somewhere?<br /><br />My preference would be for a slowdown or freeze rather than a &quot;SPIN&quot;..<br /><br />The SIM and the clock shouldn't be going too far out due to performance (ie physics, too many sprites, too many graphics, audio)  because the &quot;jitter&quot; appears on a very basic programme (ie 2 sprites with 1 moving - no physics)</div>

			

		</div>

		
			<dl class="postprofile" id="profile2477">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2478" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2478">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>mikegriffin</strong> &raquo; Tue Feb 21, 2012 10:48 am </p>

			

			<div class="content">OK<br /><br />I have tried all these flags (ie MOAISim.setLoopFlags ( MOAISim.LOOP_FLAGS_FIXED) )<br /><br />LOOP_FLAGS_DEFAULT	= SIM_LOOP_ALLOW_SPIN | SIM_LOOP_LONG_DELAY;<br />LOOP_FLAGS_FIXED		= SIM_LOOP_FORCE_STEP | SIM_LOOP_NO_DEFICIT | SIM_LOOP_NO_SURPLUS;<br />LOOP_FLAGS_MULTISTEP	= SIM_LOOP_ALLOW_SPIN | SIM_LOOP_NO_SURPLUS;<br />LOOP_FLAGS_SOAK		= SIM_LOOP_LONG_DELAY | SIM_LOOP_ALLOW_SOAK;<br /><br />LOOP_FLAGS_FIXED offers the smoothest performance but the &quot;JUDDER&quot; is still there!!!</div>

			

		</div>

		
			<dl class="postprofile" id="profile2478">
			<dt>
				<strong>mikegriffin</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 68</dd><dd><strong>Joined:</strong> Thu Feb 02, 2012 7:04 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2479" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2479">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>plamen</strong> &raquo; Tue Feb 21, 2012 2:34 pm </p>

			

			<div class="content">Some additional observations on Windows host.<br />I use IntelliJ IDEA IDE. For some reason the console of this IDE is not refreshed in real time as it happens when i start MOAI host from normal windows console (cmd). When i use print statement (for debug reasons) i receive results with big delay sometimes when i close the host. But!!! Jittering behavior is noticeably less than when i start same project from windows console. Hope this can give some additional help on this subject.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2479">
			<dt>
				<strong>plamen</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 21</dd><dd><strong>Joined:</strong> Sat Jan 28, 2012 8:20 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p2484" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p2484">Re: jerky / hitchy / jittery scrolling under Windows, iOS</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">adam</span></strong> &raquo; Tue Feb 21, 2012 7:41 pm </p>

			

			<div class="content">Looked at this for a bit, our observations:<br /><br />Each platform seems to be a different problem.<br /><br />On iOS, the issue seems to be the sim stepping more than once per frame. We'll have to go over the budget calculations a little closer to see the problem, you can change the loop flags to fix this though. ( To any that only do a simple step, so boost/fixed, not spin. )<br /><br />On Android there seems to be a larger issue. First several of the devices we have seem to have lock on the buffer swap at 30 and 60fps. This results in the frame time jumping from ~16ms to &gt;33ms every few frames, so even setting different flags won't help. My only thought here is to lock the framerate to 30 Fps on android devices that can't maintain 60. Double checking with some very basic OpenGL samples today, but even with nothing rendering we noticed the framerate would not stay at 60.<br /><br />Haven't looked at PC/OSX close yet, but its probably something similar to the above.</div>

			

		</div>

		
			<dl class="postprofile" id="profile2484">
			<dt>
				<img src="../download/file.php%253favatar%253d229_1338582463.png" width="100" height="100" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">adam</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 265</dd><dd><strong>Joined:</strong> Wed Sep 14, 2011 6:50 pm</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		<a href="page20.html" class="right-box right">Next</a>
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			42 posts
			 &bull; <a href="index.html#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>1</strong> of <strong>3</strong></a> &bull; <span><strong>1</strong><span class="page-sep">, </span><a href="page20.html">2</a><span class="page-sep">, </span><a href="page40.html">3</a></span>
		</div>
	
</div>


	<p></p><p><a href="../moai-sdk-developer-support.html" class="left-box left" accesskey="r">Return to Moai SDK</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7" selected="selected">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 1 guest</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.061s | 12 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>