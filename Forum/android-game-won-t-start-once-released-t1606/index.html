<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>Moai Forum &bull; View topic - Android game won't start once released</title>

<link rel="alternate" type="application/atom+xml" title="Feed - Moai Forum" href="../feed.php.html" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="../feed.php%3Fmode=forums.html" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="../feed.php%3Fmode=topics.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="../feed.php%3Fmode=topics_active.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - Moai SDK" href="../feed.php%3Ff=7.html" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Android game won't start once released" href="http://192.168.20.226:3000/forums/feed.php?f=7&amp;t=1606" />

<!--
	phpBB style name: proFormell
	Based on style:   prosilver (this is the default phpBB3 style)
	Inspired by:	  Formell (Joomla Style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:  	  Marc Alexander
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/';
	var onload_functions = new Array();
	var onunload_functions = new Array();
	var is_ie6 = false;

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<!--[if lt IE 7]>
<script type="text/javascript">
// <![CDATA[
var is_ie6 = true;
// ]]>
</script>
<![endif]-->


<link href="../styles/proFormell/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />

<link href="../style.css" rel="stylesheet" type="text/css" media="screen, projection" />



<link href="../styles/proFormell/theme/images/favicon.ico" rel="shortcut icon" />

<script type="text/javascript" src="../styles/prosilver/template/forum_fn.js"></script>
<script src="../styles/prosilver/template/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
// <![CDATA[
/**
* New pop-up functions
* based on  http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/
*/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;
var openPopup = '';

//loading popup with jQuery magic!
function loadPopup()
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupPM').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupPM').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'PM';
	}
}

//disabling popup with jQuery magic!
function disablePopup()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'PM')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupPM').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}

//centering popup
function centerPopup()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupPM').height();
	var popupWidth = $('#popupPM').width();
	//centering
	$('#popupPM').css({
	'position': 'absolute',
	'top': windowHeight/2-popupHeight/2,
	'left': windowWidth/2-popupWidth/2
	});
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

$(document).ready(function(){
	
	resize_images();
	
	
	// IE6 and below PNG fix (not really)
	if(is_ie6)
	{
		replace_png();
	}
	
	//CLOSING POPUP
	//Click the x event!
	$('#popupPMClose').click(function(){
		disablePopup();
	});
	//Click out event!
	$('#backgroundPopup').click(function(){
		disablePopup();
		disableImage();
	});
	//Press Escape event!
	$(document).keypress(function(e){
		if(e.keyCode==27 && popupStatus==1)
		{
			disablePopup();
			disableImage();
		}
	});
	
	
	// Image popup
	$('img', 'dt.attach-image').click(function(){
		image_load($(this).attr('src'), $(this).attr('alt'));
		centerImage();
	});
	
	$('.content img').click(function(){
		var check = $(this).parent().hasClass('content');
		if(check)
		{
			image_load($(this).attr('src'), $(this).attr('alt'));
			centerImage();
		}
	});
	
	// Closing Image popup
	//Click the x event!
	$('#popupImageClose').click(function(){
		disableImage();
	});
	
	//Click image box event
	$('#popupImage').click(function(){
		disableImage();
	});
	
	//Click image event
	$('#ImagePopup img').click(function(){
		disableImage();
	});
	

});

/**
* Replaces weird looking PNG files with the respectie GIF file
* Only run this if the browser is IE6 or below
*/
function replace_png()
{
	// Fix Logo
	var str = $('#logo img').attr('src'); 
	$('#logo img').attr('src', str.substring(0, str.length - 3) + 'gif');
	
	// Fix forum icons
	$('dl.icon').each(function() {
		var str = $(this).css('background-image');
		if(str != '')
		{
			$(this).css('background-image', str.substring(0, str.length - 5) + 'gif")');
		}
	});
}


/**
* Image resizer
*/
function resize_images()
{
	var hello = $('dl.attachbox dd dl.file dt.attach-image img').innerWidth();
	var maxWidth = $('div.content').innerWidth() - 30;
	
	// resize the attached images
	$('img', 'dt.attach-image').each(function(i){
		// check the width of the image
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
	
	// resize the images that were added via [img] bbcode
	$('img', 'div.content').each(function(i){
		// check the width of the image
		$(this).css('max-width', maxWidth); // fix for IE
		if ($(this).width() > maxWidth)
		{
			// calculate new image dimensions
			newWidth = maxWidth;
			newHeight = $(this).height() / ( $(this).width() / maxWidth );
			   
			// set new image dimensions
			$(this).height(newHeight).width(newWidth);
		}
	});
}

/**
* Image pop-up
*/
function image_load(src, alt)
{
	//loads popup only if it is disabled
	if(popupStatus==0)
	{
		$('#ImagePopup').html('<img id="imgpopup" src="http://192.168.20.226:3000/forums/android-game-won-t-start-once-released-t1606/'&#32;+&#32;src&#32;+&#32;'" alt="' + alt + '" />');
		var windowWidth = document.documentElement.clientWidth;
		var windowHeight = document.documentElement.clientHeight;
		var maxWidth = windowWidth * 0.85;
		var maxHeight = windowHeight * 0.85;
		$('#popupImage img').css('max-width', maxWidth);
		$('#popupImage img').css('max-height', maxHeight);
		$('#backgroundPopup').css({'opacity': '0.7'});
		// Now let's make sure we actually see the image
		var scroll = $(window).scrollTop();
		$('#popupImage').animate({marginTop: scroll}, 'fast', function() {
			// Animation complete.
			});
		$('#backgroundPopup').fadeIn('slow');
		$('#popupImage').fadeIn('slow');
		popupStatus = 1;
		openPopup = 'Image';
	}
}

//centering popup
function centerImage()
{
	//request data for centering
	var windowWidth = document.documentElement.clientWidth;
	var windowHeight = document.documentElement.clientHeight;
	var popupHeight = $('#popupImage').height();
	var popupWidth = $('#popupImage').width();
	var newTop = windowHeight/2-popupHeight/2;
	var newLeft = windowWidth/2-popupWidth/2;
	//centering
	$('#popupImage').css({
	'position': 'absolute',
	'top': newTop,
	'left': newLeft
	});
	
	//only need force for IE6
	$('#backgroundPopup').css({'height': windowHeight});
}

//disabling popup with jQuery magic!
function disableImage()
{
	//disables popup only if it is enabled
	if(popupStatus==1 && openPopup == 'Image')
	{
		$('#backgroundPopup').fadeOut('slow');
		$('#popupImage').fadeOut('slow');
		popupStatus = 0;
		openPopup = '';
	}
}


// ]]>
</script>

</head>

<body id="phpbb" class="section-viewtopic ltr">
<!--- box border START -->
<div id="box">

<div class="top-left"></div><div class="top-center"></div><div class="top-right"></div>
<div id="left-border">
<div id="right-border">


<!--- box border END -->
<div class="inside">
 <div class="notopgap">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><!-- <span class="corners-top"><span></span></span> -->
			<div style="height: 140px ;">
			<div id="site-description">
				<div class="header-pad"><a href="index.html" title="" id="logo"><img src="../styles/proFormell/imageset/site-logo.png" width="410" height="98" alt="" title="" /></a></div>
			
		<!--		<p class="site-desc">The mobile platform for pro game developers</p> -->
				<p class="skiplink"><a href="index.html#start_here">Skip to content</a></p>
			</div>

		
    </div>

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="../moai-development-forums.html">Moai Development Forums</a> <strong>&#8249;</strong> <a href="../moai-sdk-developer-support.html">Moai SDK</a></li>

				<li class="rightside"><a href="index.html#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://192.168.20.226:3000/forums/memberlist.php?mode=email&amp;t=1606" title="E-mail friend" class="sendemail">E-mail friend</a></li><li class="rightside"><a href="http://192.168.20.226:3000/forums/viewtopic.php?f=7&amp;t=1606&amp;start=0&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="../faq.php.html" title="Frequently Asked Questions">FAQ</a></li>
				
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="index.html">Android game won't start once released</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Discussion about using Moai SDK - post questions, issues, and ideas here.<br /></div>
	<p>
		
			<strong>Moderators:</strong> <span style="color: #AA0000;" class="username-coloured">naturally</span>, seebs, <span style="color: #AA0000;" class="username-coloured">ezraanderson</span>
		

	</p>


<div class="topic-actions">

	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			12 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p8755" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="index.html#p8755">Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Sat Feb 02, 2013 7:20 am </p>

			

			<div class="content">I'm having this weird issue with my Android game. In all of my tests, the game has worked fine on a variety of devices. Upon releasing it to Google Play (<!-- m --><a class="postlink" href="https://play.google.com/store/apps/details?id=com.sgarces.bank">https://play.google.com/store/apps/deta ... arces.bank</a><!-- m -->) it fails to start on some devices (confirmed Galaxy Nexus) while in others it seems to be fine (like Galaxy S2).<br /><br />All I see when the game starts is that moai is starting and trying to run main.lua, after that, nothing:<br /><br /><dl class="codebox"><dt>Code: <a href="index.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code style="line-height: 30%;"><ol class="" style="font-family:monospace;"><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: Loading libmoai.so</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: Trying to load lib /mnt/asec/com.sgarces.bank-<span style="">1</span>/lib/libmoai.so 0x41932178</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: Added shared lib /mnt/asec/com.sgarces.bank-<span style="">1</span>/lib/libmoai.so 0x41932178</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiActivity onCreate: activity CREATED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiMoviePlayer onCreate: Initializing Movie Player</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> &nbsp;<span style="">479</span><span class="br0">&#41;</span>: GC_FOR_ALLOC freed 5720K, <span style="">48</span>% free 15560K/29767K, paused 23ms, total 24ms</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/SizeAdaptiveLayout<span class="br0">&#40;</span> &nbsp;<span style="">479</span><span class="br0">&#41;</span>: com.android.internal.widget.SizeAdaptiveLayout@4236b3b8child view android.widget.LinearLayout@41b79160 measured out of bounds at 120px clamped to 128px</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiActivity onStart: activity STARTED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiActivity onResume: activity RESUMED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiActivity onResume: RESUMING now</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: ConnectivityBroadcastReceiver onReceive: Connection = CONNECTION_WWAN</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/SizeAdaptiveLayout<span class="br0">&#40;</span> &nbsp;<span style="">479</span><span class="br0">&#41;</span>: com.android.internal.widget.SizeAdaptiveLayout@4236b3b8child view android.widget.LinearLayout@41b79160 measured out of bounds at 120px clamped to 128px</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/libEGL &nbsp;<span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/libEGL &nbsp;<span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/libEGL &nbsp;<span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiActivity onWindowFocusChanged: activity FOCUS CHANGED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/ActivityManager<span class="br0">&#40;</span> &nbsp;<span style="">300</span><span class="br0">&#41;</span>: Displayed com.sgarces.bank/.MoaiActivity: +474ms</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">W/IInputConnectionWrapper<span class="br0">&#40;</span> &nbsp;<span style="">585</span><span class="br0">&#41;</span>: showStatusIcon on inactive InputConnection</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">V/PhoneStatusBar<span class="br0">&#40;</span> &nbsp;<span style="">479</span><span class="br0">&#41;</span>: setLightsOn<span class="br0">&#40;</span>true<span class="br0">&#41;</span></div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiRenderer onSurfaceCreated: surface CREATED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiRenderer onSurfaceChanged: surface CHANGED</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiRenderer onSurfaceCreated: Running game scripts</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">I/MoaiLog <span class="br0">&#40;</span> <span style="">3512</span><span class="br0">&#41;</span>: MoaiRenderer runScripts: Running main.lua script</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> &nbsp;<span style="">300</span><span class="br0">&#41;</span>: GC_CONCURRENT freed 1842K, <span style="">25</span>% free 25889K/34375K, paused 22ms+12ms, total 125ms</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> &nbsp;<span style="">300</span><span class="br0">&#41;</span>: WAIT_FOR_CONCURRENT_GC blocked 0ms</div></li><br /><li style="line-height: 50%;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">D/dalvikvm<span class="br0">&#40;</span> &nbsp;<span style="">300</span><span class="br0">&#41;</span>: GC_EXPLICIT freed 160K, <span style="">26</span>% free 25753K/34375K, paused 9ms+11ms, total 115ms</div></li><br /></ol></code></dd></dl><br /><br />I have a log near the top of main.lua, which is not showing up. The screen stays black, but the app doesn't die (no Force Close). Any ideas?<br /><br />I'm running stock Version 1.3 (Build 160). Thanks.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8755">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8757" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8757">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>andrew.lundell</strong> &raquo; Sat Feb 02, 2013 9:15 am </p>

			

			<div class="content">I'm also experiencing the same problem.<br /><br />When I load the APK onto the phone directly, it works on all devices.<br /><br />When I upload that <span style="font-style: italic">exact same</span> APK to Google Play, it fails with a black screen on some devices.</div>

			<div id="sig8757" class="signature"><a href="https://twitter.com/apLundell" class="postlink">@apLundell</a>  &lt;-- Follow Me!</div>

		</div>

		
			<dl class="postprofile" id="profile8757">
			<dt>
				<strong>andrew.lundell</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 67</dd><dd><strong>Joined:</strong> Sat Oct 08, 2011 5:07 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8767" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8767">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Sat Feb 02, 2013 1:47 pm </p>

			

			<div class="content">I have a lead. I suspect this has to do with the new app encryption in Google Play that was introduced with Jelly Bean.<br /><br />All the devices I've seen fail so far were running JB. Working on trying to get to the root of the cause.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8767">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8768" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8768">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Sat Feb 02, 2013 3:42 pm </p>

			

			<div class="content">More info. According to my logs, Moai is failing to find my main.lua file, even though it's exactly where it's supposed to be.<br /><br />Looking at the source, it seems like Moai is assuming that the APK is going to be a zip file, and it can be treated as such. And this used to be true, prior to the aforementioned change in Google Play that has the app encrypted to prevent piracy. In this way, the assumption is no longer valid, and all the file functions just fail.<br /><br />A possible solution could be to replace all the file handling and use the NDK interface Asset_* functions, although that would not be a small change.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8768">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8777" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8777">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Sat Feb 02, 2013 10:42 pm </p>

			

			<div class="content">Well, seems like I found a workaround.<br /><br />With Jelly Bean, one of the changes of the new Google Play is that the property 'publicSourceDir' of the '<a href="http://developer.android.com/reference/android/content/pm/ApplicationInfo.html" class="postlink">ApplicationInfo</a>' class doesn't point to the APK anymore. Instead, it points to a file called 'res.zip', that contains JUST the &quot;res&quot; folder.<br /><br />I put all my lua files, graphics and sounds in the &quot;assets&quot; folder, which is what the Android pipeline expects you to do.<br /><br />The workaround then, is to move all my files to the res folder. However, this is not straightforward. <br /><br />As described <a href="http://developer.android.com/guide/topics/resources/providing-resources.html" class="postlink">here</a>, only certain folders are recognized by the Android pipeline under res. The one called &quot;raw&quot; is the one that makes more sense.<br /><br />After that, I learned that no subfolders are copied by the pipeline to the APK, so I had to flatten my neat directory structure and copy every file directly to res/raw (and fix all my require's and asset references).<br /><br />Finally, the Android pipeline won't let you have two files with the same name, even if the extension is different. It complains that the resource name is the same, so button.lua and button.png can't both be called that.<br /><br />After making all these changes, my game is now working from Google Play.<br /><br />I still think the proper fix is to either use the AAsset_manager interface or a java layer to load the files. This is the only way to maintain compatibility, unfortunately, as demonstrated by Google breaking it with Jelly Bean. If I find the time, I'll try my hand at implementing it and submit a patch.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8777">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8782" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8782">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong> &raquo; Sun Feb 03, 2013 1:09 am </p>

			

			<div class="content">Hmm .. I wonder if a cleaner system would be to use the MOAIFileSystem.mountVirtualDirectory() functionality to just load the .zip file local to the Host process, first .. I guess this requires some extra research.  Thanks for sharing your findings.</div>

			<div id="sig8782" class="signature">;<br />--<br />Email: <!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />IRC:  torpor on FreeNode, see you in the #moai channel<br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile8782">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1499</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8785" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8785">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Sun Feb 03, 2013 6:17 am </p>

			

			<div class="content">So my game is working now and all is good.<br /><br />I did a bit more digging, though, and now I think that the fix is actually quite simple.<br /><br />With Jelly Bean, there are two files that get created after a package is installed from Google Play. One is the &quot;res.zip&quot; that I was describing above. The other is &quot;pkg.apk&quot;, and it turns out to be the apk that we submit to the store.<br /><br />In Java, one is pointed at by ApplicationInfo.publicSourceDir, while the other is called ApplicationInfo.sourceDir. Up until now, as described <a href="http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#publicSourceDir" class="postlink">here</a>, both were identical. But for &quot;forward-locked&quot; apps, they are different. They look like this on my app, in Jelly Bean:<br /><br />PUBLIC_SOURCE_DIR=/mnt/asec/com.sgarces.bank-1/res.zip<br />SOURCE_DIR=/mnt/asec/com.sgarces.bank-1/pkg.apk<br /><br />So I think the final solution is as simple as replacing the Moai.mount() call in MoaiActivity.onCreate() in MoaiActivity.java, and instead of mounting myApp.publicSourceDir, you mount myApp.sourceDir. And everything should just work.<br /><br />The last day has been quite the adventure.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8785">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8792" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8792">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong> &raquo; Sun Feb 03, 2013 2:54 pm </p>

			

			<div class="content">So its a one-line fix thats also backwards compatible, then?</div>

			<div id="sig8792" class="signature">;<br />--<br />Email: <!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />IRC:  torpor on FreeNode, see you in the #moai channel<br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile8792">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1499</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8799" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8799">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>sgarces</strong> &raquo; Mon Feb 04, 2013 1:09 am </p>

			

			<div class="content">At the end of the day, yes.<br /><br />Funny how things worked out.</div>

			

		</div>

		
			<dl class="postprofile" id="profile8799">
			<dt>
				<strong>sgarces</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 12</dd><dd><strong>Joined:</strong> Sat Dec 29, 2012 11:43 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8800" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8800">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong> &raquo; Mon Feb 04, 2013 1:33 am </p>

			

			<div class="content">Pull request?</div>

			<div id="sig8800" class="signature">;<br />--<br />Email: <!-- e --><a href="mailto:ibisum@gmail.com">ibisum@gmail.com</a><!-- e -->  <br />IRC:  torpor on FreeNode, see you in the #moai channel<br />Got a MOAI snippet?  Please consider adding it to <a href="http://moaisnippets.info/" class="postlink">http://moaisnippets.info/</a></div>

		</div>

		
			<dl class="postprofile" id="profile8800">
			<dt>
				<img src="../download/file.php%253favatar%253d262_1340630942.png" width="120" height="90" alt="User avatar" /><br />
				<strong><span style="color: #AA0000;" class="username-coloured">ibisum</span></strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 1499</dd><dd><strong>Joined:</strong> Mon Oct 17, 2011 8:11 am</dd><dd><strong>Location:</strong> Vienna, Austria</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8814" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8814">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>andrew.lundell</strong> &raquo; Mon Feb 04, 2013 2:16 pm </p>

			

			<div class="content"><blockquote><div><cite>sgarces wrote:</cite>So I think the final solution is as simple as replacing the Moai.mount() call in MoaiActivity.onCreate() in MoaiActivity.java, and instead of mounting myApp.publicSourceDir, you mount myApp.sourceDir. And everything should just work.</div></blockquote><br /><br />Ah ha!  This works perfectly. Thank you.</div>

			<div id="sig8814" class="signature"><a href="https://twitter.com/apLundell" class="postlink">@apLundell</a>  &lt;-- Follow Me!</div>

		</div>

		
			<dl class="postprofile" id="profile8814">
			<dt>
				<strong>andrew.lundell</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 67</dd><dd><strong>Joined:</strong> Sat Oct 08, 2011 5:07 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<div id="p8896" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 ><a href="index.html#p8896">Re: Android game won't start once released</a></h3>
			<p class="author"><img src="../styles/proFormell/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />by <strong>andrew.lundell</strong> &raquo; Fri Feb 08, 2013 3:28 am </p>

			

			<div class="content">Are we sure this fix is 100% backwards compatible? From the docs it seems like it should be, but since I pushed the update, I've had three users with non-Jelly Bean phones complain of &quot;Black screen&quot;.  (ASUS EeeTab(?), Acer Iconia A500, Samsung galaxy s2)<br /><br />It could be completely unrelated, but if so, the timing is weird. Looking into this.</div>

			<div id="sig8896" class="signature"><a href="https://twitter.com/apLundell" class="postlink">@apLundell</a>  &lt;-- Follow Me!</div>

		</div>

		
			<dl class="postprofile" id="profile8896">
			<dt>
				<strong>andrew.lundell</strong>
			</dt>

			

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 67</dd><dd><strong>Joined:</strong> Sat Oct 08, 2011 5:07 am</dd>

		</dl>
	

		<div class="back2top"><a href="index.html#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />

	<form id="viewtopic" method="post" action="index.html">

	<fieldset class="display-options" style="margin-top: 0; ">
		
	</fieldset>

	</form>
	<hr />


<div class="topic-actions">
	<div class="buttons">
	
	</div>

	
		<div class="pagination">
			12 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="../moai-sdk-developer-support.html" class="left-box left" accesskey="r">Return to Moai SDK</a></p>

	<form method="post" id="jumpbox" action="http://192.168.20.226:3000/forums/viewforum.php" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="4">Moai Development Forums</option>
			
				<option value="7" selected="selected">&nbsp; &nbsp;Moai SDK</option>
			
				<option value="9">&nbsp; &nbsp;Questions and Tips</option>
			
				<option value="10">&nbsp; &nbsp;Bug Reports</option>
			
				<option value="29">&nbsp; &nbsp;Reviewers</option>
			
				<option value="3">Moai Community Forums</option>
			
				<option value="11">&nbsp; &nbsp;Community Contributions</option>
			
				<option value="25">&nbsp; &nbsp;&nbsp; &nbsp;Flower</option>
			
				<option value="28">&nbsp; &nbsp;&nbsp; &nbsp;Rapanui</option>
			
				<option value="26">&nbsp; &nbsp;&nbsp; &nbsp;Snippets</option>
			
				<option value="5">&nbsp; &nbsp;Moai Roadmap</option>
			
				<option value="8">&nbsp; &nbsp;&nbsp; &nbsp;Moai Cloud</option>
			
				<option value="6">&nbsp; &nbsp;Made With Moai</option>
			
				<option value="12">Platform Specifics</option>
			
				<option value="17">&nbsp; &nbsp;Android</option>
			
				<option value="18">&nbsp; &nbsp;Apple</option>
			
				<option value="20">&nbsp; &nbsp;Linux</option>
			
				<option value="19">&nbsp; &nbsp;Windows</option>
			
				<option value="21">&nbsp; &nbsp;Browser + Other</option>
			
				<option value="13">Third Party Libraries and Plugins</option>
			
				<option value="22">&nbsp; &nbsp;Physics</option>
			
				<option value="23">&nbsp; &nbsp;Sound + Music</option>
			
				<option value="24">&nbsp; &nbsp;Advertising + Networking + IAPs</option>
			
				<option value="14">Additional</option>
			
				<option value="16">&nbsp; &nbsp;Game Development</option>
			
				<option value="27">&nbsp; &nbsp;Off Topic</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="../index.html" accesskey="h">Board index</a></li>
				
			<li class="rightside">All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group<br />Style by <a href="http://www.m-a-styles.de">Marc Alexander</a> &copy;
		<br /><br /><a href="http://www.phpbb-seo.com/" title="Search Engine Optimization"><img src="../images/phpbb-seo.png" alt="phpBB SEO"/></a><br />Time : 0.059s | 11 Queries | GZIP : Off
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
	</div>
	</div>
<div class="nobottomgap"></div>
</div>
<!--- end of box border -->
</div></div>
<!-- -->
<div class="bottom-left"></div><div class="bottom-center"></div><div class="bottom-right"></div>
</div>
<!-- JQuery Pop Up --><!-- PM Popup --><!-- PM Popup end --><!-- Image Popup -->
<div id="popupImage">
	<p id="ImagePopup"></p>
	<a id="popupImageClose">x</a> 
</div>
<!-- Image Popup -->
<div id="backgroundPopup"></div> 
<!-- JQuery Pop Up END -->
</body>
</html>